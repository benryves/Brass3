<!doctype>
<html>
	<head>
		<style>
			* {
				font-size: 8pt;
			}
			pre.source {
				padding: 0px;
				margin: 0px;
				font-family: consolas, "lucida console", monospace;
			}
			pre.source span.comment {
				color: #060;
			}
			pre.source span.string {
				color: #900;
			}
			pre.source span.directive {
				color: #009;
			}
			pre.source span.function {
				color: #069;
			}
			pre.source span.label {
				color: #663;
			}
			pre.source.disabled, pre.source.disabled * {
				color: #999 !important;
			}
			td.ln {
				font-family: consolas, "lucida console", monospace;
				text-align: right;
				padding-right: 3px;
				color: #39C;
				border-right: 1px dotted #39C;
			}
		</style>
	</head>
	<body>
<table>
<tr><td class="ln">1</td><td><pre class="source"><span class="directive">.include</span><span class="whitespace"> </span><span class="string">"test/pinball.asm"</span></pre></td></tr><tr><td class="ln">1</td><td><pre class="source"><span class="directive">.NOLIST</span></pre></td></tr><tr><td class="ln">12</td><td><pre class="source"><span class="directive">#define</span><span class="whitespace"> </span><span class="none">TI83P</span></pre></td></tr><tr><td class="ln">16</td><td><pre class="source"><span class="directive">#include</span><span class="whitespace"> </span><span class="string">"models.inc"</span><span class="whitespace">		</span><span class="comment">; Model specific information: equates and header</span></pre></td></tr><tr><td class="ln">1</td><td><pre class="source"><span class="directive">#ifdef</span><span class="whitespace"> </span><span class="none">TI83V</span></pre></td></tr><tr><td class="ln">3</td><td><pre class="source disabled"><span class="directive">#define</span><span class="whitespace"> </span><span class="none">TI83</span></pre></td></tr><tr><td class="ln">5</td><td><pre class="source"><span class="directive">#endif</span></pre></td></tr><tr><td class="ln">7</td><td><pre class="source"><span class="directive">#ifdef</span><span class="whitespace"> </span><span class="none">TI82C</span></pre></td></tr><tr><td class="ln">9</td><td><pre class="source disabled"><span class="directive">#define</span><span class="whitespace"> </span><span class="none">TI82</span></pre></td></tr><tr><td class="ln">11</td><td><pre class="source disabled"><span class="directive">#define</span><span class="whitespace"> </span><span class="function">bcall</span><span class="punctuation">(</span><span class="none">xxxx</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="none">call</span><span class="whitespace"> </span><span class="none">$8D74</span><span class="whitespace"> </span><span class="seperator">\</span><span class="whitespace"> </span><span class="directive">.word</span><span class="whitespace"> </span><span class="none">xxxx</span></pre></td></tr><tr><td class="ln">13</td><td><pre class="source disabled"><span class="none">_vputs</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$37D4</span><span class="whitespace">	</span><span class="comment">; Displays a string on the graph screen</span></pre></td></tr><tr><td class="ln">15</td><td><pre class="source"><span class="directive">#endif</span></pre></td></tr><tr><td class="ln">17</td><td><pre class="source"><span class="directive">#ifdef</span><span class="whitespace"> </span><span class="none">TI82C196</span></pre></td></tr><tr><td class="ln">19</td><td><pre class="source disabled"><span class="directive">#define</span><span class="whitespace"> </span><span class="none">TI82</span></pre></td></tr><tr><td class="ln">21</td><td><pre class="source disabled"><span class="directive">#define</span><span class="whitespace"> </span><span class="function">bcall</span><span class="punctuation">(</span><span class="none">xxxx</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="none">call</span><span class="whitespace"> </span><span class="none">xxxx</span></pre></td></tr><tr><td class="ln">23</td><td><pre class="source disabled"><span class="none">_vputs</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$390D</span><span class="whitespace">	</span><span class="comment">; Displays a string on the graph screen</span></pre></td></tr><tr><td class="ln">25</td><td><pre class="source"><span class="directive">#endif</span></pre></td></tr><tr><td class="ln">27</td><td><pre class="source"><span class="directive">#ifdef</span><span class="whitespace"> </span><span class="none">TI82S</span></pre></td></tr><tr><td class="ln">29</td><td><pre class="source disabled"><span class="directive">#define</span><span class="whitespace"> </span><span class="none">TI82</span></pre></td></tr><tr><td class="ln">31</td><td><pre class="source disabled"><span class="directive">#define</span><span class="whitespace"> </span><span class="function">bcall</span><span class="punctuation">(</span><span class="none">xxxx</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="none">call</span><span class="whitespace"> </span><span class="none">$8D74</span><span class="whitespace"> </span><span class="seperator">\</span><span class="whitespace"> </span><span class="directive">.word</span><span class="whitespace"> </span><span class="none">xxxx</span></pre></td></tr><tr><td class="ln">33</td><td><pre class="source disabled"><span class="none">_vputs</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$37D4</span><span class="whitespace">	</span><span class="comment">; Displays a string on the graph screen</span></pre></td></tr><tr><td class="ln">35</td><td><pre class="source"><span class="directive">#endif</span></pre></td></tr><tr><td class="ln">37</td><td><pre class="source"><span class="directive">#ifdef</span><span class="whitespace"> </span><span class="none">TI82</span></pre></td></tr><tr><td class="ln">39</td><td><pre class="source disabled"><span class="none">PenColRow</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$8215</span><span class="whitespace">	</span><span class="comment">; Pen column and row address</span></pre></td></tr><tr><td class="ln">41</td><td><pre class="source disabled"><span class="none">VScreen</span><span class="whitespace"> 	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$88B8</span><span class="whitespace">	</span><span class="comment">; Plotsscreen, 768 bytes</span></pre></td></tr><tr><td class="ln">42</td><td><pre class="source disabled"><span class="none">VScreenB</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$8228</span><span class="whitespace">	</span><span class="comment">; Savesscreen, 768 bytes</span></pre></td></tr><tr><td class="ln">43</td><td><pre class="source disabled"><span class="none">Vars</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$8028</span><span class="whitespace">	</span><span class="comment">; OPs (tightly fitting)</span></pre></td></tr><tr><td class="ln">45</td><td><pre class="source disabled"><span class="none">MEMSTART</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">VScreenB</span><span class="punctuation">+</span><span class="none">762</span><span class="whitespace">	</span><span class="comment">; These will be 'simulated', sort of</span></pre></td></tr><tr><td class="ln">46</td><td><pre class="source disabled"><span class="none">MEMEND</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">VScreenB</span><span class="punctuation">+</span><span class="none">764</span></pre></td></tr><tr><td class="ln">47</td><td><pre class="source disabled"><span class="none">MEMALLOC</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">VScreenB</span><span class="punctuation">+</span><span class="none">760</span><span class="whitespace">	</span><span class="comment">; The amount of memory allocated</span></pre></td></tr><tr><td class="ln">49</td><td><pre class="source disabled"><span class="directive">#ifdef</span><span class="whitespace"> </span><span class="none">TI82S</span></pre></td></tr><tr><td class="ln">51</td><td><pre class="source disabled"><span class="none">INSERT_MEM</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$2258</span></pre></td></tr><tr><td class="ln">52</td><td><pre class="source disabled"><span class="none">MEM_FREE</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$22AE</span></pre></td></tr><tr><td class="ln">53</td><td><pre class="source disabled"><span class="none">DEL_MEM</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$258D</span></pre></td></tr><tr><td class="ln">54</td><td><pre class="source disabled"><span class="none">DEL_TMP</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$3606</span></pre></td></tr><tr><td class="ln">55</td><td><pre class="source disabled"><span class="none">CREATE_TMP</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$38D0</span></pre></td></tr><tr><td class="ln">57</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="directive">.org</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">$9445</span><span class="punctuation">)</span><span class="punctuation">-</span><span class="none">39</span></pre></td></tr><tr><td class="ln">59</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$3b</span><span class="punctuation">,</span><span class="none">$31</span><span class="punctuation">,</span><span class="none">$33</span><span class="punctuation">,</span><span class="none">$70</span><span class="punctuation">,</span><span class="none">$39</span><span class="punctuation">,</span><span class="none">$34</span><span class="punctuation">,</span><span class="none">$31</span><span class="punctuation">,</span><span class="none">$33</span><span class="whitespace">	</span><span class="comment">; SNG launcher</span></pre></td></tr><tr><td class="ln">60</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$34</span><span class="punctuation">,</span><span class="none">$33</span><span class="punctuation">,</span><span class="none">$04</span><span class="punctuation">,</span><span class="none">$5c</span><span class="punctuation">,</span><span class="none">$4b</span><span class="punctuation">,</span><span class="none">$10</span><span class="punctuation">,</span><span class="none">$31</span><span class="punctuation">,</span><span class="none">$39</span></pre></td></tr><tr><td class="ln">61</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$2b</span><span class="punctuation">,</span><span class="none">$33</span><span class="punctuation">,</span><span class="none">$34</span><span class="punctuation">,</span><span class="none">$3f</span><span class="punctuation">,</span><span class="none">$72</span><span class="punctuation">,</span><span class="none">$04</span><span class="punctuation">,</span><span class="none">$5c</span><span class="punctuation">,</span><span class="none">$4b</span></pre></td></tr><tr><td class="ln">62</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$10</span><span class="punctuation">,</span><span class="none">$31</span><span class="punctuation">,</span><span class="none">$39</span><span class="punctuation">,</span><span class="none">$2b</span><span class="punctuation">,</span><span class="none">$33</span><span class="punctuation">,</span><span class="none">$3f</span><span class="punctuation">,</span><span class="none">$e0</span><span class="punctuation">,</span><span class="none">$31</span></pre></td></tr><tr><td class="ln">63</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$2b</span><span class="punctuation">,</span><span class="none">$31</span><span class="punctuation">,</span><span class="none">$2b</span><span class="punctuation">,</span><span class="none">$2a</span><span class="punctuation">,</span><span class="none">$3f</span><span class="punctuation">,</span><span class="none">$d9</span><span class="punctuation">,</span><span class="none">$3f</span></pre></td></tr><tr><td class="ln">65</td><td><pre class="source disabled"><span class="directive">#else</span></pre></td></tr><tr><td class="ln">67</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="directive">.org</span><span class="whitespace"> </span><span class="none">$9101</span></pre></td></tr><tr><td class="ln">68</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$D5</span><span class="punctuation">,</span><span class="none">$00</span><span class="punctuation">,</span><span class="none">$11</span><span class="whitespace">	</span><span class="comment">; CrASH header</span></pre></td></tr><tr><td class="ln">70</td><td><pre class="source disabled"><span class="directive">#endif</span></pre></td></tr><tr><td class="ln">72</td><td><pre class="source"><span class="directive">#endif</span></pre></td></tr><tr><td class="ln">74</td><td><pre class="source"><span class="directive">#ifdef</span><span class="whitespace"> </span><span class="none">TI83</span></pre></td></tr><tr><td class="ln">76</td><td><pre class="source disabled"><span class="directive">#define</span><span class="whitespace"> </span><span class="function">bcall</span><span class="punctuation">(</span><span class="none">xxxx</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="none">call</span><span class="whitespace"> </span><span class="none">xxxx</span></pre></td></tr><tr><td class="ln">78</td><td><pre class="source disabled"><span class="none">_vputs</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$4781</span><span class="whitespace">	</span><span class="comment">; Displays a string on the graph screen</span></pre></td></tr><tr><td class="ln">79</td><td><pre class="source disabled"><span class="none">PenColRow</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$8252</span><span class="whitespace">	</span><span class="comment">; Pen column and row address</span></pre></td></tr><tr><td class="ln">81</td><td><pre class="source disabled"><span class="none">VScreen</span><span class="whitespace"> 	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$8E29</span><span class="whitespace">	</span><span class="comment">; Plotsscreen, 768 bytes</span></pre></td></tr><tr><td class="ln">82</td><td><pre class="source disabled"><span class="none">VScreenB</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$8265</span><span class="whitespace">	</span><span class="comment">; Savesscreen, 768 bytes</span></pre></td></tr><tr><td class="ln">83</td><td><pre class="source disabled"><span class="none">Vars</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$8039</span><span class="whitespace">	</span><span class="comment">; OPs (tightly fitting)</span></pre></td></tr><tr><td class="ln">86</td><td><pre class="source disabled"><span class="none">MEMSTART</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$930D</span></pre></td></tr><tr><td class="ln">87</td><td><pre class="source disabled"><span class="none">MEMEND</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$9311</span></pre></td></tr><tr><td class="ln">89</td><td><pre class="source disabled"><span class="directive">#ifdef</span><span class="whitespace"> </span><span class="none">TI83V</span></pre></td></tr><tr><td class="ln">91</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="directive">.org</span><span class="whitespace"> </span><span class="none">$9329</span></pre></td></tr><tr><td class="ln">92</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="string">"�9_[V?"</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">0</span><span class="whitespace">			</span><span class="comment">; Venus header</span></pre></td></tr><tr><td class="ln">94</td><td><pre class="source disabled"><span class="directive">#else</span></pre></td></tr><tr><td class="ln">96</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="directive">.org</span><span class="whitespace"> </span><span class="none">$9327</span></pre></td></tr><tr><td class="ln">97</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace">						</span><span class="comment">; ION header</span></pre></td></tr><tr><td class="ln">99</td><td><pre class="source disabled"><span class="directive">#endif</span></pre></td></tr><tr><td class="ln">101</td><td><pre class="source"><span class="directive">#endif</span></pre></td></tr><tr><td class="ln">103</td><td><pre class="source"><span class="directive">#ifdef</span><span class="whitespace"> </span><span class="none">TI83P</span></pre></td></tr><tr><td class="ln">105</td><td><pre class="source"><span class="directive">#define</span><span class="whitespace"> </span><span class="function">bcall</span><span class="punctuation">(</span><span class="none">xxxx</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="none">rst</span><span class="whitespace"> </span><span class="none">28h</span><span class="whitespace"> </span><span class="seperator">\</span><span class="whitespace"> </span><span class="directive">.word</span><span class="whitespace"> </span><span class="none">xxxx</span></pre></td></tr><tr><td class="ln">107</td><td><pre class="source"><span class="none">_vputs</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$4561</span><span class="whitespace">	</span><span class="comment">; Displays a string on the graph screen</span></pre></td></tr><tr><td class="ln">108</td><td><pre class="source"><span class="none">PenColRow</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$86D7</span><span class="whitespace">	</span><span class="comment">; Pen column and row address</span></pre></td></tr><tr><td class="ln">110</td><td><pre class="source"><span class="none">VScreen</span><span class="whitespace"> 	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$9340</span><span class="whitespace">	</span><span class="comment">; Plotsscreen, 768 bytes</span></pre></td></tr><tr><td class="ln">111</td><td><pre class="source"><span class="none">VScreenB</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$86EC</span><span class="whitespace">	</span><span class="comment">; Savesscreen, 768 bytes</span></pre></td></tr><tr><td class="ln">112</td><td><pre class="source"><span class="none">Vars</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$8478</span><span class="whitespace">	</span><span class="comment">; OPs (tightly fitting)</span></pre></td></tr><tr><td class="ln">115</td><td><pre class="source"><span class="none">MEMSTART</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$9824</span></pre></td></tr><tr><td class="ln">116</td><td><pre class="source"><span class="none">MEMEND</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$9828</span></pre></td></tr><tr><td class="ln">118</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.org</span><span class="whitespace"> </span><span class="none">$9D93</span></pre></td></tr><tr><td class="ln">119</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$BB</span><span class="punctuation">,</span><span class="none">$6D</span></pre></td></tr><tr><td class="ln">120</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace">				</span><span class="comment">; ION header</span></pre></td></tr><tr><td class="ln">122</td><td><pre class="source"><span class="directive">#endif</span></pre></td></tr><tr><td class="ln">124</td><td><pre class="source"><span class="directive">#ifndef</span><span class="whitespace"> </span><span class="none">TI82</span></pre></td></tr><tr><td class="ln">126</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">Main</span></pre></td></tr><tr><td class="ln">128</td><td><pre class="source"><span class="directive">#endif</span></pre></td></tr><tr><td class="ln">130</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="string">"Acelgoyobis"</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">20</td><td><pre class="source"><span class="none">BackupSP</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">Vars</span><span class="whitespace">			</span><span class="comment">; 2 bytes	; The initial value of SP</span></pre></td></tr><tr><td class="ln">21</td><td><pre class="source"><span class="none">SaveSP</span><span class="whitespace">			</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">Vars</span><span class="punctuation">+</span><span class="none">2</span><span class="whitespace">			</span><span class="comment">; 2 bytes	; Temporary storage for SP</span></pre></td></tr><tr><td class="ln">22</td><td><pre class="source"><span class="none">FrameCount</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">Vars</span><span class="punctuation">+</span><span class="none">4</span><span class="whitespace">			</span><span class="comment">; 1 byte	; Increased by the timer interrupt</span></pre></td></tr><tr><td class="ln">24</td><td><pre class="source"><span class="none">MenuData</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">Vars</span><span class="punctuation">+</span><span class="none">5</span><span class="whitespace">			</span><span class="comment">; Can peacefully coexist with arcade variables</span></pre></td></tr><tr><td class="ln">26</td><td><pre class="source"><span class="none">MB_Var</span><span class="whitespace">			</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">Vars</span><span class="punctuation">+</span><span class="none">5</span><span class="whitespace">			</span><span class="comment">; 2 bytes	; Used in MoveBall while playing</span></pre></td></tr><tr><td class="ln">27</td><td><pre class="source"><span class="none">TableSlope</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">Vars</span><span class="punctuation">+</span><span class="none">7</span><span class="whitespace">			</span><span class="comment">; 2 bytes	; Pointer to the current slope array</span></pre></td></tr><tr><td class="ln">28</td><td><pre class="source"><span class="none">TableData</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">Vars</span><span class="punctuation">+</span><span class="none">9</span><span class="whitespace">			</span><span class="comment">; 2 bytes	; Pointer to the current table image</span></pre></td></tr><tr><td class="ln">29</td><td><pre class="source"><span class="none">TableFlippers</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">Vars</span><span class="punctuation">+</span><span class="none">11</span><span class="whitespace">			</span><span class="comment">; 2 bytes	; Pointer to flipper data</span></pre></td></tr><tr><td class="ln">30</td><td><pre class="source"><span class="none">GizmoList</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">Vars</span><span class="punctuation">+</span><span class="none">13</span><span class="whitespace">			</span><span class="comment">; 2 bytes	; Pointer to gizmo pointers</span></pre></td></tr><tr><td class="ln">31</td><td><pre class="source"><span class="none">TimerList</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">Vars</span><span class="punctuation">+</span><span class="none">15</span><span class="whitespace">			</span><span class="comment">; 2 bytes	; Pointer to timer pointers</span></pre></td></tr><tr><td class="ln">32</td><td><pre class="source"><span class="none">CounterList</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">Vars</span><span class="punctuation">+</span><span class="none">17</span><span class="whitespace">			</span><span class="comment">; 2 bytes	; Pointer to counter pointers</span></pre></td></tr><tr><td class="ln">33</td><td><pre class="source"><span class="none">BounceList</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">Vars</span><span class="punctuation">+</span><span class="none">19</span><span class="whitespace">			</span><span class="comment">; 2 bytes	; Pointer to bounce objects (!)</span></pre></td></tr><tr><td class="ln">34</td><td><pre class="source"><span class="none">BounceNum</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">Vars</span><span class="punctuation">+</span><span class="none">21</span><span class="whitespace">			</span><span class="comment">; 1 byte	; Number of bounces</span></pre></td></tr><tr><td class="ln">35</td><td><pre class="source"><span class="none">ObjSrc</span><span class="whitespace">			</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">Vars</span><span class="punctuation">+</span><span class="none">22</span><span class="whitespace">			</span><span class="comment">; 2 bytes	; Pointer to clean objects</span></pre></td></tr><tr><td class="ln">36</td><td><pre class="source"><span class="none">ObjDst</span><span class="whitespace">			</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">Vars</span><span class="punctuation">+</span><span class="none">24</span><span class="whitespace">			</span><span class="comment">; 2 bytes	; Pointer to dynamic objects</span></pre></td></tr><tr><td class="ln">37</td><td><pre class="source"><span class="none">ObjLen</span><span class="whitespace">			</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">Vars</span><span class="punctuation">+</span><span class="none">26</span><span class="whitespace">			</span><span class="comment">; 2 bytes	; Total length of object block</span></pre></td></tr><tr><td class="ln">38</td><td><pre class="source"><span class="none">BallData</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">Vars</span><span class="punctuation">+</span><span class="none">28</span><span class="whitespace">			</span><span class="comment">; 9 bytes	; Dynamic ball variables</span></pre></td></tr><tr><td class="ln">39</td><td><pre class="source"><span class="none">TableVars</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">BallData</span><span class="punctuation">+</span><span class="none">9</span><span class="whitespace">		</span><span class="comment">; 4 bytes	; Table state variables</span></pre></td></tr><tr><td class="ln">40</td><td><pre class="source"><span class="none">GameVars</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">TableVars</span><span class="punctuation">+</span><span class="none">4</span><span class="whitespace">		</span><span class="comment">; ? bytes	; Gameplay information</span></pre></td></tr><tr><td class="ln">42</td><td><pre class="source"><span class="none">__X</span><span class="whitespace">				</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">0</span><span class="whitespace">					</span><span class="comment">; 2 bytes</span></pre></td></tr><tr><td class="ln">43</td><td><pre class="source"><span class="none">__Y</span><span class="whitespace">				</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">2</span><span class="whitespace">					</span><span class="comment">; 2 bytes</span></pre></td></tr><tr><td class="ln">44</td><td><pre class="source"><span class="none">__VX</span><span class="whitespace">			</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">4</span><span class="whitespace">					</span><span class="comment">; 2 bytes</span></pre></td></tr><tr><td class="ln">45</td><td><pre class="source"><span class="none">__VYlow</span><span class="whitespace">			</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">6</span><span class="whitespace">					</span><span class="comment">; 1 byte (required for accuracy)</span></pre></td></tr><tr><td class="ln">46</td><td><pre class="source"><span class="none">__VY</span><span class="whitespace">			</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">7</span><span class="whitespace">					</span><span class="comment">; 2 bytes</span></pre></td></tr><tr><td class="ln">48</td><td><pre class="source"><span class="none">BallX</span><span class="whitespace">			</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">BallData</span><span class="punctuation">+</span><span class="none">__X</span><span class="whitespace">		</span><span class="comment">; Ball X coordinate</span></pre></td></tr><tr><td class="ln">49</td><td><pre class="source"><span class="none">BallY</span><span class="whitespace">			</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">BallData</span><span class="punctuation">+</span><span class="none">__Y</span><span class="whitespace">		</span><span class="comment">; Ball Y coordinate</span></pre></td></tr><tr><td class="ln">50</td><td><pre class="source"><span class="none">BallVX</span><span class="whitespace">			</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">BallData</span><span class="punctuation">+</span><span class="none">__VX</span><span class="whitespace">		</span><span class="comment">; Ball X velocity</span></pre></td></tr><tr><td class="ln">51</td><td><pre class="source"><span class="none">BallVYlow</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">BallData</span><span class="punctuation">+</span><span class="none">__VYlow</span><span class="whitespace">	</span><span class="comment">; Ball Y velocity lowest byte</span></pre></td></tr><tr><td class="ln">52</td><td><pre class="source"><span class="none">BallVY</span><span class="whitespace">			</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">BallData</span><span class="punctuation">+</span><span class="none">__VY</span><span class="whitespace">		</span><span class="comment">; Ball Y velocity</span></pre></td></tr><tr><td class="ln">54</td><td><pre class="source"><span class="none">__LeftFlipper</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">0</span><span class="whitespace">							</span><span class="comment">; 1 byte	; The relative addresses</span></pre></td></tr><tr><td class="ln">55</td><td><pre class="source"><span class="none">__RightFlipper</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">__LeftFlipper</span><span class="punctuation">+</span><span class="none">1</span><span class="whitespace">				</span><span class="comment">; 1 byte	; of these variables must</span></pre></td></tr><tr><td class="ln">56</td><td><pre class="source"><span class="none">__LeftPushed</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">__LeftFlipper</span><span class="punctuation">+</span><span class="none">2</span><span class="whitespace">				</span><span class="comment">; 1 byte	; remain as defined</span></pre></td></tr><tr><td class="ln">57</td><td><pre class="source"><span class="none">__RightPushed</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">__RightFlipper</span><span class="punctuation">+</span><span class="none">2</span><span class="whitespace">			</span><span class="comment">; 1 byte</span></pre></td></tr><tr><td class="ln">59</td><td><pre class="source"><span class="none">LeftFlipper</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">TableVars</span><span class="punctuation">+</span><span class="none">__LeftFlipper</span><span class="whitespace">		</span><span class="comment">; Left flipper height (0-4)</span></pre></td></tr><tr><td class="ln">60</td><td><pre class="source"><span class="none">RightFlipper</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">TableVars</span><span class="punctuation">+</span><span class="none">__RightFlipper</span><span class="whitespace">	</span><span class="comment">; Right flipper height (0-4)</span></pre></td></tr><tr><td class="ln">61</td><td><pre class="source"><span class="none">LeftPushed</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">TableVars</span><span class="punctuation">+</span><span class="none">__LeftPushed</span><span class="whitespace">		</span><span class="comment">; Left flipper pushed (0 if yes)</span></pre></td></tr><tr><td class="ln">62</td><td><pre class="source"><span class="none">RightPushed</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">TableVars</span><span class="punctuation">+</span><span class="none">__RightPushed</span><span class="whitespace">		</span><span class="comment">; Right flipper pushed (0 if yes)</span></pre></td></tr><tr><td class="ln">64</td><td><pre class="source"><span class="none">__BonusVal</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">0</span><span class="whitespace">							</span><span class="comment">; 4 bytes</span></pre></td></tr><tr><td class="ln">65</td><td><pre class="source"><span class="none">__BonusMul</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">4</span><span class="whitespace">							</span><span class="comment">; 1 byte</span></pre></td></tr><tr><td class="ln">66</td><td><pre class="source"><span class="none">__Lives</span><span class="whitespace">			</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">5</span><span class="whitespace">							</span><span class="comment">; 1 byte</span></pre></td></tr><tr><td class="ln">67</td><td><pre class="source"><span class="none">__Score</span><span class="whitespace">			</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">6</span><span class="whitespace">							</span><span class="comment">; 4 bytes</span></pre></td></tr><tr><td class="ln">68</td><td><pre class="source"><span class="none">__TiltFrames</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">10</span><span class="whitespace">							</span><span class="comment">; 2 bytes</span></pre></td></tr><tr><td class="ln">70</td><td><pre class="source"><span class="none">BonusVal</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">GameVars</span><span class="punctuation">+</span><span class="none">__BonusVal</span><span class="whitespace">			</span><span class="comment">; Current bonus value</span></pre></td></tr><tr><td class="ln">71</td><td><pre class="source"><span class="none">BonusMul</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">GameVars</span><span class="punctuation">+</span><span class="none">__BonusMul</span><span class="whitespace">			</span><span class="comment">; Current bonus multiplier</span></pre></td></tr><tr><td class="ln">72</td><td><pre class="source"><span class="none">Lives</span><span class="whitespace">			</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">GameVars</span><span class="punctuation">+</span><span class="none">__Lives</span><span class="whitespace">			</span><span class="comment">; Number of balls available</span></pre></td></tr><tr><td class="ln">73</td><td><pre class="source"><span class="none">Score</span><span class="whitespace">			</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">GameVars</span><span class="punctuation">+</span><span class="none">__Score</span><span class="whitespace">			</span><span class="comment">; Current score</span></pre></td></tr><tr><td class="ln">74</td><td><pre class="source"><span class="none">TiltFrames</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">GameVars</span><span class="punctuation">+</span><span class="none">__TiltFrames</span><span class="whitespace">		</span><span class="comment">; Number of frames to the next legal tilt</span></pre></td></tr><tr><td class="ln">76</td><td><pre class="source"><span class="none">MenuAddress</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">MenuData</span><span class="whitespace">		</span><span class="comment">; Pointer to menu data</span></pre></td></tr><tr><td class="ln">77</td><td><pre class="source"><span class="none">MenuItem</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">MenuData</span><span class="punctuation">+</span><span class="none">2</span><span class="whitespace">		</span><span class="comment">; Current menu item selected</span></pre></td></tr><tr><td class="ln">78</td><td><pre class="source"><span class="none">MenuItems</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">MenuData</span><span class="punctuation">+</span><span class="none">3</span><span class="whitespace">		</span><span class="comment">; Number of menu items</span></pre></td></tr><tr><td class="ln">79</td><td><pre class="source"><span class="none">MenuCoords</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">MenuData</span><span class="punctuation">+</span><span class="none">4</span><span class="whitespace">		</span><span class="comment">; X coordinates of items (max. 10)</span></pre></td></tr><tr><td class="ln">81</td><td><pre class="source"><span class="none">BigSprite</span><span class="whitespace">			</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">MenuData</span><span class="punctuation">+</span><span class="none">14</span><span class="whitespace">		</span><span class="comment">; 8 bytes	; Used in SpriteBig</span></pre></td></tr><tr><td class="ln">82</td><td><pre class="source"><span class="none">TablePointers</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">MenuData</span><span class="punctuation">+</span><span class="none">22</span><span class="whitespace">		</span><span class="comment">; 20 bytes	; Pointers to available tables</span></pre></td></tr><tr><td class="ln">83</td><td><pre class="source"><span class="none">TableMenu</span><span class="whitespace">			</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">VScreenB</span><span class="whitespace">		</span><span class="comment">; Pointer to dynamic menu needed for choosing tables</span></pre></td></tr><tr><td class="ln">84</td><td><pre class="source"><span class="none">Sin_Table</span><span class="whitespace">			</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">VScreenB</span><span class="whitespace">		</span><span class="comment">; Sine table used during game</span></pre></td></tr><tr><td class="ln">85</td><td><pre class="source"><span class="none">RightFlipperSprites</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">VScreenB</span><span class="punctuation">+</span><span class="none">256</span><span class="whitespace">	</span><span class="comment">; Sprites of the rightward flippers</span></pre></td></tr><tr><td class="ln">86</td><td><pre class="source"><span class="none">TableCorrection</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">VScreenB</span><span class="punctuation">+</span><span class="none">766</span><span class="whitespace">	</span><span class="comment">; Pointer to the current table</span></pre></td></tr><tr><td class="ln">88</td><td><pre class="source"><span class="none">FRAMEDELAY</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">3</span><span class="whitespace">		</span><span class="comment">; Number of interrupts (ticks) to wait between game frames</span></pre></td></tr><tr><td class="ln">89</td><td><pre class="source"><span class="none">DELAYFACTOR</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">20</span><span class="whitespace">		</span><span class="comment">; Number of interrupts to wait between menu frames</span></pre></td></tr><tr><td class="ln">90</td><td><pre class="source"><span class="none">MENULEFT</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">6</span><span class="whitespace">		</span><span class="comment">; X position of selected item</span></pre></td></tr><tr><td class="ln">91</td><td><pre class="source"><span class="none">MENURIGHT</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">12</span><span class="whitespace">		</span><span class="comment">; X position of other item</span></pre></td></tr><tr><td class="ln">92</td><td><pre class="source"><span class="none">GRAVITY</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">6000</span><span class="whitespace">	</span><span class="comment">; Gravitational acceleration (1/65536 pixels per ticks squared)</span></pre></td></tr><tr><td class="ln">93</td><td><pre class="source"><span class="none">FORCEFACTOR</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">1400</span><span class="whitespace">	</span><span class="comment">; Strength of the flippers</span></pre></td></tr><tr><td class="ln">94</td><td><pre class="source"><span class="none">TILTFACTOR</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">1000</span><span class="whitespace">	</span><span class="comment">; Minimum number of frames between subsequent tilts</span></pre></td></tr><tr><td class="ln">96</td><td><pre class="source"><span class="none">MEMUSED</span><span class="whitespace">		</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$1300</span><span class="whitespace">	</span><span class="comment">; Memory needed to store slope and object data in the game</span></pre></td></tr><tr><td class="ln">100</td><td><pre class="source"><span class="label">Main:</span></pre></td></tr><tr><td class="ln">102</td><td><pre class="source"><span class="directive">#ifdef</span><span class="whitespace"> </span><span class="none">TI82</span></pre></td></tr><tr><td class="ln">104</td><td><pre class="source disabled"><span class="directive">#ifdef</span><span class="whitespace"> </span><span class="none">TI82S</span></pre></td></tr><tr><td class="ln">106</td><td><pre class="source disabled"><span class="whitespace">  </span><span class="instruction">rst</span><span class="whitespace"> </span><span class="instruction">28h</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">107</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="directive">.word</span><span class="whitespace"> </span><span class="none">DEL_TMP</span></pre></td></tr><tr><td class="ln">107</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">MEMUSED</span></pre></td></tr><tr><td class="ln">108</td><td><pre class="source disabled"><span class="whitespace">  </span><span class="instruction">rst</span><span class="whitespace"> </span><span class="instruction">28h</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">109</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="directive">.word</span><span class="whitespace"> </span><span class="none">MEM_FREE</span></pre></td></tr><tr><td class="ln">109</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">EnoughMem</span></pre></td></tr><tr><td class="ln">110</td><td><pre class="source disabled"><span class="whitespace">  </span><span class="instruction">rst</span><span class="whitespace"> </span><span class="instruction">28h</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">111</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="directive">.word</span><span class="whitespace"> </span><span class="none">CREATE_TMP</span></pre></td></tr><tr><td class="ln">111</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">112</td><td><pre class="source disabled"><span class="label">EnoughMem:</span></pre></td></tr><tr><td class="ln">113</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">MEMUSED</span><span class="whitespace">				</span><span class="comment">; Nearly all RAM is allocated to remove phantom table files</span></pre></td></tr><tr><td class="ln">114</td><td><pre class="source disabled"><span class="label">IncreaseMem:</span></pre></td></tr><tr><td class="ln">115</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">MEMALLOC</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">116</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="none">8</span><span class="whitespace">						</span><span class="comment">; This increment is about half of a minimal table, therefore sufficiently small</span></pre></td></tr><tr><td class="ln">117</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">118</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">119</td><td><pre class="source disabled"><span class="whitespace">  </span><span class="instruction">rst</span><span class="whitespace"> </span><span class="instruction">28h</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">120</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="directive">.word</span><span class="whitespace"> </span><span class="none">MEM_FREE</span></pre></td></tr><tr><td class="ln">120</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">121</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">IncreaseMem</span></pre></td></tr><tr><td class="ln">122</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">MEMALLOC</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">123</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">LastByte</span></pre></td></tr><tr><td class="ln">124</td><td><pre class="source disabled"><span class="whitespace">  </span><span class="instruction">rst</span><span class="whitespace"> </span><span class="instruction">28h</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">125</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="directive">.word</span><span class="whitespace"> </span><span class="none">INSERT_MEM</span></pre></td></tr><tr><td class="ln">125</td><td><pre class="source disabled"><span class="whitespace">  </span><span class="instruction">rst</span><span class="whitespace"> </span><span class="instruction">28h</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">126</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="directive">.word</span><span class="whitespace"> </span><span class="none">CREATE_TMP</span></pre></td></tr><tr><td class="ln">126</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">LastByte</span><span class="whitespace">				</span><span class="comment">; Initialising pointers to the free RAM (82 SNG)</span></pre></td></tr><tr><td class="ln">127</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">MEMSTART</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">128</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">MEMALLOC</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">129</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">130</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">MEMEND</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">132</td><td><pre class="source disabled"><span class="directive">#else</span></pre></td></tr><tr><td class="ln">134</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">LastByte</span><span class="whitespace">				</span><span class="comment">; Initialising pointers to the free RAM (82 CrASH)</span></pre></td></tr><tr><td class="ln">135</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">MEMSTART</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">136</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">LastByte</span><span class="punctuation">+</span><span class="none">MEMUSED</span></pre></td></tr><tr><td class="ln">137</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">MEMEND</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">139</td><td><pre class="source disabled"><span class="directive">#endif</span></pre></td></tr><tr><td class="ln">141</td><td><pre class="source"><span class="directive">#else</span></pre></td></tr><tr><td class="ln">143</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">MEMEND</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; Checking free memory before doing anything (83 and 83+)</span></pre></td></tr><tr><td class="ln">144</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">MEMSTART</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">145</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">MEMUSED</span></pre></td></tr><tr><td class="ln">146</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">147</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">148</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sbc</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">149</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="whitespace">						</span><span class="comment">; Exit if there isn't enough memory</span></pre></td></tr><tr><td class="ln">151</td><td><pre class="source"><span class="directive">#endif</span></pre></td></tr><tr><td class="ln">153</td><td><pre class="source"><span class="label">CheckTables:</span></pre></td></tr><tr><td class="ln">154</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">MEMSTART</span><span class="punctuation">)</span><span class="whitespace">			</span><span class="comment">; Clearing free RAM</span></pre></td></tr><tr><td class="ln">155</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">MEMEND</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">156</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">scf</span></pre></td></tr><tr><td class="ln">157</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sbc</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">158</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">159</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">160</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">h</span><span class="punctuation">,</span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">161</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">l</span><span class="punctuation">,</span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">162</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">163</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">164</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ldir</span></pre></td></tr><tr><td class="ln">165</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">166</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">TableCorrection</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">167</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">LastByte</span><span class="punctuation">-</span><span class="none">1</span></pre></td></tr><tr><td class="ln">168</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">FindTable</span></pre></td></tr><tr><td class="ln">169</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">170</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">$f0</span></pre></td></tr><tr><td class="ln">171</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">FastExit</span><span class="whitespace">				</span><span class="comment">; Exit if no tables found</span></pre></td></tr><tr><td class="ln">173</td><td><pre class="source"><span class="label">Start:</span></pre></td></tr><tr><td class="ln">174</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">im</span><span class="whitespace"> </span><span class="instruction">1</span><span class="whitespace">						</span><span class="comment">; For MirageOS and CrASH compatibility</span></pre></td></tr><tr><td class="ln">175</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">di</span></pre></td></tr><tr><td class="ln">176</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BackupSP</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">sp</span></pre></td></tr><tr><td class="ln">177</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">res</span><span class="whitespace"> </span><span class="none">3</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">iy</span><span class="punctuation">+</span><span class="none">5</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; textinverse/textflags</span></pre></td></tr><tr><td class="ln">178</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">set</span><span class="whitespace"> </span><span class="none">7</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">iy</span><span class="punctuation">+</span><span class="none">20</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; textwrite/sgrflags</span></pre></td></tr><tr><td class="ln">179</td><td><pre class="source"><span class="label">Trunk:</span></pre></td></tr><tr><td class="ln">180</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">181</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">TableCorrection</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">182</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">MainMenu</span><span class="whitespace">				</span><span class="comment">; Entering the main menu</span></pre></td></tr><tr><td class="ln">183</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">Menu</span></pre></td></tr><tr><td class="ln">184</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="none">Trunk</span></pre></td></tr><tr><td class="ln">186</td><td><pre class="source"><span class="label">Exit:</span><span class="whitespace">						</span><span class="comment">; This is where the program should jump when the user quits</span></pre></td></tr><tr><td class="ln">187</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">CorrectChecksum</span></pre></td></tr><tr><td class="ln">188</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">sp</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BackupSP</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">189</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">res</span><span class="whitespace"> </span><span class="none">7</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">iy</span><span class="punctuation">+</span><span class="none">20</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; textwrite/sgrflags</span></pre></td></tr><tr><td class="ln">191</td><td><pre class="source"><span class="label">FastExit:</span></pre></td></tr><tr><td class="ln">193</td><td><pre class="source"><span class="directive">#ifdef</span><span class="whitespace"> </span><span class="none">TI82S</span></pre></td></tr><tr><td class="ln">195</td><td><pre class="source disabled"><span class="whitespace">  </span><span class="instruction">rst</span><span class="whitespace"> </span><span class="instruction">28h</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">196</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="directive">.word</span><span class="whitespace"> </span><span class="none">DEL_TMP</span><span class="whitespace"> 				</span><span class="comment">; Freeing memory allocated at the beginning</span></pre></td></tr><tr><td class="ln">196</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">MEMALLOC</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">197</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">LastByte</span></pre></td></tr><tr><td class="ln">198</td><td><pre class="source disabled"><span class="whitespace">  </span><span class="instruction">rst</span><span class="whitespace"> </span><span class="instruction">28h</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">199</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="directive">.word</span><span class="whitespace"> </span><span class="none">DEL_MEM</span></pre></td></tr><tr><td class="ln">199</td><td><pre class="source disabled"><span class="whitespace">  </span><span class="instruction">rst</span><span class="whitespace"> </span><span class="instruction">28h</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">200</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="directive">.word</span><span class="whitespace"> </span><span class="none">CREATE_TMP</span></pre></td></tr><tr><td class="ln">201</td><td><pre class="source"><span class="directive">#endif</span></pre></td></tr><tr><td class="ln">203</td><td><pre class="source"><span class="directive">#ifdef</span><span class="whitespace"> </span><span class="none">TI83V</span></pre></td></tr><tr><td class="ln">205</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">$475D</span><span class="whitespace">					</span><span class="comment">; _clrScrnFull (the screen needs to be cleared for Venus)</span></pre></td></tr><tr><td class="ln">206</td><td><pre class="source disabled"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">$4775</span><span class="whitespace">					</span><span class="comment">; _homeUp</span></pre></td></tr><tr><td class="ln">208</td><td><pre class="source"><span class="directive">#endif</span></pre></td></tr><tr><td class="ln">210</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ei</span></pre></td></tr><tr><td class="ln">211</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">215</td><td><pre class="source"><span class="label">DisplayHighScores:</span><span class="whitespace">			</span><span class="comment">; Display the high scores for every table</span></pre></td></tr><tr><td class="ln">216</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">VScreen</span></pre></td></tr><tr><td class="ln">217</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">ClearScreen</span></pre></td></tr><tr><td class="ln">218</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">HighScoreLabel</span></pre></td></tr><tr><td class="ln">219</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">$1206</span></pre></td></tr><tr><td class="ln">220</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">$0805</span></pre></td></tr><tr><td class="ln">221</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">SpriteBig</span></pre></td></tr><tr><td class="ln">222</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">LastByte</span><span class="punctuation">-</span><span class="none">1</span></pre></td></tr><tr><td class="ln">223</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">20</span></pre></td></tr><tr><td class="ln">224</td><td><pre class="source"><span class="label">DHS_Loop:</span><span class="whitespace">					</span><span class="comment">; Looking for tables and saving their addresses</span></pre></td></tr><tr><td class="ln">225</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">af</span></pre></td></tr><tr><td class="ln">226</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">227</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">FindTable</span></pre></td></tr><tr><td class="ln">228</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">229</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">$f0</span></pre></td></tr><tr><td class="ln">230</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">DHS_End</span></pre></td></tr><tr><td class="ln">231</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="whitespace">						</span><span class="comment">; Retrieving Y coordinate</span></pre></td></tr><tr><td class="ln">232</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">233</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">2</span></pre></td></tr><tr><td class="ln">234</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">PenColRow</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">235</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="whitespace">					</span><span class="comment">; HL points to the table</span></pre></td></tr><tr><td class="ln">236</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">6</span><span class="whitespace">					</span><span class="comment">; Offset to table title</span></pre></td></tr><tr><td class="ln">237</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">238</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">239</td><td><pre class="source"><span class="whitespace">  </span><span class="instruction">rst</span><span class="whitespace"> </span><span class="instruction">28h</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">240</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.word</span><span class="whitespace"> </span><span class="none">_vputs</span></pre></td></tr><tr><td class="ln">240</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">241</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">242</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">243</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">244</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">245</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace">					</span><span class="comment">; Displaying score</span></pre></td></tr><tr><td class="ln">246</td><td><pre class="source"><span class="label">DHS_EndName:</span></pre></td></tr><tr><td class="ln">247</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">xor</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">248</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">249</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">250</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">DHS_EndName</span></pre></td></tr><tr><td class="ln">251</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">252</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">253</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="none">50</span></pre></td></tr><tr><td class="ln">254</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">DisplayNumber</span></pre></td></tr><tr><td class="ln">255</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">256</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">af</span></pre></td></tr><tr><td class="ln">257</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">8</span><span class="whitespace">					</span><span class="comment">; Increasing Y coordinate</span></pre></td></tr><tr><td class="ln">258</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="none">DHS_Loop</span></pre></td></tr><tr><td class="ln">259</td><td><pre class="source"><span class="label">DHS_End:</span></pre></td></tr><tr><td class="ln">260</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">af</span></pre></td></tr><tr><td class="ln">261</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">20</span></pre></td></tr><tr><td class="ln">262</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">Exit</span><span class="whitespace">					</span><span class="comment">; Error if there are no tables</span></pre></td></tr><tr><td class="ln">263</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">VScreen</span></pre></td></tr><tr><td class="ln">264</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">FlipScreen</span></pre></td></tr><tr><td class="ln">265</td><td><pre class="source"><span class="label">DHS_WaitKey:</span><span class="whitespace">				</span><span class="comment">; Waiting for 2nd</span></pre></td></tr><tr><td class="ln">266</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">ReadKeyboard</span></pre></td></tr><tr><td class="ln">267</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">ValidateKeys</span></pre></td></tr><tr><td class="ln">268</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">ValidKey</span><span class="punctuation">+</span><span class="none">6</span><span class="punctuation">)</span><span class="whitespace">			</span><span class="comment">; 2nd</span></pre></td></tr><tr><td class="ln">269</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">32</span></pre></td></tr><tr><td class="ln">270</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">DHS_WaitKey</span></pre></td></tr><tr><td class="ln">271</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">275</td><td><pre class="source"><span class="label">Game:</span></pre></td></tr><tr><td class="ln">276</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">BuildTableMenu</span></pre></td></tr><tr><td class="ln">277</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">TableMenu</span></pre></td></tr><tr><td class="ln">278</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="none">Menu</span></pre></td></tr><tr><td class="ln">279</td><td><pre class="source"><span class="label">GameTableChosen:</span></pre></td></tr><tr><td class="ln">280</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">BuildData</span><span class="whitespace">				</span><span class="comment">; Calculating derived in-game data</span></pre></td></tr><tr><td class="ln">281</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">FindChosenTable</span></pre></td></tr><tr><td class="ln">282</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">LoadTable</span></pre></td></tr><tr><td class="ln">283</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">3</span></pre></td></tr><tr><td class="ln">284</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">Lives</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">285</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">286</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">Score</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">287</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">Score</span><span class="punctuation">+</span><span class="none">2</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">288</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">InitTable</span></pre></td></tr><tr><td class="ln">289</td><td><pre class="source"><span class="label">GameLoop:</span></pre></td></tr><tr><td class="ln">290</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">CheckBall</span><span class="whitespace">				</span><span class="comment">; Ball management</span></pre></td></tr><tr><td class="ln">291</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">RenderFrame</span><span class="whitespace">			</span><span class="comment">; Rendering the frame if FRAMEDELAY frames have been passed</span></pre></td></tr><tr><td class="ln">293</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">MoveBall</span><span class="whitespace">				</span><span class="comment">; Moving the ball and adjusting its speed if needed</span></pre></td></tr><tr><td class="ln">294</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">Interactions</span><span class="whitespace">			</span><span class="comment">; Handling interactive elements</span></pre></td></tr><tr><td class="ln">295</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">ReadKeyboard</span><span class="whitespace">			</span><span class="comment">; Reading keyboard mask</span></pre></td></tr><tr><td class="ln">296</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">ValidateKeys</span><span class="whitespace">			</span><span class="comment">; Registering keyboard changes</span></pre></td></tr><tr><td class="ln">297</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">FrameCount</span><span class="whitespace">			</span><span class="comment">; Advancing the frame counter</span></pre></td></tr><tr><td class="ln">298</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">299</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">ValidKey</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="whitespace">			</span><span class="comment">; Enter</span></pre></td></tr><tr><td class="ln">300</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">1</span></pre></td></tr><tr><td class="ln">301</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">Tilt</span></pre></td></tr><tr><td class="ln">302</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">ValidKey</span><span class="punctuation">+</span><span class="none">6</span><span class="punctuation">)</span><span class="whitespace">			</span><span class="comment">; 2nd</span></pre></td></tr><tr><td class="ln">303</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">bit</span><span class="whitespace"> </span><span class="none">5</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">304</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">GameEnded</span></pre></td></tr><tr><td class="ln">305</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">4</span><span class="whitespace">						</span><span class="comment">; Zoom</span></pre></td></tr><tr><td class="ln">306</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">GameLoop</span></pre></td></tr><tr><td class="ln">308</td><td><pre class="source"><span class="label">GamePaused:</span><span class="whitespace">					</span><span class="comment">; Displaying 'PAUSE' and waiting for 2nd</span></pre></td></tr><tr><td class="ln">309</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">PausedPicture</span></pre></td></tr><tr><td class="ln">310</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">VScreen</span><span class="punctuation">+</span><span class="none">351</span></pre></td></tr><tr><td class="ln">311</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="none">7</span></pre></td></tr><tr><td class="ln">312</td><td><pre class="source"><span class="label">GP_Loop:</span></pre></td></tr><tr><td class="ln">313</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">314</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">315</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">254</span></pre></td></tr><tr><td class="ln">316</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">317</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">318</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ldi</span></pre></td></tr><tr><td class="ln">319</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ldi</span></pre></td></tr><tr><td class="ln">320</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ldi</span></pre></td></tr><tr><td class="ln">321</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ldi</span></pre></td></tr><tr><td class="ln">322</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">323</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">7</span></pre></td></tr><tr><td class="ln">324</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">325</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">326</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">327</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">GP_Loop</span></pre></td></tr><tr><td class="ln">328</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">VScreen</span></pre></td></tr><tr><td class="ln">329</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">FlipScreen</span></pre></td></tr><tr><td class="ln">330</td><td><pre class="source"><span class="label">GP_Wait:</span></pre></td></tr><tr><td class="ln">331</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">ReadKeyboard</span></pre></td></tr><tr><td class="ln">332</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">ValidateKeys</span></pre></td></tr><tr><td class="ln">333</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">ValidKey</span><span class="punctuation">+</span><span class="none">6</span><span class="punctuation">)</span><span class="whitespace">			</span><span class="comment">; Zoom</span></pre></td></tr><tr><td class="ln">334</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">4</span></pre></td></tr><tr><td class="ln">335</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">GP_Wait</span></pre></td></tr><tr><td class="ln">336</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="none">GameLoop</span></pre></td></tr><tr><td class="ln">338</td><td><pre class="source"><span class="label">GameEnded:</span></pre></td></tr><tr><td class="ln">339</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">DisplayScore</span></pre></td></tr><tr><td class="ln">340</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">TableCorrection</span><span class="punctuation">)</span><span class="whitespace">	</span><span class="comment">; Looking for the current high score</span></pre></td></tr><tr><td class="ln">341</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">342</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">343</td><td><pre class="source"><span class="label">GE_EndName:</span></pre></td></tr><tr><td class="ln">344</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">xor</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">345</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">346</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">347</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">GE_EndName</span></pre></td></tr><tr><td class="ln">348</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">349</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">					</span><span class="comment">; BC: high score low word</span></pre></td></tr><tr><td class="ln">350</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">351</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">352</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">353</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">					</span><span class="comment">; DE: high score high word</span></pre></td></tr><tr><td class="ln">354</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">355</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">356</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">ix</span></pre></td></tr><tr><td class="ln">357</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">Score</span><span class="punctuation">+</span><span class="none">2</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">358</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">359</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sbc</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">360</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">GE_Finish</span></pre></td></tr><tr><td class="ln">361</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">GE_NewScore</span></pre></td></tr><tr><td class="ln">362</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">Score</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">363</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sbc</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">364</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">GE_Finish</span></pre></td></tr><tr><td class="ln">365</td><td><pre class="source"><span class="label">GE_NewScore:</span></pre></td></tr><tr><td class="ln">366</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">Score</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; Updating high score</span></pre></td></tr><tr><td class="ln">367</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">368</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">369</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">Score</span><span class="punctuation">+</span><span class="none">2</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">370</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">+</span><span class="none">2</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">371</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">+</span><span class="none">3</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">372</td><td><pre class="source"><span class="label">GE_Finish:</span></pre></td></tr><tr><td class="ln">373</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="none">CorrectChecksum</span><span class="whitespace">			</span><span class="comment">; So the table is found again</span></pre></td></tr><tr><td class="ln">375</td><td><pre class="source"><span class="label">Tilt:</span><span class="whitespace">						</span><span class="comment">; Tilting the ball if possible</span></pre></td></tr><tr><td class="ln">376</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">TiltFrames</span><span class="punctuation">)</span><span class="whitespace">			</span><span class="comment">; If it's still illegal to tilt, the ball is lost</span></pre></td></tr><tr><td class="ln">377</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">378</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">379</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">LoseBall</span></pre></td></tr><tr><td class="ln">380</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="punctuation">-</span><span class="none">8</span><span class="whitespace">					</span><span class="comment">; Random upward acceleration to the ball</span></pre></td></tr><tr><td class="ln">381</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">Score</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">382</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">383</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">384</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallVX</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">385</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">386</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">387</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">388</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">389</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BallVX</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">390</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BonusVal</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">391</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">392</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallVY</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">393</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sbc</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">394</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sbc</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">395</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sbc</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">396</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BallVY</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">397</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">TILTFACTOR</span><span class="whitespace">			</span><span class="comment">; Starting tilt frame counter</span></pre></td></tr><tr><td class="ln">398</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">TiltFrames</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">399</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">401</td><td><pre class="source"><span class="label">CheckBall:</span></pre></td></tr><tr><td class="ln">402</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">TiltFrames</span><span class="punctuation">)</span><span class="whitespace">			</span><span class="comment">; Decreasing the tilt frame count if active</span></pre></td></tr><tr><td class="ln">403</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">404</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">405</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">CB_TiltOK</span></pre></td></tr><tr><td class="ln">406</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">407</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">TiltFrames</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">408</td><td><pre class="source"><span class="label">CB_TiltOK:</span></pre></td></tr><tr><td class="ln">409</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallY</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; Checking if the ball was lost</span></pre></td></tr><tr><td class="ln">410</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">163</span></pre></td></tr><tr><td class="ln">411</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">c</span><span class="whitespace">						</span><span class="comment">; Returning if not yet</span></pre></td></tr><tr><td class="ln">412</td><td><pre class="source"><span class="label">LoseBall:</span></pre></td></tr><tr><td class="ln">413</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">Lives</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">414</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">415</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">CB_LivesRemain</span></pre></td></tr><tr><td class="ln">416</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="whitespace">						</span><span class="comment">; All the lives are lost</span></pre></td></tr><tr><td class="ln">417</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="none">GameEnded</span></pre></td></tr><tr><td class="ln">418</td><td><pre class="source"><span class="label">CB_LivesRemain:</span></pre></td></tr><tr><td class="ln">419</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">Lives</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">420</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">DisplayScore</span></pre></td></tr><tr><td class="ln">421</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">ObjSrc</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; Restoring table state</span></pre></td></tr><tr><td class="ln">422</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">ObjDst</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">423</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">ObjLen</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">424</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ldir</span></pre></td></tr><tr><td class="ln">425</td><td><pre class="source"><span class="label">InitTable:</span></pre></td></tr><tr><td class="ln">426</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">$5B00</span><span class="whitespace">				</span><span class="comment">; Initialising variables</span></pre></td></tr><tr><td class="ln">427</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BallX</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">428</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">$9600</span></pre></td></tr><tr><td class="ln">429</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BallY</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">430</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">h</span><span class="punctuation">,</span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">431</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BallVX</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">432</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BonusVal</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">433</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BonusVal</span><span class="punctuation">+</span><span class="none">2</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">434</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">LeftFlipper</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">435</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">TiltFrames</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">436</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">437</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BallVYlow</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">438</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">1</span></pre></td></tr><tr><td class="ln">439</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BonusMul</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">440</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">DrawSpring</span></pre></td></tr><tr><td class="ln">441</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">InitElements</span><span class="whitespace">			</span><span class="comment">; Rendering the initial state of interactive elements</span></pre></td></tr><tr><td class="ln">442</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">ForceRenderFrame</span></pre></td></tr><tr><td class="ln">443</td><td><pre class="source"><span class="label">IT_StartWaiting:</span><span class="whitespace">			</span><span class="comment">; Waiting for right arrow</span></pre></td></tr><tr><td class="ln">444</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">ReadKeyboard</span></pre></td></tr><tr><td class="ln">445</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">ValidateKeys</span></pre></td></tr><tr><td class="ln">446</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">KeyPressed</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">447</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">4</span></pre></td></tr><tr><td class="ln">448</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">IT_StartWaiting</span></pre></td></tr><tr><td class="ln">449</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">-</span><span class="none">5000</span><span class="whitespace">				</span><span class="comment">; Strength</span></pre></td></tr><tr><td class="ln">450</td><td><pre class="source"><span class="label">IT_WaitSpring:</span></pre></td></tr><tr><td class="ln">451</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">$1000</span></pre></td></tr><tr><td class="ln">452</td><td><pre class="source"><span class="label">IT_SpringDelay:</span></pre></td></tr><tr><td class="ln">453</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">454</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">455</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">456</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">457</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">458</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">IT_SpringDelay</span></pre></td></tr><tr><td class="ln">459</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">ix</span><span class="punctuation">,</span><span class="none">VScreen</span><span class="punctuation">+</span><span class="none">659</span><span class="whitespace">			</span><span class="comment">; Drawing back the spring</span></pre></td></tr><tr><td class="ln">460</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="none">11</span></pre></td></tr><tr><td class="ln">461</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="punctuation">-</span><span class="none">12</span></pre></td></tr><tr><td class="ln">462</td><td><pre class="source"><span class="label">IT_DrawBack:</span></pre></td></tr><tr><td class="ln">463</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">-</span><span class="none">12</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">464</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">465</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">ix</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">466</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">IT_DrawBack</span></pre></td></tr><tr><td class="ln">467</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">468</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">VScreen</span></pre></td></tr><tr><td class="ln">469</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">FlipScreen</span></pre></td></tr><tr><td class="ln">470</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">ReadKeyboard</span></pre></td></tr><tr><td class="ln">471</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">472</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="punctuation">-</span><span class="none">1000</span></pre></td></tr><tr><td class="ln">473</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">474</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">KeyPressed</span><span class="punctuation">)</span><span class="whitespace">			</span><span class="comment">; Right</span></pre></td></tr><tr><td class="ln">475</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">4</span></pre></td></tr><tr><td class="ln">476</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">IT_Release</span></pre></td></tr><tr><td class="ln">477</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">478</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">$d5</span></pre></td></tr><tr><td class="ln">479</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">IT_WaitSpring</span></pre></td></tr><tr><td class="ln">480</td><td><pre class="source"><span class="label">IT_Release:</span></pre></td></tr><tr><td class="ln">481</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BallVY</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">482</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">255</span></pre></td></tr><tr><td class="ln">483</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">FrameCount</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">484</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">486</td><td><pre class="source"><span class="label">DisplayScore:</span></pre></td></tr><tr><td class="ln">487</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">ForceRenderFrame</span><span class="whitespace">      </span><span class="comment">; Rendering the losing moment</span></pre></td></tr><tr><td class="ln">488</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">VScreen</span><span class="punctuation">+</span><span class="none">242</span><span class="whitespace">			</span><span class="comment">; Clearing the middle of the screen</span></pre></td></tr><tr><td class="ln">489</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">23</span></pre></td></tr><tr><td class="ln">490</td><td><pre class="source"><span class="label">DS_ClearLoop:</span></pre></td></tr><tr><td class="ln">491</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">492</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">9</span></pre></td></tr><tr><td class="ln">493</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">DS_NoBlack</span></pre></td></tr><tr><td class="ln">494</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">495</td><td><pre class="source"><span class="label">DS_NoBlack:</span></pre></td></tr><tr><td class="ln">496</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="none">8</span></pre></td></tr><tr><td class="ln">497</td><td><pre class="source"><span class="label">DS_ClearByte:</span></pre></td></tr><tr><td class="ln">498</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">499</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">500</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">DS_ClearByte</span></pre></td></tr><tr><td class="ln">501</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">502</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">503</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">504</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">505</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">506</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">DS_ClearLoop</span></pre></td></tr><tr><td class="ln">507</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">Score</span><span class="whitespace">				</span><span class="comment">; Displaying score</span></pre></td></tr><tr><td class="ln">508</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">$2216</span></pre></td></tr><tr><td class="ln">509</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">DisplayNumber</span></pre></td></tr><tr><td class="ln">510</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">BonusVal</span><span class="whitespace">				</span><span class="comment">; Displaying bonus</span></pre></td></tr><tr><td class="ln">511</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">$221c</span></pre></td></tr><tr><td class="ln">512</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">DisplayNumber</span></pre></td></tr><tr><td class="ln">513</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BonusMul</span><span class="punctuation">)</span><span class="whitespace">			</span><span class="comment">; Displaying multiplier</span></pre></td></tr><tr><td class="ln">514</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="punctuation">-</span><span class="none">1</span></pre></td></tr><tr><td class="ln">515</td><td><pre class="source"><span class="label">DS_CalcBonus10:</span></pre></td></tr><tr><td class="ln">516</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">517</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="none">10</span></pre></td></tr><tr><td class="ln">518</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">DS_CalcBonus10</span></pre></td></tr><tr><td class="ln">519</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">af</span></pre></td></tr><tr><td class="ln">520</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">521</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">$121c</span></pre></td></tr><tr><td class="ln">522</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">DisplayDigit</span></pre></td></tr><tr><td class="ln">523</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">af</span></pre></td></tr><tr><td class="ln">524</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">10</span></pre></td></tr><tr><td class="ln">525</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">DisplayDigit</span></pre></td></tr><tr><td class="ln">526</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">ix</span><span class="punctuation">,</span><span class="none">VScreen</span><span class="punctuation">+</span><span class="none">351</span><span class="whitespace">			</span><span class="comment">; The x operator</span></pre></td></tr><tr><td class="ln">527</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">528</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="none">5</span></pre></td></tr><tr><td class="ln">529</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">530</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">+</span><span class="none">12</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">531</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="none">2</span></pre></td></tr><tr><td class="ln">532</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">+</span><span class="none">12</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">533</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">+</span><span class="none">24</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">534</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="none">5</span></pre></td></tr><tr><td class="ln">535</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">+</span><span class="none">24</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">536</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BonusVal</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">537</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BonusVal</span><span class="punctuation">+</span><span class="none">2</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">538</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">ix</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">Score</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">539</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">Score</span><span class="punctuation">+</span><span class="none">2</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">540</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BonusMul</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">541</td><td><pre class="source"><span class="label">DS_AddBonus:</span></pre></td></tr><tr><td class="ln">542</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">ix</span><span class="punctuation">,</span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">543</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">adc</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">544</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">545</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">DS_AddBonus</span></pre></td></tr><tr><td class="ln">546</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">Score</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">ix</span></pre></td></tr><tr><td class="ln">547</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">Score</span><span class="punctuation">+</span><span class="none">2</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">548</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">Score</span><span class="whitespace">				</span><span class="comment">; Displaying new score</span></pre></td></tr><tr><td class="ln">549</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">$2224</span></pre></td></tr><tr><td class="ln">550</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">DisplayNumber</span></pre></td></tr><tr><td class="ln">551</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">VScreen</span></pre></td></tr><tr><td class="ln">552</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">FlipScreen</span></pre></td></tr><tr><td class="ln">553</td><td><pre class="source"><span class="label">DS_Wait2nd:</span></pre></td></tr><tr><td class="ln">554</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">ReadKeyboard</span></pre></td></tr><tr><td class="ln">555</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">ValidateKeys</span></pre></td></tr><tr><td class="ln">556</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">ValidKey</span><span class="punctuation">+</span><span class="none">6</span><span class="punctuation">)</span><span class="whitespace">			</span><span class="comment">; 2nd</span></pre></td></tr><tr><td class="ln">557</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">32</span></pre></td></tr><tr><td class="ln">558</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">DS_Wait2nd</span></pre></td></tr><tr><td class="ln">559</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">561</td><td><pre class="source"><span class="label">BuildTableMenu:</span><span class="whitespace">				</span><span class="comment">; Create a menu containing the table titles</span></pre></td></tr><tr><td class="ln">562</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">LastByte</span><span class="punctuation">-</span><span class="none">1</span></pre></td></tr><tr><td class="ln">563</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">TablePointers</span></pre></td></tr><tr><td class="ln">564</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">xor</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">565</td><td><pre class="source"><span class="label">BTM_Loop:</span><span class="whitespace">					</span><span class="comment">; Looking for tables and saving their addresses</span></pre></td></tr><tr><td class="ln">566</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">af</span></pre></td></tr><tr><td class="ln">567</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">568</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">569</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">FindTable</span></pre></td></tr><tr><td class="ln">570</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">571</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">572</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">$f0</span></pre></td></tr><tr><td class="ln">573</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">BTM_End</span></pre></td></tr><tr><td class="ln">574</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">575</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">576</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">577</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">578</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">579</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">580</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">af</span></pre></td></tr><tr><td class="ln">581</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">582</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="none">BTM_Loop</span></pre></td></tr><tr><td class="ln">583</td><td><pre class="source"><span class="label">BTM_End:</span></pre></td></tr><tr><td class="ln">584</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">af</span></pre></td></tr><tr><td class="ln">585</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">586</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">Exit</span><span class="whitespace">					</span><span class="comment">; Error if zero!!!!!</span></pre></td></tr><tr><td class="ln">587</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">TableMenu</span><span class="whitespace">			</span><span class="comment">; Building the jump address table</span></pre></td></tr><tr><td class="ln">588</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">589</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">590</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">591</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">GameTableChosen</span></pre></td></tr><tr><td class="ln">592</td><td><pre class="source"><span class="label">BTM_MenuAddress:</span></pre></td></tr><tr><td class="ln">593</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">594</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">595</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">596</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">597</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">BTM_MenuAddress</span></pre></td></tr><tr><td class="ln">598</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">599</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">VScreen</span><span class="whitespace">				</span><span class="comment">; Drawing the titles</span></pre></td></tr><tr><td class="ln">600</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">ClearScreen</span></pre></td></tr><tr><td class="ln">601</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">602</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">603</td><td><pre class="source"><span class="label">BTM_Titles:</span></pre></td></tr><tr><td class="ln">604</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">605</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">606</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">607</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">608</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">609</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">af</span></pre></td></tr><tr><td class="ln">610</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">611</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">TablePointers</span></pre></td></tr><tr><td class="ln">612</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">613</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">614</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">615</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">h</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">616</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">l</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">617</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="none">6</span><span class="whitespace">						</span><span class="comment">; Offset to table title</span></pre></td></tr><tr><td class="ln">618</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">619</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">af</span></pre></td></tr><tr><td class="ln">620</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">621</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">622</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span><span class="whitespace">					</span><span class="comment">; 6*counter (Y coordinate)</span></pre></td></tr><tr><td class="ln">623</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">624</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">625</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">PenColRow</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">626</td><td><pre class="source"><span class="whitespace">  </span><span class="instruction">rst</span><span class="whitespace"> </span><span class="instruction">28h</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">627</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.word</span><span class="whitespace"> </span><span class="none">_vputs</span></pre></td></tr><tr><td class="ln">627</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">628</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">BTM_Titles</span></pre></td></tr><tr><td class="ln">629</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">630</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">VScreen</span><span class="punctuation">+</span><span class="none">12</span></pre></td></tr><tr><td class="ln">631</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">632</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">12</span><span class="whitespace">					</span><span class="comment">; String width: constant 12</span></pre></td></tr><tr><td class="ln">633</td><td><pre class="source"><span class="label">BTM_CopyTitles:</span></pre></td></tr><tr><td class="ln">634</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">635</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">636</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">637</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">60</span></pre></td></tr><tr><td class="ln">638</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ldir</span></pre></td></tr><tr><td class="ln">639</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="instruction">a</span><span class="whitespace">						</span><span class="comment">; BC = 12</span></pre></td></tr><tr><td class="ln">640</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">641</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">642</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">BTM_CopyTitles</span></pre></td></tr><tr><td class="ln">643</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">645</td><td><pre class="source"><span class="label">FindChosenTable:</span></pre></td></tr><tr><td class="ln">646</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">647</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">TableCorrection</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">648</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">MenuItem</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">649</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">650</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">LastByte</span><span class="punctuation">-</span><span class="none">1</span></pre></td></tr><tr><td class="ln">651</td><td><pre class="source"><span class="label">FCT_Loop:</span></pre></td></tr><tr><td class="ln">652</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">653</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">654</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">FindTable</span></pre></td></tr><tr><td class="ln">655</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">656</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">FCT_Loop</span></pre></td></tr><tr><td class="ln">657</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">659</td><td><pre class="source"><span class="label">FindTable:</span><span class="whitespace">					</span><span class="comment">; Find a table in the memory starting from HL</span></pre></td></tr><tr><td class="ln">660</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">661</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">83</span><span class="whitespace">						</span><span class="comment">; 83, 12, 217, 154</span></pre></td></tr><tr><td class="ln">662</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">FT_Skip</span></pre></td></tr><tr><td class="ln">663</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">664</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">665</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">665</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">665</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">12</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">665</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">FT_Skip</span></pre></td></tr><tr><td class="ln">666</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">666</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">666</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">217</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">666</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">FT_Skip</span></pre></td></tr><tr><td class="ln">667</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">667</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">667</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">154</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">667</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">FT_Skip</span></pre></td></tr><tr><td class="ln">668</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">669</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">670</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">671</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">TableCorrection</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">672</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">CalculateChecksum</span></pre></td></tr><tr><td class="ln">673</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">674</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">675</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">676</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">xor</span><span class="whitespace"> </span><span class="instruction">ixl</span></pre></td></tr><tr><td class="ln">677</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">FT_Skip</span></pre></td></tr><tr><td class="ln">678</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">679</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">680</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">xor</span><span class="whitespace"> </span><span class="instruction">ixh</span></pre></td></tr><tr><td class="ln">681</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">z</span><span class="whitespace">						</span><span class="comment">; At this point HL points to the base address of the table data</span></pre></td></tr><tr><td class="ln">682</td><td><pre class="source"><span class="label">FT_Skip:</span></pre></td></tr><tr><td class="ln">683</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">684</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">685</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">$f0</span></pre></td></tr><tr><td class="ln">686</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">FindTable</span></pre></td></tr><tr><td class="ln">687</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">689</td><td><pre class="source"><span class="label">CalculateChecksum:</span><span class="whitespace">			</span><span class="comment">; Calculate checksum of block at HL (starting with size word)</span></pre></td></tr><tr><td class="ln">690</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">					</span><span class="comment">; The sum will be in IX, and HL points after the block in the end</span></pre></td></tr><tr><td class="ln">691</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">692</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">693</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">694</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">695</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">696</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">ix</span></pre></td></tr><tr><td class="ln">697</td><td><pre class="source"><span class="label">CC_Loop:</span></pre></td></tr><tr><td class="ln">698</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">699</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">700</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">ix</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">701</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">702</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">703</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">704</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">CC_Loop</span></pre></td></tr><tr><td class="ln">705</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">707</td><td><pre class="source"><span class="label">CorrectChecksum:</span><span class="whitespace">			</span><span class="comment">; Correcting the checksum of the current table</span></pre></td></tr><tr><td class="ln">708</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">TableCorrection</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">709</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">710</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">711</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">z</span><span class="whitespace">						</span><span class="comment">; Do nothing if no table was selected</span></pre></td></tr><tr><td class="ln">712</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">CalculateChecksum</span></pre></td></tr><tr><td class="ln">713</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">ix</span></pre></td></tr><tr><td class="ln">714</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">715</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">716</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">717</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">718</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">720</td><td><pre class="source"><span class="label">LoadTable:</span><span class="whitespace">					</span><span class="comment">; Load table pointed by HL</span></pre></td></tr><tr><td class="ln">721</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">722</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">$f0</span><span class="whitespace">						</span><span class="comment">; Returning to the shell if there is no valid table</span></pre></td></tr><tr><td class="ln">723</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">LT_Valid</span></pre></td></tr><tr><td class="ln">724</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="none">Exit</span></pre></td></tr><tr><td class="ln">725</td><td><pre class="source"><span class="label">LT_Valid:</span><span class="whitespace">					</span><span class="comment">; Skipping the name, the high score and the number of elements</span></pre></td></tr><tr><td class="ln">726</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">6</span></pre></td></tr><tr><td class="ln">727</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">728</td><td><pre class="source"><span class="label">LT_EndName:</span></pre></td></tr><tr><td class="ln">729</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">xor</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">730</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">731</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">732</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">LT_EndName</span></pre></td></tr><tr><td class="ln">733</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="none">4</span></pre></td></tr><tr><td class="ln">734</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span><span class="whitespace">					</span><span class="comment">; Skipping the high score</span></pre></td></tr><tr><td class="ln">735</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">736</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">ix</span><span class="whitespace">						</span><span class="comment">; IX points to the number of various elements</span></pre></td></tr><tr><td class="ln">737</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">738</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">TableFlippers</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace">		</span><span class="comment">; Flipper data</span></pre></td></tr><tr><td class="ln">739</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">740</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">741</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">742</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">743</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">TableData</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace">			</span><span class="comment">; Table image</span></pre></td></tr><tr><td class="ln">744</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">12</span><span class="punctuation">*</span><span class="none">160</span></pre></td></tr><tr><td class="ln">745</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">746</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">UncompressTable</span><span class="whitespace">		</span><span class="comment">; Decompressing slope data</span></pre></td></tr><tr><td class="ln">747</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">748</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">749</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">750</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">751</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">ObjSrc</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace">				</span><span class="comment">; Saving object block data for later retrieval</span></pre></td></tr><tr><td class="ln">752</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">ObjDst</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">753</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">ObjLen</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">754</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">de</span><span class="whitespace">					</span><span class="comment">; The first byte after the slope data</span></pre></td></tr><tr><td class="ln">755</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ldir</span><span class="whitespace">						</span><span class="comment">; Interactive objects are copied there</span></pre></td></tr><tr><td class="ln">756</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="whitespace">						</span><span class="comment">; DE: pointer table; HL: object data</span></pre></td></tr><tr><td class="ln">757</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">)</span><span class="whitespace">					</span><span class="comment">; Number of gizmos</span></pre></td></tr><tr><td class="ln">758</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">GizmoList</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">759</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">760</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">761</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">762</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">LT_GizmoOK</span></pre></td></tr><tr><td class="ln">763</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">764</td><td><pre class="source"><span class="label">LT_GizmoList:</span></pre></td></tr><tr><td class="ln">765</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">766</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">l</span><span class="whitespace">						</span><span class="comment">; Storing gizmo pointer</span></pre></td></tr><tr><td class="ln">767</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">768</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">769</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">770</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">771</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">772</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">					</span><span class="comment">; Skipping event script</span></pre></td></tr><tr><td class="ln">773</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">5</span></pre></td></tr><tr><td class="ln">774</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rra</span></pre></td></tr><tr><td class="ln">775</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">LT_SpriteOK</span></pre></td></tr><tr><td class="ln">776</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">13</span></pre></td></tr><tr><td class="ln">777</td><td><pre class="source"><span class="label">LT_SpriteOK:</span></pre></td></tr><tr><td class="ln">778</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">779</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">SkipEvents</span></pre></td></tr><tr><td class="ln">780</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">781</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">LT_GizmoList</span></pre></td></tr><tr><td class="ln">782</td><td><pre class="source"><span class="label">LT_GizmoOK:</span></pre></td></tr><tr><td class="ln">783</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; Number of timers</span></pre></td></tr><tr><td class="ln">784</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">TimerList</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">785</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">LT_TimerCounter</span></pre></td></tr><tr><td class="ln">786</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">+</span><span class="none">2</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; Number of counters</span></pre></td></tr><tr><td class="ln">787</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">CounterList</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">788</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">LT_TimerCounter</span></pre></td></tr><tr><td class="ln">789</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">+</span><span class="none">3</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; Number of bounces</span></pre></td></tr><tr><td class="ln">790</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BounceNum</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">791</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BounceList</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace">			</span><span class="comment">; Bounce objects at DE</span></pre></td></tr><tr><td class="ln">792</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">794</td><td><pre class="source"><span class="label">LT_TimerCounter:</span><span class="whitespace">			</span><span class="comment">; Building pointer table for timers and counters (data at HL)</span></pre></td></tr><tr><td class="ln">795</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span><span class="whitespace">					</span><span class="comment">; The number of objects of the given type</span></pre></td></tr><tr><td class="ln">796</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">797</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">798</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">z</span><span class="whitespace">						</span><span class="comment">; No elements of this kind</span></pre></td></tr><tr><td class="ln">799</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">800</td><td><pre class="source"><span class="label">LT_TCList:</span></pre></td></tr><tr><td class="ln">801</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">802</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">l</span><span class="whitespace">						</span><span class="comment">; Storing object pointer</span></pre></td></tr><tr><td class="ln">803</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">804</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">805</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">806</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">807</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">808</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">809</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="none">0</span><span class="whitespace">						</span><span class="comment">; Skipping event script</span></pre></td></tr><tr><td class="ln">810</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">SkipEvents</span></pre></td></tr><tr><td class="ln">811</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">812</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">LT_TCList</span></pre></td></tr><tr><td class="ln">813</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">815</td><td><pre class="source"><span class="label">SkipEvents:</span><span class="whitespace">					</span><span class="comment">; Jumping over event list at HL; B must be 0</span></pre></td></tr><tr><td class="ln">816</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">817</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">818</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">819</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">z</span></pre></td></tr><tr><td class="ln">820</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">821</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">822</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">EventLengths</span><span class="punctuation">-</span><span class="none">1</span></pre></td></tr><tr><td class="ln">823</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">824</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">825</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">826</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">827</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="none">SkipEvents</span></pre></td></tr><tr><td class="ln">829</td><td><pre class="source"><span class="label">UncompressTable:</span><span class="whitespace">			</span><span class="comment">; Uncompresses a table at HL</span></pre></td></tr><tr><td class="ln">830</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">MEMSTART</span><span class="punctuation">)</span><span class="whitespace">			</span><span class="comment">; Setting up pointers</span></pre></td></tr><tr><td class="ln">831</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">TableSlope</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">832</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">					</span><span class="comment">; Size of compressed data in BC</span></pre></td></tr><tr><td class="ln">833</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">834</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">835</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">836</td><td><pre class="source"><span class="label">UCT_Loop:</span></pre></td></tr><tr><td class="ln">837</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">838</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ldi</span></pre></td></tr><tr><td class="ln">839</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">840</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">UCT_Counter</span><span class="whitespace">			</span><span class="comment">; Jumping if A is not zero</span></pre></td></tr><tr><td class="ln">841</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">					</span><span class="comment">; Outputting (HL) nullbytes</span></pre></td></tr><tr><td class="ln">842</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">843</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">844</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">845</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">UCT_Counter</span></pre></td></tr><tr><td class="ln">846</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">847</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">848</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">xor</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">849</td><td><pre class="source"><span class="label">UCT_PutZeros:</span></pre></td></tr><tr><td class="ln">850</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">851</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">852</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">UCT_PutZeros</span></pre></td></tr><tr><td class="ln">853</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">854</td><td><pre class="source"><span class="label">UCT_Counter:</span></pre></td></tr><tr><td class="ln">855</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">856</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">857</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">UCT_Loop</span></pre></td></tr><tr><td class="ln">858</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">859</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">MEMSTART</span><span class="punctuation">)</span><span class="whitespace">			</span><span class="comment">; Correcting address</span></pre></td></tr><tr><td class="ln">860</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">3840</span></pre></td></tr><tr><td class="ln">861</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">862</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">863</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">864</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">866</td><td><pre class="source"><span class="label">BuildData:</span><span class="whitespace">					</span><span class="comment">; Calculating in-game data</span></pre></td></tr><tr><td class="ln">867</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">Sin_Table_Source</span><span class="whitespace">		</span><span class="comment">; Building the sine table</span></pre></td></tr><tr><td class="ln">868</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">Sin_Table</span></pre></td></tr><tr><td class="ln">869</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">ix</span><span class="punctuation">,</span><span class="none">Sin_Table</span><span class="punctuation">+</span><span class="none">128</span></pre></td></tr><tr><td class="ln">870</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="none">64</span></pre></td></tr><tr><td class="ln">871</td><td><pre class="source"><span class="label">BD_SinLoop:</span></pre></td></tr><tr><td class="ln">872</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">873</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">874</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">875</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">876</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">877</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">ix</span></pre></td></tr><tr><td class="ln">878</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">BD_SinLoop</span></pre></td></tr><tr><td class="ln">879</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">880</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">Sin_Table</span></pre></td></tr><tr><td class="ln">881</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">Sin_Table</span><span class="punctuation">+</span><span class="none">128</span></pre></td></tr><tr><td class="ln">882</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="none">128</span></pre></td></tr><tr><td class="ln">883</td><td><pre class="source"><span class="label">BD_SinNeg:</span></pre></td></tr><tr><td class="ln">884</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">885</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">886</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">neg</span></pre></td></tr><tr><td class="ln">887</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">888</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">889</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">BD_SinNeg</span></pre></td></tr><tr><td class="ln">890</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">LeftFlipperSprites</span><span class="whitespace">	</span><span class="comment">; Calculating the sprites of the rightward flippers</span></pre></td></tr><tr><td class="ln">891</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">RightFlipperSprites</span></pre></td></tr><tr><td class="ln">892</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="none">40</span></pre></td></tr><tr><td class="ln">893</td><td><pre class="source"><span class="label">BD_RFLoop:</span></pre></td></tr><tr><td class="ln">894</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">895</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">896</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">897</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">898</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">899</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">900</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">901</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="none">8</span></pre></td></tr><tr><td class="ln">902</td><td><pre class="source"><span class="label">BD_RFBits:</span></pre></td></tr><tr><td class="ln">903</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rra</span></pre></td></tr><tr><td class="ln">904</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rl</span><span class="whitespace"> </span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">905</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rr</span><span class="whitespace"> </span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">906</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rl</span><span class="whitespace"> </span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">907</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">BD_RFBits</span></pre></td></tr><tr><td class="ln">908</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">909</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">910</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">911</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">912</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">913</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">914</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">BD_RFLoop</span></pre></td></tr><tr><td class="ln">915</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">917</td><td><pre class="source"><span class="directive">#include</span><span class="whitespace"> </span><span class="string">"interact.inc"</span><span class="whitespace">		</span><span class="comment">; Interactive elements, event handling</span></pre></td></tr><tr><td class="ln">1</td><td><pre class="source"><span class="label">Interactions:</span><span class="whitespace">			</span><span class="comment">; Inducing gizmo event scripts upon collision</span></pre></td></tr><tr><td class="ln">2</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallX</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="whitespace">			</span><span class="comment">; Fetching the ball's coordinates</span></pre></td></tr><tr><td class="ln">3</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">ixh</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">4</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallY</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">5</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">ixl</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">6</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">GizmoList</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">7</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">8</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">9</td><td><pre class="source"><span class="label">IA_Loop:</span></pre></td></tr><tr><td class="ln">10</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">11</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; Pointer to the next gizmo</span></pre></td></tr><tr><td class="ln">12</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">13</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">14</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">15</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">16</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; Gizmo flags</span></pre></td></tr><tr><td class="ln">17</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">18</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">4</span></pre></td></tr><tr><td class="ln">19</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">IA_Skip</span><span class="whitespace">			</span><span class="comment">; The element is inactive</span></pre></td></tr><tr><td class="ln">20</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">21</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">22</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="none">3</span></pre></td></tr><tr><td class="ln">23</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="instruction">ixh</span></pre></td></tr><tr><td class="ln">24</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">p</span><span class="punctuation">,</span><span class="none">IA_Skip</span><span class="whitespace">			</span><span class="comment">; Ball is far in the left</span></pre></td></tr><tr><td class="ln">25</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">26</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">27</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="none">3</span></pre></td></tr><tr><td class="ln">28</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="instruction">ixl</span></pre></td></tr><tr><td class="ln">29</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">p</span><span class="punctuation">,</span><span class="none">IA_Skip</span><span class="whitespace">			</span><span class="comment">; Ball is far above</span></pre></td></tr><tr><td class="ln">30</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">31</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">32</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">2</span></pre></td></tr><tr><td class="ln">33</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="instruction">ixh</span></pre></td></tr><tr><td class="ln">34</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">IA_Skip</span><span class="whitespace">			</span><span class="comment">; Ball is far in the right</span></pre></td></tr><tr><td class="ln">35</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">36</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">37</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">2</span></pre></td></tr><tr><td class="ln">38</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="instruction">ixl</span></pre></td></tr><tr><td class="ln">39</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">IA_Skip</span><span class="whitespace">			</span><span class="comment">; Ball is far below</span></pre></td></tr><tr><td class="ln">40</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">1</span></pre></td></tr><tr><td class="ln">41</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rr</span><span class="whitespace"> </span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">42</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">IA_NoSprite</span></pre></td></tr><tr><td class="ln">43</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">l</span><span class="punctuation">,</span><span class="none">9</span></pre></td></tr><tr><td class="ln">44</td><td><pre class="source"><span class="label">IA_NoSprite:</span></pre></td></tr><tr><td class="ln">45</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span><span class="whitespace">				</span><span class="comment">; HL now holds the address to the event script</span></pre></td></tr><tr><td class="ln">46</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">EventHandler</span></pre></td></tr><tr><td class="ln">47</td><td><pre class="source"><span class="label">IA_Skip:</span></pre></td></tr><tr><td class="ln">48</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">49</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">50</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">IA_Loop</span></pre></td></tr><tr><td class="ln">51</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">53</td><td><pre class="source"><span class="label">InitElements:</span><span class="whitespace">			</span><span class="comment">; Drawing the elements onto the table</span></pre></td></tr><tr><td class="ln">54</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">TableData</span><span class="punctuation">)</span><span class="whitespace">		</span><span class="comment">; Sprite address hack</span></pre></td></tr><tr><td class="ln">55</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">Sprite_Address</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">56</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">GizmoList</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">57</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; Number of elements of a given type</span></pre></td></tr><tr><td class="ln">58</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">59</td><td><pre class="source"><span class="label">IE_Elements:</span></pre></td></tr><tr><td class="ln">60</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">61</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; The pointer to the current element</span></pre></td></tr><tr><td class="ln">62</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">63</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">64</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">65</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">66</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">67</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rra</span></pre></td></tr><tr><td class="ln">68</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">IE_Skip</span><span class="whitespace">			</span><span class="comment">; There is no sprite data for this element</span></pre></td></tr><tr><td class="ln">69</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rra</span></pre></td></tr><tr><td class="ln">70</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">WhiteSprite</span></pre></td></tr><tr><td class="ln">71</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">IE_Colour</span><span class="whitespace">		</span><span class="comment">; The element is currently not visible</span></pre></td></tr><tr><td class="ln">72</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">Sprite</span></pre></td></tr><tr><td class="ln">73</td><td><pre class="source"><span class="label">IE_Colour:</span></pre></td></tr><tr><td class="ln">74</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">IE_Hack</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">75</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span><span class="whitespace">					</span><span class="comment">; Drawing the sprite</span></pre></td></tr><tr><td class="ln">76</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">77</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">78</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">h</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">79</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">80</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">81</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">82</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">83</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">l</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">84</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">85</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">86</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">87</td><td><pre class="source"><span class="none">IE_Hack</span><span class="whitespace"> </span><span class="punctuation">=</span><span class="whitespace"> </span><span class="none">$</span><span class="punctuation">+</span><span class="none">1</span></pre></td></tr><tr><td class="ln">88</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">Sprite</span></pre></td></tr><tr><td class="ln">89</td><td><pre class="source"><span class="label">IE_Skip:</span></pre></td></tr><tr><td class="ln">90</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">91</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">92</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">IE_Elements</span></pre></td></tr><tr><td class="ln">93</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">VScreen</span></pre></td></tr><tr><td class="ln">94</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">Sprite_Address</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">95</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">97</td><td><pre class="source"><span class="label">DrawGizmo:</span><span class="whitespace">				</span><span class="comment">; Explicitely drawing a gizmo specified in E</span></pre></td></tr><tr><td class="ln">98</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">TableData</span><span class="punctuation">)</span><span class="whitespace">		</span><span class="comment">; Sprite address hack</span></pre></td></tr><tr><td class="ln">99</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">Sprite_Address</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">100</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">101</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">GizmoList</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">102</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">103</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">104</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">105</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">106</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">107</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">108</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">109</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rra</span></pre></td></tr><tr><td class="ln">110</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">DG_Exit</span><span class="whitespace">			</span><span class="comment">; There is no sprite data for this element</span></pre></td></tr><tr><td class="ln">111</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">Sprite</span></pre></td></tr><tr><td class="ln">112</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rra</span></pre></td></tr><tr><td class="ln">113</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">DG_Visible</span><span class="whitespace">		</span><span class="comment">; The element is currently visible (black)</span></pre></td></tr><tr><td class="ln">114</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">WhiteSprite</span></pre></td></tr><tr><td class="ln">115</td><td><pre class="source"><span class="label">DG_Visible:</span></pre></td></tr><tr><td class="ln">116</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">DG_Address</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">117</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span><span class="whitespace">					</span><span class="comment">; Drawing the sprite</span></pre></td></tr><tr><td class="ln">118</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">119</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">120</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">h</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">121</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">122</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">123</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">124</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">125</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">l</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">126</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">127</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">128</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">129</td><td><pre class="source"><span class="label">DG_Address:</span></pre></td></tr><tr><td class="ln">130</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">Sprite</span></pre></td></tr><tr><td class="ln">131</td><td><pre class="source"><span class="label">DG_Exit:</span></pre></td></tr><tr><td class="ln">132</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">VScreen</span></pre></td></tr><tr><td class="ln">133</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">Sprite_Address</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">134</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">136</td><td><pre class="source"><span class="label">HandleTimers:</span><span class="whitespace">			</span><span class="comment">; Taking care of the timers (automatic counters)</span></pre></td></tr><tr><td class="ln">137</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">TimerList</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">138</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; Exit if no timers on the table (unlikely though)</span></pre></td></tr><tr><td class="ln">139</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">140</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">z</span></pre></td></tr><tr><td class="ln">141</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">142</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">143</td><td><pre class="source"><span class="label">HT_Loop:</span></pre></td></tr><tr><td class="ln">144</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">145</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; Selecting a timer</span></pre></td></tr><tr><td class="ln">146</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">147</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">148</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">149</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">150</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">151</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">152</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">HT_Skip</span><span class="whitespace">			</span><span class="comment">; The timer is inactive</span></pre></td></tr><tr><td class="ln">153</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span><span class="whitespace">					</span><span class="comment">; Decreasing timer</span></pre></td></tr><tr><td class="ln">154</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">155</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">156</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">HT_Skip</span><span class="whitespace">			</span><span class="comment">; Nothing to do yet</span></pre></td></tr><tr><td class="ln">157</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">158</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">159</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">EventHandler</span><span class="whitespace">		</span><span class="comment">; Handling the events</span></pre></td></tr><tr><td class="ln">160</td><td><pre class="source"><span class="label">HT_Skip:</span></pre></td></tr><tr><td class="ln">161</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">162</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">163</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">HT_Loop</span></pre></td></tr><tr><td class="ln">164</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">166</td><td><pre class="source"><span class="label">EventHandler:</span><span class="whitespace">			</span><span class="comment">; Runs the event script at HL</span></pre></td></tr><tr><td class="ln">167</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">168</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">169</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">z</span><span class="whitespace">					</span><span class="comment">; Event script ended</span></pre></td></tr><tr><td class="ln">170</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">171</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span><span class="whitespace">					</span><span class="comment">; There are so few events that a jump table is unnecessary</span></pre></td></tr><tr><td class="ln">172</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">Event_Score</span><span class="whitespace">		</span><span class="comment">; Score S B</span></pre></td></tr><tr><td class="ln">173</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">174</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">Event_Bonus</span><span class="whitespace">		</span><span class="comment">; Bonus</span></pre></td></tr><tr><td class="ln">175</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">176</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">Event_SetFlags</span><span class="whitespace">	</span><span class="comment">; SetFlags Gizmo Flags</span></pre></td></tr><tr><td class="ln">177</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">178</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">Event_ResetFlags</span><span class="whitespace">	</span><span class="comment">; ResetFlags Gizmo Flags</span></pre></td></tr><tr><td class="ln">179</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">180</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">Event_Activate</span><span class="whitespace">	</span><span class="comment">; Activate Gizmo</span></pre></td></tr><tr><td class="ln">181</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">182</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">Event_Hide</span><span class="whitespace">		</span><span class="comment">; Hide Gizmo</span></pre></td></tr><tr><td class="ln">183</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">184</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">Event_SetCounter</span><span class="whitespace">	</span><span class="comment">; SetCounter Counter N</span></pre></td></tr><tr><td class="ln">185</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">186</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">Event_Decrease</span><span class="whitespace">	</span><span class="comment">; Decrease Counter</span></pre></td></tr><tr><td class="ln">187</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">188</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">Event_SetTimer</span><span class="whitespace">	</span><span class="comment">; SetTimer Timer N</span></pre></td></tr><tr><td class="ln">192</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="none">Exit</span><span class="whitespace">				</span><span class="comment">; Returning to the OS</span></pre></td></tr><tr><td class="ln">194</td><td><pre class="source"><span class="label">Event_Score:</span></pre></td></tr><tr><td class="ln">195</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; BC: score increase</span></pre></td></tr><tr><td class="ln">196</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">197</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">198</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">199</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; DE: bonus increase</span></pre></td></tr><tr><td class="ln">200</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">201</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">202</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">203</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">204</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">Score</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">205</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">206</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">Score</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">207</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">E_S_OK1</span></pre></td></tr><tr><td class="ln">208</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">Score</span><span class="punctuation">+</span><span class="none">2</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">209</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">210</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">Score</span><span class="punctuation">+</span><span class="none">2</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">211</td><td><pre class="source"><span class="label">E_S_OK1:</span></pre></td></tr><tr><td class="ln">212</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BonusVal</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">213</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">214</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BonusVal</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">215</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">E_S_OK2</span></pre></td></tr><tr><td class="ln">216</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BonusVal</span><span class="punctuation">+</span><span class="none">2</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">217</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">218</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BonusVal</span><span class="punctuation">+</span><span class="none">2</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">219</td><td><pre class="source"><span class="label">E_S_OK2:</span></pre></td></tr><tr><td class="ln">220</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">221</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="none">EventHandler</span></pre></td></tr><tr><td class="ln">223</td><td><pre class="source"><span class="label">Event_Bonus:</span></pre></td></tr><tr><td class="ln">224</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BonusMul</span><span class="punctuation">)</span><span class="whitespace">		</span><span class="comment">; Increasing the bonus multiplier</span></pre></td></tr><tr><td class="ln">225</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">226</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">100</span></pre></td></tr><tr><td class="ln">227</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">EventHandler</span><span class="whitespace">		</span><span class="comment">; The maximum is 99</span></pre></td></tr><tr><td class="ln">228</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BonusMul</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">229</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="none">EventHandler</span></pre></td></tr><tr><td class="ln">231</td><td><pre class="source"><span class="label">Event_SetFlags:</span><span class="whitespace">			</span><span class="comment">; SetFlags Gizmo Flags</span></pre></td></tr><tr><td class="ln">232</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">233</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">234</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">235</td><td><pre class="source"><span class="label">EvtSF:</span></pre></td></tr><tr><td class="ln">236</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">$b1</span><span class="whitespace">				</span><span class="comment">; OR C</span></pre></td></tr><tr><td class="ln">237</td><td><pre class="source"><span class="label">EvtSF_Cont:</span></pre></td></tr><tr><td class="ln">238</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">239</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">EvtSF_Op</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">240</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">241</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">242</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">GizmoList</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">243</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">244</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">245</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">246</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">247</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">248</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">h</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">249</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">l</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">250</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">251</td><td><pre class="source"><span class="label">EvtSF_Op:</span></pre></td></tr><tr><td class="ln">252</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">nop</span><span class="whitespace">					</span><span class="comment">; OR C for SetFlags, AND C for ResetFlags</span></pre></td></tr><tr><td class="ln">253</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">254</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">DrawGizmo</span><span class="whitespace">			</span><span class="comment">; Updating the table</span></pre></td></tr><tr><td class="ln">255</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">256</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="none">EventHandler</span></pre></td></tr><tr><td class="ln">258</td><td><pre class="source"><span class="label">Event_ResetFlags:</span><span class="whitespace">		</span><span class="comment">; ResetFlags Gizmo Flags</span></pre></td></tr><tr><td class="ln">259</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">260</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">261</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">262</td><td><pre class="source"><span class="label">EvtRF:</span></pre></td></tr><tr><td class="ln">263</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">$a1</span><span class="whitespace">				</span><span class="comment">; AND C</span></pre></td></tr><tr><td class="ln">264</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="none">EvtSF_Cont</span></pre></td></tr><tr><td class="ln">266</td><td><pre class="source"><span class="label">Event_Activate:</span><span class="whitespace">			</span><span class="comment">; Activate Gizmo = SetFlags Gizmo 6</span></pre></td></tr><tr><td class="ln">267</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">268</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">6</span></pre></td></tr><tr><td class="ln">269</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="none">EvtSF</span></pre></td></tr><tr><td class="ln">271</td><td><pre class="source"><span class="label">Event_Hide:</span><span class="whitespace">				</span><span class="comment">; Hide Gizmo = ResetFlags Gizmo 249</span></pre></td></tr><tr><td class="ln">272</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">273</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">249</span></pre></td></tr><tr><td class="ln">274</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="none">EvtRF</span></pre></td></tr><tr><td class="ln">276</td><td><pre class="source"><span class="label">Event_SetCounter:</span><span class="whitespace">		</span><span class="comment">; SetCounter Counter N</span></pre></td></tr><tr><td class="ln">277</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">ix</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">CounterList</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">278</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">ix</span></pre></td></tr><tr><td class="ln">279</td><td><pre class="source"><span class="label">EvtSC:</span></pre></td></tr><tr><td class="ln">280</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; Counter/Timer ID</span></pre></td></tr><tr><td class="ln">281</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">282</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; New value</span></pre></td></tr><tr><td class="ln">283</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">284</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">285</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">286</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">ix</span></pre></td></tr><tr><td class="ln">287</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">288</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">289</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">290</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">291</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">292</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">h</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">293</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">l</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">294</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">295</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">296</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="none">EventHandler</span></pre></td></tr><tr><td class="ln">298</td><td><pre class="source"><span class="label">Event_Decrease:</span><span class="whitespace">			</span><span class="comment">; Decrease Counter</span></pre></td></tr><tr><td class="ln">299</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">300</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">301</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">302</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">303</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">CounterList</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">304</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">305</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">306</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">307</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">308</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">309</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">h</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">310</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">l</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">311</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">312</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">EvtDec_OK</span><span class="whitespace">		</span><span class="comment">; Nothing to do yet</span></pre></td></tr><tr><td class="ln">313</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">314</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">EventHandler</span><span class="whitespace">		</span><span class="comment">; Running the event script of the counter</span></pre></td></tr><tr><td class="ln">315</td><td><pre class="source"><span class="label">EvtDec_OK:</span></pre></td></tr><tr><td class="ln">316</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">317</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="none">EventHandler</span></pre></td></tr><tr><td class="ln">319</td><td><pre class="source"><span class="label">Event_SetTimer:</span><span class="whitespace">			</span><span class="comment">; SetTimer Timer N</span></pre></td></tr><tr><td class="ln">320</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">ix</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">TimerList</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">321</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">ix</span></pre></td></tr><tr><td class="ln">322</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="none">EvtSC</span></pre></td></tr><tr><td class="ln">324</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="string">"Interaction engine: "</span></pre></td></tr><tr><td class="ln">325</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="none">$</span><span class="punctuation">-</span><span class="none">Interactions</span></pre></td></tr><tr><td class="ln">326</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="string">"\n"</span></pre></td></tr><tr><td class="ln">918</td><td><pre class="source"><span class="directive">#include</span><span class="whitespace"> </span><span class="string">"render.inc"</span><span class="whitespace">		</span><span class="comment">; Rendering routines</span></pre></td></tr><tr><td class="ln">1</td><td><pre class="source"><span class="label">RenderFrame:</span><span class="whitespace">				</span><span class="comment">; Rendering and displaying one frame</span></pre></td></tr><tr><td class="ln">2</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">FrameCount</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">3</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">FRAMEDELAY</span></pre></td></tr><tr><td class="ln">4</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">c</span><span class="whitespace">						</span><span class="comment">; Rendering after FRAMEDELAY interrupts</span></pre></td></tr><tr><td class="ln">5</td><td><pre class="source"><span class="label">ForceRenderFrame:</span></pre></td></tr><tr><td class="ln">6</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">xor</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">7</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">FrameCount</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">8</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">a</span><span class="whitespace">						</span><span class="comment">; Resetting the push state of the flippers</span></pre></td></tr><tr><td class="ln">9</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">LeftPushed</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">10</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">RightPushed</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">11</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">MoveLeftFlippers</span><span class="whitespace">		</span><span class="comment">; Taking care of the flippers</span></pre></td></tr><tr><td class="ln">12</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">MoveRightFlippers</span></pre></td></tr><tr><td class="ln">13</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">DrawFlippers</span></pre></td></tr><tr><td class="ln">14</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallY</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; Converting ball Y coordinate to table Y offset</span></pre></td></tr><tr><td class="ln">15</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="none">0</span><span class="whitespace">						</span><span class="comment">; 0..160 -&gt; -12..108, which is stripped to 0..96</span></pre></td></tr><tr><td class="ln">16</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">17</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">h</span><span class="punctuation">,</span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">18</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">l</span><span class="punctuation">,</span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">19</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">20</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">21</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">srl</span><span class="whitespace"> </span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">22</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rr</span><span class="whitespace"> </span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">23</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">srl</span><span class="whitespace"> </span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">24</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rr</span><span class="whitespace"> </span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">25</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">l</span><span class="whitespace">						</span><span class="comment">; This is the unbounded Y offset</span></pre></td></tr><tr><td class="ln">26</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="none">8</span></pre></td></tr><tr><td class="ln">27</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">RF_NotNeg</span></pre></td></tr><tr><td class="ln">28</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">xor</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">29</td><td><pre class="source"><span class="label">RF_NotNeg:</span></pre></td></tr><tr><td class="ln">30</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">103</span></pre></td></tr><tr><td class="ln">31</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">RF_NotBig</span></pre></td></tr><tr><td class="ln">32</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">103</span></pre></td></tr><tr><td class="ln">33</td><td><pre class="source"><span class="label">RF_NotBig:</span></pre></td></tr><tr><td class="ln">34</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">h</span><span class="punctuation">,</span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">35</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">l</span><span class="punctuation">,</span><span class="instruction">a</span><span class="whitespace">						</span><span class="comment">; Bounded Y offset</span></pre></td></tr><tr><td class="ln">36</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">37</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">38</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">39</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">TableData</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">40</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">41</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">42</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">43</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">VScreen</span></pre></td></tr><tr><td class="ln">44</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">684</span></pre></td></tr><tr><td class="ln">45</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ldir</span></pre></td></tr><tr><td class="ln">46</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">l</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">47</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallY</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; Calculating the screen Y coordinate of the ball</span></pre></td></tr><tr><td class="ln">48</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">49</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="none">2</span></pre></td></tr><tr><td class="ln">50</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">60</span></pre></td></tr><tr><td class="ln">51</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">RF_Flip</span></pre></td></tr><tr><td class="ln">52</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">l</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">53</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallX</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">54</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="none">2</span></pre></td></tr><tr><td class="ln">55</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">Ball</span></pre></td></tr><tr><td class="ln">56</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">h</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">57</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">58</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">Sprite</span></pre></td></tr><tr><td class="ln">59</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">60</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">61</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">BallWhite</span></pre></td></tr><tr><td class="ln">62</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">WhiteSprite</span></pre></td></tr><tr><td class="ln">63</td><td><pre class="source"><span class="label">RF_Flip:</span></pre></td></tr><tr><td class="ln">64</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">HandleTimers</span><span class="whitespace">			</span><span class="comment">; Decreasing the event timers and executing their events</span></pre></td></tr><tr><td class="ln">65</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">VScreen</span><span class="punctuation">+</span><span class="none">684</span></pre></td></tr><tr><td class="ln">66</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">VScreen</span><span class="punctuation">+</span><span class="none">685</span></pre></td></tr><tr><td class="ln">67</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">83</span></pre></td></tr><tr><td class="ln">68</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">69</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ldir</span></pre></td></tr><tr><td class="ln">70</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">Score</span><span class="whitespace">				</span><span class="comment">; Displaying score</span></pre></td></tr><tr><td class="ln">71</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">$1B3A</span></pre></td></tr><tr><td class="ln">72</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">DisplayNumber</span></pre></td></tr><tr><td class="ln">73</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">VScreen</span></pre></td></tr><tr><td class="ln">74</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="none">FlipScreen</span></pre></td></tr><tr><td class="ln">76</td><td><pre class="source"><span class="label">MoveLeftFlippers:</span></pre></td></tr><tr><td class="ln">77</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">KeyPressed</span><span class="punctuation">+</span><span class="none">6</span><span class="punctuation">)</span><span class="whitespace">		</span><span class="comment">; Left flipper: Y= key</span></pre></td></tr><tr><td class="ln">78</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">16</span></pre></td></tr><tr><td class="ln">79</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">LeftPushed</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span><span class="whitespace">			</span><span class="comment">; Saving push state</span></pre></td></tr><tr><td class="ln">80</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">LeftFlipper</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">81</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">MLF_Released</span></pre></td></tr><tr><td class="ln">82</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">4</span><span class="whitespace">						</span><span class="comment">; Raising flipper</span></pre></td></tr><tr><td class="ln">83</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">nc</span></pre></td></tr><tr><td class="ln">84</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">85</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="none">MLF_Exit</span><span class="whitespace">				</span><span class="comment">; Saving two bytes...</span></pre></td></tr><tr><td class="ln">86</td><td><pre class="source"><span class="label">MLF_Released:</span></pre></td></tr><tr><td class="ln">87</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">a</span><span class="whitespace">						</span><span class="comment">; Lowering flipper</span></pre></td></tr><tr><td class="ln">88</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">z</span></pre></td></tr><tr><td class="ln">89</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">90</td><td><pre class="source"><span class="label">MLF_Exit:</span></pre></td></tr><tr><td class="ln">91</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">LeftFlipper</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">92</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">94</td><td><pre class="source"><span class="label">MoveRightFlippers:</span></pre></td></tr><tr><td class="ln">95</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">KeyPressed</span><span class="punctuation">+</span><span class="none">6</span><span class="punctuation">)</span><span class="whitespace">		</span><span class="comment">; Right flipper: Graph key</span></pre></td></tr><tr><td class="ln">96</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">1</span></pre></td></tr><tr><td class="ln">97</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">RightPushed</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span><span class="whitespace">			</span><span class="comment">; Saving push state</span></pre></td></tr><tr><td class="ln">98</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">RightFlipper</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">99</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">MRF_Released</span></pre></td></tr><tr><td class="ln">100</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">4</span><span class="whitespace">						</span><span class="comment">; Raising flipper</span></pre></td></tr><tr><td class="ln">101</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">nc</span></pre></td></tr><tr><td class="ln">102</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">103</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="none">MRF_Exit</span><span class="whitespace">				</span><span class="comment">; Saving two bytes...</span></pre></td></tr><tr><td class="ln">104</td><td><pre class="source"><span class="label">MRF_Released:</span></pre></td></tr><tr><td class="ln">105</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">a</span><span class="whitespace">						</span><span class="comment">; Lowering flipper</span></pre></td></tr><tr><td class="ln">106</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">z</span></pre></td></tr><tr><td class="ln">107</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">108</td><td><pre class="source"><span class="label">MRF_Exit:</span></pre></td></tr><tr><td class="ln">109</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">RightFlipper</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">110</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">112</td><td><pre class="source"><span class="label">DrawFlippers:</span><span class="whitespace">				</span><span class="comment">; Draws the flippers right into TableData (collision mask)</span></pre></td></tr><tr><td class="ln">113</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">TableFlippers</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">114</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">115</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">116</td><td><pre class="source"><span class="label">DFs_Loop:</span></pre></td></tr><tr><td class="ln">117</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">118</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">					</span><span class="comment">; X coordinate + flipper direction</span></pre></td></tr><tr><td class="ln">119</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">120</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">					</span><span class="comment">; Y coordinate</span></pre></td></tr><tr><td class="ln">121</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">122</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">123</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">124</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">DrawFlipper</span><span class="whitespace">			</span><span class="comment">; Draws a flipper arm (used for masking as well)</span></pre></td></tr><tr><td class="ln">125</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">126</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">UpdateAngles</span><span class="whitespace">			</span><span class="comment">; Fills the slope table corresponding to the flipper</span></pre></td></tr><tr><td class="ln">127</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">128</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">129</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">DFs_Loop</span></pre></td></tr><tr><td class="ln">130</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">132</td><td><pre class="source"><span class="label">DrawFlipper:</span><span class="whitespace">				</span><span class="comment">; Draws a flipper at B, C into TableData</span></pre></td></tr><tr><td class="ln">133</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span><span class="whitespace">						</span><span class="comment">; The direction of the flipper is in the upper bit of B</span></pre></td></tr><tr><td class="ln">134</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">135</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">DF_ChooseLeft</span></pre></td></tr><tr><td class="ln">136</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">RightFlipper</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">137</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">RightFlipperSprites</span></pre></td></tr><tr><td class="ln">138</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="none">DF_Chosen</span></pre></td></tr><tr><td class="ln">139</td><td><pre class="source"><span class="label">DF_ChooseLeft:</span></pre></td></tr><tr><td class="ln">140</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">LeftFlipper</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">141</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">LeftFlipperSprites</span></pre></td></tr><tr><td class="ln">142</td><td><pre class="source"><span class="label">DF_Chosen:</span></pre></td></tr><tr><td class="ln">143</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">144</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">145</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">146</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">147</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">148</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">149</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">150</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="whitespace">					</span><span class="comment">; Flipper sprite address in the stack</span></pre></td></tr><tr><td class="ln">151</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">l</span><span class="punctuation">,</span><span class="instruction">c</span><span class="whitespace">						</span><span class="comment">; Calculating the target address</span></pre></td></tr><tr><td class="ln">152</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">h</span><span class="punctuation">,</span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">153</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">154</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">155</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">156</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">TableData</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">157</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">158</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">159</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">160</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">161</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">$7f</span></pre></td></tr><tr><td class="ln">162</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">srl</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">163</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">srl</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">164</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">srl</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">165</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">166</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">167</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span><span class="whitespace">					</span><span class="comment">; HL contains the correct table byte</span></pre></td></tr><tr><td class="ln">168</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">169</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span><span class="whitespace">						</span><span class="comment">; Deciding if the sprite is aligned or not</span></pre></td></tr><tr><td class="ln">170</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">7</span></pre></td></tr><tr><td class="ln">171</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">DF_UnAligned</span></pre></td></tr><tr><td class="ln">172</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">173</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">$0802</span></pre></td></tr><tr><td class="ln">174</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="none">AlignSprite</span><span class="whitespace">				</span><span class="comment">; Using another routine for the aligned version</span></pre></td></tr><tr><td class="ln">175</td><td><pre class="source"><span class="label">DF_UnAligned:</span></pre></td></tr><tr><td class="ln">176</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">DF_Loop</span><span class="punctuation">-</span><span class="none">2</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span><span class="whitespace">			</span><span class="comment">; Hacking the loop counter</span></pre></td></tr><tr><td class="ln">177</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">%10000000</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">177</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">177</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">DF_MaskOK</span></pre></td></tr><tr><td class="ln">178</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">%11000000</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">178</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">178</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">DF_MaskOK</span></pre></td></tr><tr><td class="ln">179</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">%11100000</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">179</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">179</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">DF_MaskOK</span></pre></td></tr><tr><td class="ln">180</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">%11110000</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">180</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">180</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">DF_MaskOK</span></pre></td></tr><tr><td class="ln">181</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">%11111000</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">181</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">181</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">DF_MaskOK</span></pre></td></tr><tr><td class="ln">182</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">%11111100</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">182</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">182</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">DF_MaskOK</span></pre></td></tr><tr><td class="ln">183</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">%11111110</span></pre></td></tr><tr><td class="ln">184</td><td><pre class="source"><span class="label">DF_MaskOK:</span></pre></td></tr><tr><td class="ln">185</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">c</span><span class="whitespace">						</span><span class="comment">; Hacking the mask into the inner loop</span></pre></td></tr><tr><td class="ln">186</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">DF_Mask1</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">187</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cpl</span></pre></td></tr><tr><td class="ln">188</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">DF_Mask2</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">189</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="none">8</span></pre></td></tr><tr><td class="ln">190</td><td><pre class="source"><span class="label">DF_Line:</span></pre></td></tr><tr><td class="ln">191</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">192</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">193</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">194</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">195</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">196</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">197</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">198</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">199</td><td><pre class="source"><span class="label">DF_Loop:</span></pre></td></tr><tr><td class="ln">200</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">srl</span><span class="whitespace"> </span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">201</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rra</span></pre></td></tr><tr><td class="ln">202</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rr</span><span class="whitespace"> </span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">203</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">204</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">DF_Loop</span></pre></td></tr><tr><td class="ln">205</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">206</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">207</td><td><pre class="source"><span class="label">DF_Mask1:</span></pre></td></tr><tr><td class="ln">208</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">0</span></pre></td></tr><tr><td class="ln">209</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">210</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">211</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">212</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">213</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">214</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">215</td><td><pre class="source"><span class="label">DF_Mask2:</span></pre></td></tr><tr><td class="ln">216</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">0</span></pre></td></tr><tr><td class="ln">217</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">218</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">219</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">10</span></pre></td></tr><tr><td class="ln">220</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">221</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">222</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">223</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">DF_Line</span></pre></td></tr><tr><td class="ln">224</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">226</td><td><pre class="source"><span class="label">DrawSpring:</span></pre></td></tr><tr><td class="ln">227</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">TableData</span><span class="punctuation">)</span><span class="whitespace">			</span><span class="comment">; Rendering the spring</span></pre></td></tr><tr><td class="ln">228</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">1835</span></pre></td></tr><tr><td class="ln">229</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">230</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">Spring</span></pre></td></tr><tr><td class="ln">231</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">ixl</span><span class="punctuation">,</span><span class="none">7</span></pre></td></tr><tr><td class="ln">232</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">12</span></pre></td></tr><tr><td class="ln">233</td><td><pre class="source"><span class="label">DS_Bytes:</span></pre></td></tr><tr><td class="ln">234</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">235</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">236</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">237</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">238</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">ixl</span></pre></td></tr><tr><td class="ln">239</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">DS_Bytes</span></pre></td></tr><tr><td class="ln">240</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">242</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="string">"Rendering engine: "</span></pre></td></tr><tr><td class="ln">243</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="none">$</span><span class="punctuation">-</span><span class="none">RenderFrame</span></pre></td></tr><tr><td class="ln">244</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="string">"\n"</span></pre></td></tr><tr><td class="ln">919</td><td><pre class="source"><span class="directive">#include</span><span class="whitespace"> </span><span class="string">"physics.inc"</span><span class="whitespace">		</span><span class="comment">; Ball handling: gravity, collision, flippers</span></pre></td></tr><tr><td class="ln">1</td><td><pre class="source"><span class="label">UpdateAngles:</span><span class="whitespace">			</span><span class="comment">; Updates the angles of a flipper at B, C in TableSlope</span></pre></td></tr><tr><td class="ln">2</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">FlipperAngles</span></pre></td></tr><tr><td class="ln">3</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">4</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span><span class="whitespace">					</span><span class="comment">; The direction of the flipper is in the upper bit of B</span></pre></td></tr><tr><td class="ln">5</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">6</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">UD_ChooseLeft</span></pre></td></tr><tr><td class="ln">7</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">RightFlipper</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">8</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">9</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">10</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">11</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">neg</span></pre></td></tr><tr><td class="ln">12</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="none">UD_Chosen</span></pre></td></tr><tr><td class="ln">13</td><td><pre class="source"><span class="label">UD_ChooseLeft:</span></pre></td></tr><tr><td class="ln">14</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">LeftFlipper</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">15</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">16</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">17</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">18</td><td><pre class="source"><span class="label">UD_Chosen:</span></pre></td></tr><tr><td class="ln">19</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="instruction">a</span><span class="whitespace">					</span><span class="comment">; If the ball is under the flipper, adding 180 degrees</span></pre></td></tr><tr><td class="ln">20</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallY</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">21</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="none">4</span></pre></td></tr><tr><td class="ln">22</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">23</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">24</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">UD_Above</span></pre></td></tr><tr><td class="ln">25</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">xor</span><span class="whitespace"> </span><span class="none">$80</span></pre></td></tr><tr><td class="ln">26</td><td><pre class="source"><span class="label">UD_Above:</span></pre></td></tr><tr><td class="ln">27</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">af</span></pre></td></tr><tr><td class="ln">28</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">c</span><span class="whitespace">					</span><span class="comment">; Calculating the address of the upper left corner</span></pre></td></tr><tr><td class="ln">29</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">srl</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">30</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">h</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">31</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">l</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">32</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">33</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">34</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">35</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">36</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">37</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">TableSlope</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">38</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">39</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">40</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">41</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">42</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">$7f</span></pre></td></tr><tr><td class="ln">43</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">srl</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">44</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">45</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">46</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">47</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">af</span></pre></td></tr><tr><td class="ln">48</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">41</span></pre></td></tr><tr><td class="ln">49</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="none">4</span><span class="whitespace">					</span><span class="comment">; Filling a 8x4 (16x8 pixels) area with the angle</span></pre></td></tr><tr><td class="ln">50</td><td><pre class="source"><span class="label">UD_Line:</span></pre></td></tr><tr><td class="ln">51</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">51</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">51</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">51</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">51</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">51</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">51</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">51</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">52</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">52</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">52</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">52</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">52</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">52</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">52</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">52</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">53</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">UD_Line</span></pre></td></tr><tr><td class="ln">54</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">56</td><td><pre class="source"><span class="label">MoveBall:</span><span class="whitespace">				</span><span class="comment">; Taking care of the ball</span></pre></td></tr><tr><td class="ln">57</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallX</span><span class="punctuation">)</span><span class="whitespace">			</span><span class="comment">; BallX += BallVX</span></pre></td></tr><tr><td class="ln">58</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallVX</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">59</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sra</span><span class="whitespace"> </span><span class="instruction">d</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">59</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rr</span><span class="whitespace"> </span><span class="instruction">e</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">59</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sra</span><span class="whitespace"> </span><span class="instruction">d</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">59</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rr</span><span class="whitespace"> </span><span class="instruction">e</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">59</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sra</span><span class="whitespace"> </span><span class="instruction">d</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">59</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rr</span><span class="whitespace"> </span><span class="instruction">e</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">59</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sra</span><span class="whitespace"> </span><span class="instruction">d</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">59</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rr</span><span class="whitespace"> </span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">60</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">61</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BallX</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">62</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallY</span><span class="punctuation">)</span><span class="whitespace">			</span><span class="comment">; BallY += BallVY</span></pre></td></tr><tr><td class="ln">63</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallVY</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">64</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sra</span><span class="whitespace"> </span><span class="instruction">d</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">64</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rr</span><span class="whitespace"> </span><span class="instruction">e</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">64</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sra</span><span class="whitespace"> </span><span class="instruction">d</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">64</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rr</span><span class="whitespace"> </span><span class="instruction">e</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">64</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sra</span><span class="whitespace"> </span><span class="instruction">d</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">64</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rr</span><span class="whitespace"> </span><span class="instruction">e</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">64</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sra</span><span class="whitespace"> </span><span class="instruction">d</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">64</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rr</span><span class="whitespace"> </span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">65</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">66</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BallY</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">67</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallVYlow</span><span class="punctuation">)</span><span class="whitespace">		</span><span class="comment">; BallVY += GRAVITY / 256</span></pre></td></tr><tr><td class="ln">68</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallVY</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">69</td><td><pre class="source"><span class="none">PARAM_GRAVITY</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$</span><span class="punctuation">+</span><span class="none">1</span></pre></td></tr><tr><td class="ln">70</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">GRAVITY</span></pre></td></tr><tr><td class="ln">71</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">72</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">adc</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">73</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BallVYlow</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">74</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BallVY</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">75</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallX</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="whitespace">			</span><span class="comment">; Checking left and right sides</span></pre></td></tr><tr><td class="ln">76</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">2</span></pre></td></tr><tr><td class="ln">77</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">p</span><span class="punctuation">,</span><span class="none">MB_XLeftOK</span></pre></td></tr><tr><td class="ln">78</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">2</span></pre></td></tr><tr><td class="ln">79</td><td><pre class="source"><span class="label">MB_XLeftOK:</span></pre></td></tr><tr><td class="ln">80</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">94</span></pre></td></tr><tr><td class="ln">81</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">MB_XRightOK</span></pre></td></tr><tr><td class="ln">82</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">94</span></pre></td></tr><tr><td class="ln">83</td><td><pre class="source"><span class="label">MB_XRightOK:</span></pre></td></tr><tr><td class="ln">84</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BallX</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">85</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">$feff</span><span class="whitespace">			</span><span class="comment">; Checking eight points of the ball for collision</span></pre></td></tr><tr><td class="ln">86</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">MB_Bounce</span></pre></td></tr><tr><td class="ln">87</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">$fe01</span></pre></td></tr><tr><td class="ln">88</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">MB_Bounce</span></pre></td></tr><tr><td class="ln">89</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">$ff02</span></pre></td></tr><tr><td class="ln">90</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">MB_Bounce</span></pre></td></tr><tr><td class="ln">91</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">$0102</span></pre></td></tr><tr><td class="ln">92</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">MB_Bounce</span></pre></td></tr><tr><td class="ln">93</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">$0201</span></pre></td></tr><tr><td class="ln">94</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">MB_Bounce</span></pre></td></tr><tr><td class="ln">95</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">$02ff</span></pre></td></tr><tr><td class="ln">96</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">MB_Bounce</span></pre></td></tr><tr><td class="ln">97</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">$01fe</span></pre></td></tr><tr><td class="ln">98</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">MB_Bounce</span></pre></td></tr><tr><td class="ln">99</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">$fffe</span></pre></td></tr><tr><td class="ln">100</td><td><pre class="source"><span class="label">MB_Bounce:</span></pre></td></tr><tr><td class="ln">101</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallY</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="whitespace">			</span><span class="comment">; Checking if the ball touches a wall</span></pre></td></tr><tr><td class="ln">102</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">103</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">160</span></pre></td></tr><tr><td class="ln">104</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="whitespace">					</span><span class="comment">; No checks under the table area</span></pre></td></tr><tr><td class="ln">105</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">MB_HackY</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">106</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">h</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">107</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">l</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">108</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">109</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">110</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">111</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">TableData</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">112</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">113</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">114</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">115</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallX</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">116</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">117</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">MB_HackX</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">118</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">119</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">120</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">srl</span><span class="whitespace"> </span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">121</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">srl</span><span class="whitespace"> </span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">122</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">srl</span><span class="whitespace"> </span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">123</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">124</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">128</span></pre></td></tr><tr><td class="ln">125</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">7</span></pre></td></tr><tr><td class="ln">126</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">MB_MaskOK</span></pre></td></tr><tr><td class="ln">127</td><td><pre class="source"><span class="label">MB_MaskShift:</span></pre></td></tr><tr><td class="ln">128</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">srl</span><span class="whitespace"> </span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">129</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">130</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">MB_MaskShift</span></pre></td></tr><tr><td class="ln">131</td><td><pre class="source"><span class="label">MB_MaskOK:</span></pre></td></tr><tr><td class="ln">132</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">133</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">134</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">z</span><span class="whitespace">					</span><span class="comment">; Nothing touched, nothing to do</span></pre></td></tr><tr><td class="ln">135</td><td><pre class="source"><span class="label">MB_HackY:</span></pre></td></tr><tr><td class="ln">136</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">0</span><span class="whitespace">					</span><span class="comment">; Determining the angle of the surface touched</span></pre></td></tr><tr><td class="ln">137</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">srl</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">138</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">h</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">139</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">l</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">140</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">141</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">142</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">143</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">144</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">145</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">TableSlope</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">146</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">147</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">148</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">149</td><td><pre class="source"><span class="label">MB_HackX:</span></pre></td></tr><tr><td class="ln">150</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">151</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">srl</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">152</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">153</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">154</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">155</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">156</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">157</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">z</span><span class="whitespace">					</span><span class="comment">; Zero (theoretically upwards) angle denotes unmasked area</span></pre></td></tr><tr><td class="ln">158</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">159</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallVX</span><span class="punctuation">)</span><span class="whitespace">			</span><span class="comment">; Calculating the current angle of the ball's velocity</span></pre></td></tr><tr><td class="ln">160</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">161</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">162</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallVY</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">163</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">164</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">165</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">ArcTan2_BC</span></pre></td></tr><tr><td class="ln">166</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">167</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; No collision at acute angle with the surface normal</span></pre></td></tr><tr><td class="ln">168</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">64</span></pre></td></tr><tr><td class="ln">169</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">p</span></pre></td></tr><tr><td class="ln">170</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">171</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">172</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">ix</span><span class="punctuation">,</span><span class="none">Sin_Table</span><span class="whitespace">		</span><span class="comment">; Just pushing the ball 1/4 pixel away from the point touched</span></pre></td></tr><tr><td class="ln">173</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">174</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">175</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">ix</span><span class="punctuation">,</span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">176</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; BallX += Sin(Angle) / 4</span></pre></td></tr><tr><td class="ln">177</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">178</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">179</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sbc</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">180</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">181</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">MB_BVX</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">182</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sra</span><span class="whitespace"> </span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">183</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallX</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">184</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">185</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BallX</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">186</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">187</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="none">64</span></pre></td></tr><tr><td class="ln">188</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">189</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">ix</span><span class="punctuation">,</span><span class="none">Sin_Table</span></pre></td></tr><tr><td class="ln">190</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">ix</span><span class="punctuation">,</span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">191</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; BallY -= Cos(Angle) / 4</span></pre></td></tr><tr><td class="ln">192</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">193</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">194</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sbc</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">195</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">196</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">MB_BVY</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">197</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sra</span><span class="whitespace"> </span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">198</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallY</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">199</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">200</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BallY</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">201</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallX</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="whitespace">			</span><span class="comment">; Bounce verification</span></pre></td></tr><tr><td class="ln">202</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">203</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">h</span><span class="whitespace">					</span><span class="comment">; BallY integer part</span></pre></td></tr><tr><td class="ln">204</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BounceList</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">205</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BounceNum</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">206</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">207</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">MB_NoBounce</span><span class="whitespace">		</span><span class="comment">; No bounces at all on the table</span></pre></td></tr><tr><td class="ln">208</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">209</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">210</td><td><pre class="source"><span class="label">MB_VBounce:</span></pre></td></tr><tr><td class="ln">211</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">212</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">213</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="none">3</span></pre></td></tr><tr><td class="ln">214</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">215</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">p</span><span class="punctuation">,</span><span class="none">MB_SkipB</span><span class="whitespace">			</span><span class="comment">; Ball is far in the left</span></pre></td></tr><tr><td class="ln">216</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">217</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">218</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="none">3</span></pre></td></tr><tr><td class="ln">219</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="instruction">e</span><span class="whitespace">					</span><span class="comment">; Ball is far above</span></pre></td></tr><tr><td class="ln">220</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">p</span><span class="punctuation">,</span><span class="none">MB_SkipB</span></pre></td></tr><tr><td class="ln">221</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">222</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">223</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">2</span></pre></td></tr><tr><td class="ln">224</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">225</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">MB_SkipB</span><span class="whitespace">			</span><span class="comment">; Ball is far in the right</span></pre></td></tr><tr><td class="ln">226</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">227</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">228</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">2</span></pre></td></tr><tr><td class="ln">229</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">230</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">MB_SkipB</span><span class="whitespace">			</span><span class="comment">; Ball is far below</span></pre></td></tr><tr><td class="ln">231</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">1</span></pre></td></tr><tr><td class="ln">232</td><td><pre class="source"><span class="label">MB_SkipB:</span></pre></td></tr><tr><td class="ln">233</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">234</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">235</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">236</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">237</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">238</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">MB_VBounce</span></pre></td></tr><tr><td class="ln">239</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">240</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">241</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">MB_NoBounce</span><span class="whitespace">		</span><span class="comment">; Applying extra spring force in the bounce area</span></pre></td></tr><tr><td class="ln">242</td><td><pre class="source"><span class="none">MB_BVX</span><span class="whitespace"> </span><span class="punctuation">=</span><span class="whitespace"> </span><span class="none">$</span><span class="punctuation">+</span><span class="none">1</span></pre></td></tr><tr><td class="ln">243</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">244</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">NegHL32</span></pre></td></tr><tr><td class="ln">245</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallVX</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">246</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">247</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BallVX</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">248</td><td><pre class="source"><span class="none">MB_BVY</span><span class="whitespace"> </span><span class="punctuation">=</span><span class="whitespace"> </span><span class="none">$</span><span class="punctuation">+</span><span class="none">1</span></pre></td></tr><tr><td class="ln">249</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">250</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">NegHL32</span></pre></td></tr><tr><td class="ln">251</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallVY</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">252</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">253</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BallVY</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">254</td><td><pre class="source"><span class="label">MB_NoBounce:</span></pre></td></tr><tr><td class="ln">255</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">256</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; Var = BallVX * Sin(Angle) / 2</span></pre></td></tr><tr><td class="ln">257</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">MB_HackAngle</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">258</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">259</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">260</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallVX</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">261</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">Mul_BC_SinE</span></pre></td></tr><tr><td class="ln">262</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">MB_Var</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">263</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">264</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; Var -= BallVY * Cos(Angle) / 2</span></pre></td></tr><tr><td class="ln">265</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">192</span></pre></td></tr><tr><td class="ln">266</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">267</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">268</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallVY</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">269</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">Mul_BC_SinE</span></pre></td></tr><tr><td class="ln">270</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">271</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">MB_Var</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">272</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">273</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace">				</span><span class="comment">; Var *= 2</span></pre></td></tr><tr><td class="ln">274</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">MB_Var</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">275</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">276</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; BallVX -= Var * Sin(Angle) * 3</span></pre></td></tr><tr><td class="ln">277</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">128</span></pre></td></tr><tr><td class="ln">278</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">279</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">280</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">MB_Var</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">281</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">Mul_BC_SinE</span></pre></td></tr><tr><td class="ln">282</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">283</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallVX</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">284</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">285</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">286</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">287</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BallVX</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">288</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">289</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; BallVY += Var * Cos(Angle) * 3</span></pre></td></tr><tr><td class="ln">290</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">64</span></pre></td></tr><tr><td class="ln">291</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">292</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">293</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">MB_Var</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">294</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">Mul_BC_SinE</span></pre></td></tr><tr><td class="ln">295</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">296</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallVY</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">297</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">298</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">299</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">300</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BallVY</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">301</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">302</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">303</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">64</span></pre></td></tr><tr><td class="ln">304</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">128</span></pre></td></tr><tr><td class="ln">305</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rlca</span></pre></td></tr><tr><td class="ln">306</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">MB_HackPush</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span><span class="whitespace">	</span><span class="comment">; A is 1 if the surface touched is pointing downwards</span></pre></td></tr><tr><td class="ln">307</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">TableFlippers</span><span class="punctuation">)</span><span class="whitespace">	</span><span class="comment">; Handling collision with flippers</span></pre></td></tr><tr><td class="ln">308</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">309</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">310</td><td><pre class="source"><span class="label">MB_Flippers:</span></pre></td></tr><tr><td class="ln">311</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">312</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; Flipper X coordinate</span></pre></td></tr><tr><td class="ln">313</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">LeftFlipper</span></pre></td></tr><tr><td class="ln">314</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="none">3</span></pre></td></tr><tr><td class="ln">315</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">316</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">p</span><span class="punctuation">,</span><span class="none">MB_DirOK</span></pre></td></tr><tr><td class="ln">317</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span><span class="whitespace">					</span><span class="comment">; Because RightFlipper comes just after LeftFlipper</span></pre></td></tr><tr><td class="ln">318</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">319</td><td><pre class="source"><span class="label">MB_DirOK:</span></pre></td></tr><tr><td class="ln">320</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">MB_HackDir</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">321</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">$7f</span></pre></td></tr><tr><td class="ln">322</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">323</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">324</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">MB_HackJump</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">325</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">326</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">327</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; Flipper Y coordinate</span></pre></td></tr><tr><td class="ln">328</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">329</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallY</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="whitespace">			</span><span class="comment">; Checking if the ball is within the flipper's area</span></pre></td></tr><tr><td class="ln">330</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">2</span></pre></td></tr><tr><td class="ln">331</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">332</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">MB_NoFlipper</span></pre></td></tr><tr><td class="ln">333</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">12</span></pre></td></tr><tr><td class="ln">334</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">MB_NoFlipper</span></pre></td></tr><tr><td class="ln">335</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallX</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">336</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">1</span></pre></td></tr><tr><td class="ln">337</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">338</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">MB_NoFlipper</span></pre></td></tr><tr><td class="ln">339</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">18</span></pre></td></tr><tr><td class="ln">340</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">MB_NoFlipper</span></pre></td></tr><tr><td class="ln">341</td><td><pre class="source"><span class="label">MB_HackJump:</span></pre></td></tr><tr><td class="ln">342</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="none">MB_HackAngle</span></pre></td></tr><tr><td class="ln">343</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cpl</span></pre></td></tr><tr><td class="ln">344</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">19</span></pre></td></tr><tr><td class="ln">345</td><td><pre class="source"><span class="label">MB_HackAngle:</span></pre></td></tr><tr><td class="ln">346</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="none">0</span><span class="whitespace">					</span><span class="comment">; Angle of flipper surface</span></pre></td></tr><tr><td class="ln">347</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">348</td><td><pre class="source"><span class="none">PARAM_FORCEFACTOR</span><span class="whitespace"> </span><span class="punctuation">=</span><span class="whitespace"> </span><span class="none">$</span><span class="punctuation">+</span><span class="none">1</span></pre></td></tr><tr><td class="ln">349</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">FORCEFACTOR</span><span class="whitespace">		</span><span class="comment">; Force: proportional to the distance from the axis of rotation</span></pre></td></tr><tr><td class="ln">350</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">Mul_A_DE</span><span class="whitespace">			</span><span class="comment">; of the flipper</span></pre></td></tr><tr><td class="ln">351</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">352</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">353</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">354</td><td><pre class="source"><span class="label">MB_HackDir:</span></pre></td></tr><tr><td class="ln">355</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">0</span><span class="whitespace">				</span><span class="comment">; No force exerted if the flipper is at either extreme position</span></pre></td></tr><tr><td class="ln">356</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">357</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">358</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">z</span></pre></td></tr><tr><td class="ln">359</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">4</span></pre></td></tr><tr><td class="ln">360</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">z</span></pre></td></tr><tr><td class="ln">361</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="whitespace">					</span><span class="comment">; No force exerted if the flipper is moving away from the ball</span></pre></td></tr><tr><td class="ln">362</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">363</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">364</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">h</span><span class="punctuation">,</span><span class="none">0</span><span class="whitespace">					</span><span class="comment">; If the flipper is being pushed, A will be 1, otherwise 0</span></pre></td></tr><tr><td class="ln">365</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">366</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">MB_PushOK</span></pre></td></tr><tr><td class="ln">367</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">368</td><td><pre class="source"><span class="label">MB_PushOK:</span></pre></td></tr><tr><td class="ln">369</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">370</td><td><pre class="source"><span class="label">MB_HackPush:</span></pre></td></tr><tr><td class="ln">371</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">xor</span><span class="whitespace"> </span><span class="none">0</span><span class="whitespace">					</span><span class="comment">; A=0 if the flipper was touched from the bottom while being</span></pre></td></tr><tr><td class="ln">372</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">z</span><span class="whitespace">					</span><span class="comment">; pushed or touched at the top while being released</span></pre></td></tr><tr><td class="ln">373</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">374</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">375</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">Mul_BC_SinE</span></pre></td></tr><tr><td class="ln">376</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">377</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallVX</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">378</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">379</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BallVX</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">380</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">381</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">382</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">383</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">192</span></pre></td></tr><tr><td class="ln">384</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">385</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">Mul_BC_SinE</span></pre></td></tr><tr><td class="ln">386</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">387</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">BallVY</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">388</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">389</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">BallVY</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">390</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">391</td><td><pre class="source"><span class="label">MB_NoFlipper:</span></pre></td></tr><tr><td class="ln">392</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">MB_Flippers</span></pre></td></tr><tr><td class="ln">393</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">395</td><td><pre class="source"><span class="label">Mul_BC_SinE:</span><span class="whitespace">			</span><span class="comment">; HL=BC*sin(E*PI/128)/2 - BC is signed</span></pre></td></tr><tr><td class="ln">396</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">397</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">Sin_Table</span></pre></td></tr><tr><td class="ln">398</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">399</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">400</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">401</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">402</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sbc</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">403</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="instruction">a</span><span class="whitespace">					</span><span class="comment">; DE=sin(E)</span></pre></td></tr><tr><td class="ln">404</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">de</span><span class="whitespace">				</span><span class="comment">; To calculate: HL=ext(hi(C*DE))+B*DE+s*E&lt;&lt;8</span></pre></td></tr><tr><td class="ln">405</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">406</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">Mul_A_DE</span><span class="whitespace">			</span><span class="comment">; C*DE</span></pre></td></tr><tr><td class="ln">407</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">408</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="instruction">h</span><span class="whitespace">					</span><span class="comment">; C=hi(C*DE)</span></pre></td></tr><tr><td class="ln">409</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">410</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">411</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">Mul_A_DE</span><span class="whitespace">			</span><span class="comment">; B*DE</span></pre></td></tr><tr><td class="ln">412</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">413</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">414</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">415</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sbc</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">416</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="instruction">a</span><span class="whitespace">					</span><span class="comment">; DE=ext(hi(C*DE)) - sign extension</span></pre></td></tr><tr><td class="ln">417</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span><span class="whitespace">				</span><span class="comment">; HL=ext(hi(C*DE))+B*DE</span></pre></td></tr><tr><td class="ln">418</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">419</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">420</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">421</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">nc</span></pre></td></tr><tr><td class="ln">422</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">423</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="instruction">e</span><span class="whitespace">					</span><span class="comment">; HL-=E&lt;&lt;8 if BC is negative</span></pre></td></tr><tr><td class="ln">424</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">h</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">425</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">427</td><td><pre class="source"><span class="label">NegHL32:</span><span class="whitespace">				</span><span class="comment">; Multiplies HL by -32</span></pre></td></tr><tr><td class="ln">428</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">429</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">430</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">431</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">432</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">433</td><td><pre class="source"><span class="label">NegHL:</span><span class="whitespace">					</span><span class="comment">; Multiplies HL by -1</span></pre></td></tr><tr><td class="ln">434</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">435</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cpl</span></pre></td></tr><tr><td class="ln">436</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">l</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">437</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">438</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cpl</span></pre></td></tr><tr><td class="ln">439</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">h</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">440</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">441</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">443</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="string">"Physics code: "</span></pre></td></tr><tr><td class="ln">444</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="none">$</span><span class="punctuation">-</span><span class="none">UpdateAngles</span></pre></td></tr><tr><td class="ln">445</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="string">"\n"</span></pre></td></tr><tr><td class="ln">920</td><td><pre class="source"><span class="directive">#include</span><span class="whitespace"> </span><span class="string">"menu.inc"</span><span class="whitespace">			</span><span class="comment">; Menu related and text display routines</span></pre></td></tr><tr><td class="ln">1</td><td><pre class="source"><span class="label">Menu:</span></pre></td></tr><tr><td class="ln">2</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">MenuAddress</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace">		</span><span class="comment">; Saving the pointer</span></pre></td></tr><tr><td class="ln">3</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">1</span><span class="whitespace">						</span><span class="comment">; Putting the cursor to the first item</span></pre></td></tr><tr><td class="ln">4</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">MenuItem</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">5</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">6</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">MenuItems</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">7</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">8</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">MenuCoords</span><span class="whitespace">			</span><span class="comment">; Initialising the coordinates</span></pre></td></tr><tr><td class="ln">9</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">MENURIGHT</span></pre></td></tr><tr><td class="ln">10</td><td><pre class="source"><span class="label">Menu_ClearX:</span></pre></td></tr><tr><td class="ln">11</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">12</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">13</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">Menu_ClearX</span></pre></td></tr><tr><td class="ln">14</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">VScreen</span></pre></td></tr><tr><td class="ln">15</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">ClearScreen</span></pre></td></tr><tr><td class="ln">16</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">LogoData</span></pre></td></tr><tr><td class="ln">17</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">VScreen</span><span class="punctuation">+</span><span class="none">12</span></pre></td></tr><tr><td class="ln">18</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">288</span></pre></td></tr><tr><td class="ln">19</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ldir</span></pre></td></tr><tr><td class="ln">20</td><td><pre class="source"><span class="label">Menu_Loop:</span></pre></td></tr><tr><td class="ln">21</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">FrameCount</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">22</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">23</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">FrameCount</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">24</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">DELAYFACTOR</span></pre></td></tr><tr><td class="ln">25</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">Menu_RenderOK</span></pre></td></tr><tr><td class="ln">26</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">xor</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">27</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">FrameCount</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">28</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">UpdateCoordinates</span></pre></td></tr><tr><td class="ln">29</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">DisplayMenu</span></pre></td></tr><tr><td class="ln">30</td><td><pre class="source"><span class="label">Menu_RenderOK:</span></pre></td></tr><tr><td class="ln">31</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">ReadKeyboard</span><span class="whitespace">			</span><span class="comment">; Reading keypresses</span></pre></td></tr><tr><td class="ln">32</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">ValidateKeys</span><span class="whitespace">			</span><span class="comment">; Preventing repetition</span></pre></td></tr><tr><td class="ln">33</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">MenuDelay</span></pre></td></tr><tr><td class="ln">34</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">ValidKey</span><span class="punctuation">+</span><span class="none">6</span><span class="punctuation">)</span><span class="whitespace">			</span><span class="comment">; 2nd</span></pre></td></tr><tr><td class="ln">35</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">32</span></pre></td></tr><tr><td class="ln">36</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">Menu_Jump</span></pre></td></tr><tr><td class="ln">37</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">ValidKey</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">38</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">1</span></pre></td></tr><tr><td class="ln">39</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">Menu_Down</span></pre></td></tr><tr><td class="ln">40</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">ValidKey</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">41</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">8</span></pre></td></tr><tr><td class="ln">42</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">Menu_Up</span></pre></td></tr><tr><td class="ln">43</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="none">Menu_Loop</span></pre></td></tr><tr><td class="ln">45</td><td><pre class="source"><span class="label">MenuDelay:</span><span class="whitespace">					</span><span class="comment">; Simple delay</span></pre></td></tr><tr><td class="ln">46</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">$80</span></pre></td></tr><tr><td class="ln">47</td><td><pre class="source"><span class="label">MD_Loop:</span></pre></td></tr><tr><td class="ln">48</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">49</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">50</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">51</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">52</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">53</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">MD_Loop</span></pre></td></tr><tr><td class="ln">54</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">56</td><td><pre class="source"><span class="label">Menu_Jump:</span></pre></td></tr><tr><td class="ln">57</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">MenuItem</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">58</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">59</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">60</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">61</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">62</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">MenuAddress</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">63</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">64</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">65</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">66</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">h</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">67</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">l</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">68</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">70</td><td><pre class="source"><span class="label">Menu_Down:</span></pre></td></tr><tr><td class="ln">71</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">MenuAddress</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">72</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">MenuItem</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">73</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">74</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">75</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">Menu_Update</span></pre></td></tr><tr><td class="ln">76</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">Menu_Update</span></pre></td></tr><tr><td class="ln">77</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">1</span></pre></td></tr><tr><td class="ln">78</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="none">Menu_Update</span></pre></td></tr><tr><td class="ln">80</td><td><pre class="source"><span class="label">Menu_Up:</span></pre></td></tr><tr><td class="ln">81</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">MenuItem</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">82</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">83</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">Menu_Update</span></pre></td></tr><tr><td class="ln">84</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">MenuItems</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">86</td><td><pre class="source"><span class="label">Menu_Update:</span></pre></td></tr><tr><td class="ln">87</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">MenuItem</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">88</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">90</td><td><pre class="source"><span class="label">UpdateCoordinates:</span></pre></td></tr><tr><td class="ln">91</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">MenuItem</span><span class="punctuation">)</span><span class="whitespace">			</span><span class="comment">; B = MenuItems; C = MenuItem</span></pre></td></tr><tr><td class="ln">92</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">MenuCoords</span></pre></td></tr><tr><td class="ln">93</td><td><pre class="source"><span class="label">UC_Loop:</span></pre></td></tr><tr><td class="ln">94</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">MenuItems</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">95</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">96</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">97</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">98</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">99</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">UC_NotCurrent</span></pre></td></tr><tr><td class="ln">100</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">MENULEFT</span></pre></td></tr><tr><td class="ln">101</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">UC_EndLoop</span></pre></td></tr><tr><td class="ln">102</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">103</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="none">UC_EndUpdate</span></pre></td></tr><tr><td class="ln">104</td><td><pre class="source"><span class="label">UC_NotCurrent:</span></pre></td></tr><tr><td class="ln">105</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">MENURIGHT</span></pre></td></tr><tr><td class="ln">106</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">UC_EndLoop</span></pre></td></tr><tr><td class="ln">107</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">108</td><td><pre class="source"><span class="label">UC_EndUpdate:</span></pre></td></tr><tr><td class="ln">109</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">110</td><td><pre class="source"><span class="label">UC_EndLoop:</span></pre></td></tr><tr><td class="ln">111</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">112</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">UC_Loop</span></pre></td></tr><tr><td class="ln">113</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">115</td><td><pre class="source"><span class="label">FireEffect:</span><span class="whitespace">					</span><span class="comment">; Make BC bytes at HL a screen in fire</span></pre></td></tr><tr><td class="ln">116</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">117</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">12</span></pre></td></tr><tr><td class="ln">118</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">119</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">120</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">121</td><td><pre class="source"><span class="none">FE_CHack</span><span class="whitespace">	</span><span class="directive">.equ</span><span class="whitespace">	</span><span class="none">$</span><span class="punctuation">+</span><span class="none">2</span></pre></td></tr><tr><td class="ln">122</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">ix</span><span class="punctuation">,</span><span class="none">1000</span></pre></td></tr><tr><td class="ln">123</td><td><pre class="source"><span class="label">FE_Clear:</span></pre></td></tr><tr><td class="ln">124</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">125</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">126</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">127</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">128</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">129</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">ix</span></pre></td></tr><tr><td class="ln">130</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">131</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">132</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">133</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">FE_Clear</span></pre></td></tr><tr><td class="ln">134</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">ixh</span></pre></td></tr><tr><td class="ln">135</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">37</span></pre></td></tr><tr><td class="ln">136</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">ixh</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">137</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">FE_CHack</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">ix</span></pre></td></tr><tr><td class="ln">138</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">140</td><td><pre class="source"><span class="label">DisplayMenu:</span><span class="whitespace">				</span><span class="comment">; Displaying the menu at its current state</span></pre></td></tr><tr><td class="ln">141</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">VScreen</span><span class="punctuation">+</span><span class="none">324</span></pre></td></tr><tr><td class="ln">142</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">360</span></pre></td></tr><tr><td class="ln">143</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">FireEffect</span></pre></td></tr><tr><td class="ln">144</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">MenuAddress</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">145</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">146</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">147</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">148</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">149</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">150</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">151</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">152</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">MenuCoords</span></pre></td></tr><tr><td class="ln">153</td><td><pre class="source"><span class="label">DM_Loop:</span></pre></td></tr><tr><td class="ln">154</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">155</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">156</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">157</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">158</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">159</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">MenuItems</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">160</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">161</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">162</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">163</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">164</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">165</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">32</span></pre></td></tr><tr><td class="ln">166</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">167</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">168</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">169</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">5</span></pre></td></tr><tr><td class="ln">170</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">171</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">172</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">SpriteBig</span></pre></td></tr><tr><td class="ln">173</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">174</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">175</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">176</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">177</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">178</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">179</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">180</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">181</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">182</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">183</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">184</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">DM_Loop</span></pre></td></tr><tr><td class="ln">185</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">VScreen</span></pre></td></tr><tr><td class="ln">186</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="none">FlipScreen</span></pre></td></tr><tr><td class="ln">188</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="string">"Menu code: "</span></pre></td></tr><tr><td class="ln">189</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="none">$</span><span class="punctuation">-</span><span class="none">Menu</span></pre></td></tr><tr><td class="ln">190</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="string">"\n"</span></pre></td></tr><tr><td class="ln">921</td><td><pre class="source"><span class="directive">#include</span><span class="whitespace"> </span><span class="string">"graph.inc"</span><span class="whitespace">		</span><span class="comment">; Graphics routine library</span></pre></td></tr><tr><td class="ln">54</td><td><pre class="source"><span class="label">ClearScreen:</span><span class="whitespace">			</span><span class="comment">; Clearing the virtual screen at HL (~6500 cycles)</span></pre></td></tr><tr><td class="ln">55</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">CS_saveSP</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">sp</span><span class="whitespace">	</span><span class="comment">; Backing up SP</span></pre></td></tr><tr><td class="ln">56</td><td><pre class="source"><span class="label">CS_hackSize1:</span></pre></td></tr><tr><td class="ln">57</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">768</span></pre></td></tr><tr><td class="ln">58</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">59</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">sp</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">60</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">61</td><td><pre class="source"><span class="label">CS_hackSize2:</span></pre></td></tr><tr><td class="ln">62</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="none">48</span></pre></td></tr><tr><td class="ln">63</td><td><pre class="source"><span class="label">CS_loop:</span></pre></td></tr><tr><td class="ln">64</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="whitespace">				</span><span class="comment">; 16 bytes are cleared in 8*11+13=101 cycles</span></pre></td></tr><tr><td class="ln">65</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="whitespace">				</span><span class="comment">; That would be 16*21=336 with LDIR and 16*16+13=269 with LDIs</span></pre></td></tr><tr><td class="ln">66</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">67</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">68</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">69</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">70</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">71</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">72</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">CS_loop</span></pre></td></tr><tr><td class="ln">73</td><td><pre class="source"><span class="label">CS_saveSP:</span></pre></td></tr><tr><td class="ln">74</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">sp</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">75</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">77</td><td><pre class="source"><span class="label">FlipScreen:</span><span class="whitespace">				</span><span class="comment">; Copies the screen at HL to the LCD in ~52000 cycles (ION FastCopy)</span></pre></td></tr><tr><td class="ln">78</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">$80</span></pre></td></tr><tr><td class="ln">79</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">out</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">$10</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">80</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">755</span></pre></td></tr><tr><td class="ln">81</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">82</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">$20</span></pre></td></tr><tr><td class="ln">83</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">84</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">85</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">86</td><td><pre class="source"><span class="label">FS_column:</span></pre></td></tr><tr><td class="ln">87</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="none">64</span></pre></td></tr><tr><td class="ln">88</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">89</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="punctuation">-</span><span class="none">767</span></pre></td></tr><tr><td class="ln">90</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">out</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">$10</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">91</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">92</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">10</span></pre></td></tr><tr><td class="ln">93</td><td><pre class="source"><span class="label">FS_inner:</span></pre></td></tr><tr><td class="ln">94</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">95</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">96</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">97</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">98</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">99</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">out</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">$11</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">100</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">dec</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">101</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">FS_inner</span></pre></td></tr><tr><td class="ln">102</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">103</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">$2c</span></pre></td></tr><tr><td class="ln">104</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">nz</span><span class="punctuation">,</span><span class="none">FS_column</span></pre></td></tr><tr><td class="ln">105</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">107</td><td><pre class="source"><span class="label">AlignSprite:</span><span class="whitespace">			</span><span class="comment">; Draws a sprite at HL with size B (vert), C (horz) to DE</span></pre></td></tr><tr><td class="ln">108</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">109</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">110</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">111</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ldir</span></pre></td></tr><tr><td class="ln">112</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">113</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">12</span></pre></td></tr><tr><td class="ln">114</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">115</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">116</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">117</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">118</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">AlignSprite</span></pre></td></tr><tr><td class="ln">119</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">121</td><td><pre class="source"><span class="label">AlignMaskedSprite:</span><span class="whitespace">		</span><span class="comment">; Draws a masked sprite at HL with size B (vert), C (horz) to DE</span></pre></td></tr><tr><td class="ln">122</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">123</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">124</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">125</td><td><pre class="source"><span class="label">AMS_loop:</span></pre></td></tr><tr><td class="ln">126</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">127</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">128</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">129</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">130</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">131</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">132</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">133</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">AMS_loop</span></pre></td></tr><tr><td class="ln">134</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">135</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">12</span></pre></td></tr><tr><td class="ln">136</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">137</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">138</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">139</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">140</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">AlignMaskedSprite</span></pre></td></tr><tr><td class="ln">141</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">143</td><td><pre class="source"><span class="label">WhiteSprite:</span></pre></td></tr><tr><td class="ln">144</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">145</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">$ac</span><span class="whitespace">				</span><span class="comment">; XOR H</span></pre></td></tr><tr><td class="ln">146</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">S_XORH</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">147</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">a</span><span class="whitespace">					</span><span class="comment">; XOR L</span></pre></td></tr><tr><td class="ln">148</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">S_XORL</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">149</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">150</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">Sprite</span></pre></td></tr><tr><td class="ln">151</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">xor</span><span class="whitespace"> </span><span class="instruction">a</span><span class="whitespace">					</span><span class="comment">; NOP</span></pre></td></tr><tr><td class="ln">152</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">S_XORH</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">153</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">S_XORL</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">154</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">156</td><td><pre class="source"><span class="label">Sprite:</span><span class="whitespace">					</span><span class="comment">; Simple 8x8 OR sprite routine</span></pre></td></tr><tr><td class="ln">157</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">h</span><span class="punctuation">,</span><span class="none">0</span><span class="whitespace">					</span><span class="comment">; A, L: X, Y coordinates; BC: sprite address</span></pre></td></tr><tr><td class="ln">158</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">159</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">160</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">161</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">162</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">163</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">164</td><td><pre class="source"><span class="label">Sprite_Address:</span></pre></td></tr><tr><td class="ln">165</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">VScreen</span></pre></td></tr><tr><td class="ln">166</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">167</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">168</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">169</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">srl</span><span class="whitespace"> </span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">170</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">srl</span><span class="whitespace"> </span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">171</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">srl</span><span class="whitespace"> </span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">172</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span><span class="whitespace">				</span><span class="comment">; HL contains the final byte address here</span></pre></td></tr><tr><td class="ln">173</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">174</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">ix</span></pre></td></tr><tr><td class="ln">175</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">7</span></pre></td></tr><tr><td class="ln">176</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">S_Shift</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span><span class="whitespace">		</span><span class="comment">; Shift hack</span></pre></td></tr><tr><td class="ln">177</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">178</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">179</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="none">8</span></pre></td></tr><tr><td class="ln">180</td><td><pre class="source"><span class="label">S_Loop:</span></pre></td></tr><tr><td class="ln">181</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">182</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">183</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">l</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">184</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">h</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">185</td><td><pre class="source"><span class="label">S_Shift:</span></pre></td></tr><tr><td class="ln">186</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="none">$</span></pre></td></tr><tr><td class="ln">187</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">188</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">189</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">190</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">191</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">192</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">193</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">194</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">195</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">196</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">197</td><td><pre class="source"><span class="label">S_XORH:</span></pre></td></tr><tr><td class="ln">198</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">nop</span><span class="whitespace">					</span><span class="comment">; XOR H for white</span></pre></td></tr><tr><td class="ln">199</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">200</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">201</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">202</td><td><pre class="source"><span class="label">S_XORL:</span></pre></td></tr><tr><td class="ln">203</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">nop</span><span class="whitespace">					</span><span class="comment">; XOR L for white</span></pre></td></tr><tr><td class="ln">204</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">205</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">206</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">12</span></pre></td></tr><tr><td class="ln">207</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">ix</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">208</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">209</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">S_Loop</span></pre></td></tr><tr><td class="ln">210</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">212</td><td><pre class="source"><span class="label">SpriteBig:</span><span class="whitespace">				</span><span class="comment">; Drawing a bigger sprite using the 8x8 routine</span></pre></td></tr><tr><td class="ln">213</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">ix</span><span class="punctuation">,</span><span class="none">BigSprite</span><span class="whitespace">		</span><span class="comment">; B, C: sprite size in bytes; D, E: coordinates; HL: sprite address</span></pre></td></tr><tr><td class="ln">214</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">215</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="none">8</span></pre></td></tr><tr><td class="ln">216</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">xor</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">217</td><td><pre class="source"><span class="label">SB_Clear:</span></pre></td></tr><tr><td class="ln">218</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">219</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">ix</span></pre></td></tr><tr><td class="ln">220</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">SB_Clear</span></pre></td></tr><tr><td class="ln">221</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">222</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">223</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">SB_Size</span><span class="punctuation">+</span><span class="none">1</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">224</td><td><pre class="source"><span class="label">SB_Loop:</span></pre></td></tr><tr><td class="ln">225</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">226</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">227</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">228</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">229</td><td><pre class="source"><span class="label">SB_Size:</span></pre></td></tr><tr><td class="ln">230</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">231</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">232</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">ix</span><span class="punctuation">,</span><span class="none">BigSprite</span></pre></td></tr><tr><td class="ln">233</td><td><pre class="source"><span class="label">SB_Copy:</span></pre></td></tr><tr><td class="ln">234</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">235</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">236</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">237</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">ix</span></pre></td></tr><tr><td class="ln">238</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">SB_Copy</span></pre></td></tr><tr><td class="ln">239</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="whitespace">					</span><span class="comment">; Coordinates</span></pre></td></tr><tr><td class="ln">240</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">BigSprite</span></pre></td></tr><tr><td class="ln">241</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">242</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">Sprite</span></pre></td></tr><tr><td class="ln">243</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">244</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">245</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">246</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">247</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">8</span></pre></td></tr><tr><td class="ln">248</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">249</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">250</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">SB_Loop</span></pre></td></tr><tr><td class="ln">251</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">253</td><td><pre class="source"><span class="label">DisplayNumber:</span><span class="whitespace">			</span><span class="comment">; Displaying (OR) a 32-bit integer pointed by HL</span></pre></td></tr><tr><td class="ln">254</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="whitespace">				</span><span class="comment">; D, E: Screen coordinates</span></pre></td></tr><tr><td class="ln">255</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">256</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">257</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">258</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">DN_LoWord</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">259</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">260</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">261</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">262</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">263</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">DN_HiWord</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">264</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="none">9</span></pre></td></tr><tr><td class="ln">265</td><td><pre class="source"><span class="label">DN_Number:</span><span class="whitespace">				</span><span class="comment">; Outputting one digit per iteration</span></pre></td></tr><tr><td class="ln">266</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">267</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">268</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">$05f5</span><span class="whitespace">			</span><span class="comment">; $05F5E100 = 100000000</span></pre></td></tr><tr><td class="ln">269</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">$e100</span></pre></td></tr><tr><td class="ln">270</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">-</span><span class="none">1</span></pre></td></tr><tr><td class="ln">271</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">a</span><span class="whitespace">					</span><span class="comment">; Clearing the carry</span></pre></td></tr><tr><td class="ln">272</td><td><pre class="source"><span class="label">DN_Digit:</span></pre></td></tr><tr><td class="ln">273</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">274</td><td><pre class="source"><span class="none">DN_LoWord</span><span class="whitespace"> </span><span class="punctuation">=</span><span class="whitespace"> </span><span class="none">$</span><span class="punctuation">+</span><span class="none">1</span></pre></td></tr><tr><td class="ln">275</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">0</span><span class="whitespace">				</span><span class="comment">; Low word</span></pre></td></tr><tr><td class="ln">276</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sbc</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">277</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">DN_LoWord</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">278</td><td><pre class="source"><span class="none">DN_HiWord</span><span class="whitespace"> </span><span class="punctuation">=</span><span class="whitespace"> </span><span class="none">$</span><span class="punctuation">+</span><span class="none">1</span></pre></td></tr><tr><td class="ln">279</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">0</span><span class="whitespace">				</span><span class="comment">; High word</span></pre></td></tr><tr><td class="ln">280</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sbc</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">281</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">DN_HiWord</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">282</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">DN_Digit</span></pre></td></tr><tr><td class="ln">283</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">DN_LoWord</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">284</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">DN_HiWord</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">285</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">bc</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">285</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">285</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="punctuation">,</span><span class="none">$05f5</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">285</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">adc</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">bc</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">285</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace">		</span><span class="comment">; DEHL += 100000000</span></pre></td></tr><tr><td class="ln">286</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">286</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">286</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">adc</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">286</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace">					</span><span class="comment">; DEHL *= 2</span></pre></td></tr><tr><td class="ln">287</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">288</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">289</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">290</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">290</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">290</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">adc</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">290</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace">					</span><span class="comment">; DEHL *= 2</span></pre></td></tr><tr><td class="ln">291</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">291</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">291</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">adc</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">291</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace">					</span><span class="comment">; DEHL *= 2</span></pre></td></tr><tr><td class="ln">292</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">bc</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">292</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">292</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">292</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">adc</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">bc</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">292</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ex</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace">			</span><span class="comment">; DEHL += DEHL/4</span></pre></td></tr><tr><td class="ln">293</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">DN_LoWord</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">294</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">DN_HiWord</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">295</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">296</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">DisplayDigit</span></pre></td></tr><tr><td class="ln">297</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">298</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">DN_Number</span></pre></td></tr><tr><td class="ln">299</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">301</td><td><pre class="source"><span class="label">DisplayDigit:</span><span class="whitespace">			</span><span class="comment">; Displaying a digit in A at D, E and advance the coordinates</span></pre></td></tr><tr><td class="ln">302</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">Numbers</span><span class="whitespace">			</span><span class="comment">; Calculating the address of the sprite</span></pre></td></tr><tr><td class="ln">303</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">304</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">305</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">306</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">307</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">308</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">309</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">310</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">311</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">312</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">5</span><span class="whitespace">					</span><span class="comment">; Hacking the sprite routine to render 5 lines only</span></pre></td></tr><tr><td class="ln">313</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">S_Loop</span><span class="punctuation">-</span><span class="none">1</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">314</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">315</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">l</span><span class="punctuation">,</span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">316</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">317</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">Sprite</span></pre></td></tr><tr><td class="ln">318</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">319</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">320</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">5</span></pre></td></tr><tr><td class="ln">321</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">322</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">8</span><span class="whitespace">					</span><span class="comment">; Restoring the sprite routine</span></pre></td></tr><tr><td class="ln">323</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">S_Loop</span><span class="punctuation">-</span><span class="none">1</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">324</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">326</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="string">"Graphics routines: "</span></pre></td></tr><tr><td class="ln">327</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="none">$</span><span class="punctuation">-</span><span class="none">ClearScreen</span></pre></td></tr><tr><td class="ln">328</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="string">"\n"</span></pre></td></tr><tr><td class="ln">922</td><td><pre class="source"><span class="directive">#include</span><span class="whitespace"> </span><span class="string">"input.inc"</span><span class="whitespace">		</span><span class="comment">; Keyboard routines</span></pre></td></tr><tr><td class="ln">1</td><td><pre class="source"><span class="label">ReadKeyboard:</span><span class="whitespace">		</span><span class="comment">; Fills 7 bytes at KeyPressed; if a key is pressed, the corresponding</span></pre></td></tr><tr><td class="ln">2</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">KeyPressed</span><span class="whitespace">	</span><span class="comment">; bit is set to ZERO. Works with disabled interrupts as well.</span></pre></td></tr><tr><td class="ln">3</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="none">7</span></pre></td></tr><tr><td class="ln">4</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">$fe</span></pre></td></tr><tr><td class="ln">5</td><td><pre class="source"><span class="label">RK_Loop:</span></pre></td></tr><tr><td class="ln">6</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">$ff</span></pre></td></tr><tr><td class="ln">7</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">out</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">1</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">8</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">9</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">out</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">1</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">10</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">in</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="none">1</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">11</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">12</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">13</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rlc</span><span class="whitespace"> </span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">14</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">RK_Loop</span></pre></td></tr><tr><td class="ln">15</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">17</td><td><pre class="source"><span class="label">ValidateKeys:</span><span class="whitespace">		</span><span class="comment">; Fills the ValidKey array; if a key was just pressed, the corresponding</span></pre></td></tr><tr><td class="ln">18</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">KeyPressed</span><span class="whitespace">	</span><span class="comment">; bit is reset (zeroed). Must be called after ReadKeyboard.</span></pre></td></tr><tr><td class="ln">19</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">de</span><span class="punctuation">,</span><span class="none">KeyState</span></pre></td></tr><tr><td class="ln">20</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">ix</span><span class="punctuation">,</span><span class="none">ValidKey</span></pre></td></tr><tr><td class="ln">21</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="none">7</span></pre></td></tr><tr><td class="ln">22</td><td><pre class="source"><span class="label">VK_Loop:</span></pre></td></tr><tr><td class="ln">23</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">24</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">25</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">ix</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">26</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">27</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cpl</span></pre></td></tr><tr><td class="ln">28</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="instruction">de</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">29</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">hl</span></pre></td></tr><tr><td class="ln">30</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">31</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">ix</span></pre></td></tr><tr><td class="ln">32</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">VK_Loop</span></pre></td></tr><tr><td class="ln">33</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">35</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="string">"Keyboard handling: "</span></pre></td></tr><tr><td class="ln">36</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="none">$</span><span class="punctuation">-</span><span class="none">ReadKeyboard</span></pre></td></tr><tr><td class="ln">37</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="string">"\n"</span></pre></td></tr><tr><td class="ln">923</td><td><pre class="source"><span class="directive">#include</span><span class="whitespace"> </span><span class="string">"math.inc"</span><span class="whitespace">			</span><span class="comment">; Integer arithmetic</span></pre></td></tr><tr><td class="ln">4</td><td><pre class="source"><span class="label">Mul_B_SinDE:</span><span class="whitespace">		</span><span class="comment">; HL=B*sin(DE*PI/128)*127 (B is signed, D must be 0)</span></pre></td></tr><tr><td class="ln">5</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">Sin_Table</span></pre></td></tr><tr><td class="ln">6</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">7</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">8</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">9</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rla</span></pre></td></tr><tr><td class="ln">10</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sbc</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">11</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">12</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">13</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">$80</span></pre></td></tr><tr><td class="ln">14</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">af</span></pre></td></tr><tr><td class="ln">15</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">Mul_Signed_A_DE</span></pre></td></tr><tr><td class="ln">16</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">neg</span></pre></td></tr><tr><td class="ln">17</td><td><pre class="source"><span class="label">Mul_Signed_A_DE:</span></pre></td></tr><tr><td class="ln">18</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">call</span><span class="whitespace"> </span><span class="none">Mul_A_DE</span></pre></td></tr><tr><td class="ln">19</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">pop</span><span class="whitespace"> </span><span class="instruction">af</span></pre></td></tr><tr><td class="ln">20</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">21</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">xor</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">22</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">23</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">l</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">24</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">25</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sbc</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">26</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">h</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">27</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">29</td><td><pre class="source"><span class="label">Mul_A_DE:</span><span class="whitespace">		</span><span class="comment">; HL=A*DE, where A is unsigned and DE is signed, in less than 250 cycles!</span></pre></td></tr><tr><td class="ln">30</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">0</span><span class="whitespace">		</span><span class="comment">; A can be greater than 127 as opposed to signed multiplication.</span></pre></td></tr><tr><td class="ln">31</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rra</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">31</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">$</span><span class="punctuation">+</span><span class="none">4</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">31</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">31</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sla</span><span class="whitespace"> </span><span class="instruction">e</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">31</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rl</span><span class="whitespace"> </span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">32</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rra</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">32</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">$</span><span class="punctuation">+</span><span class="none">4</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">32</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">32</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sla</span><span class="whitespace"> </span><span class="instruction">e</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">32</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rl</span><span class="whitespace"> </span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">33</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rra</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">33</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">$</span><span class="punctuation">+</span><span class="none">4</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">33</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">33</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sla</span><span class="whitespace"> </span><span class="instruction">e</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">33</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rl</span><span class="whitespace"> </span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">34</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rra</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">34</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">$</span><span class="punctuation">+</span><span class="none">4</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">34</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">34</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sla</span><span class="whitespace"> </span><span class="instruction">e</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">34</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rl</span><span class="whitespace"> </span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">35</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rra</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">35</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">$</span><span class="punctuation">+</span><span class="none">4</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">35</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">35</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sla</span><span class="whitespace"> </span><span class="instruction">e</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">35</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rl</span><span class="whitespace"> </span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">36</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rra</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">36</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">$</span><span class="punctuation">+</span><span class="none">4</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">36</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">36</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sla</span><span class="whitespace"> </span><span class="instruction">e</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">36</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rl</span><span class="whitespace"> </span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">37</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rra</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">37</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">$</span><span class="punctuation">+</span><span class="none">4</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">37</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">38</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rra</span></pre></td></tr><tr><td class="ln">39</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">nc</span></pre></td></tr><tr><td class="ln">40</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span><span class="whitespace">		</span><span class="comment">; Faster than shifting and adding only once</span></pre></td></tr><tr><td class="ln">41</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">de</span></pre></td></tr><tr><td class="ln">42</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">44</td><td><pre class="source"><span class="label">Div_Signed_BC_D:</span><span class="whitespace">	</span><span class="comment">; Division with BC treated as a signed integer</span></pre></td></tr><tr><td class="ln">45</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">$f1</span><span class="whitespace">		</span><span class="comment">; RET is replaced with POP AF</span></pre></td></tr><tr><td class="ln">46</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">Div_Ret</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">47</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">48</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rla</span></pre></td></tr><tr><td class="ln">49</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">push</span><span class="whitespace"> </span><span class="instruction">af</span></pre></td></tr><tr><td class="ln">50</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">Div_BC_D</span></pre></td></tr><tr><td class="ln">51</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">xor</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">52</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">53</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">54</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">55</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sbc</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">56</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">57</td><td><pre class="source"><span class="label">Div_BC_D:</span><span class="whitespace">		</span><span class="comment">; HL=BC/D (unsigned, D&lt;128) - in less than 500 cycles!</span></pre></td></tr><tr><td class="ln">58</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">l</span><span class="punctuation">,</span><span class="instruction">c</span><span class="whitespace">			</span><span class="comment">; Can be called separately as well (unlike the core of signed</span></pre></td></tr><tr><td class="ln">59</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">h</span><span class="punctuation">,</span><span class="instruction">b</span><span class="whitespace">			</span><span class="comment">; multiplication above)</span></pre></td></tr><tr><td class="ln">60</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">xor</span><span class="whitespace"> </span><span class="instruction">a</span><span class="whitespace">			</span><span class="comment">; (This routine is simply _divHLbyA unrolled)</span></pre></td></tr><tr><td class="ln">61</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="none">3</span><span class="whitespace">			</span><span class="comment">; Saving on size a bit...</span></pre></td></tr><tr><td class="ln">62</td><td><pre class="source"><span class="label">Div_BC_D_Loop:</span></pre></td></tr><tr><td class="ln">63</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">63</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rla</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">63</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="instruction">d</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">63</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">$</span><span class="punctuation">+</span><span class="none">5</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">63</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="instruction">d</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">63</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">64</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">64</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rla</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">64</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="instruction">d</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">64</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">$</span><span class="punctuation">+</span><span class="none">5</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">64</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="instruction">d</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">64</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">65</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">65</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rla</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">65</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="instruction">d</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">65</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">$</span><span class="punctuation">+</span><span class="none">5</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">65</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="instruction">d</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">65</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">66</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">66</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rla</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">66</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="instruction">d</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">66</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">$</span><span class="punctuation">+</span><span class="none">5</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">66</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="instruction">d</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">66</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">67</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">67</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rla</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">67</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="instruction">d</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">67</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">$</span><span class="punctuation">+</span><span class="none">5</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">67</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="instruction">d</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">67</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">68</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">djnz</span><span class="whitespace"> </span><span class="none">Div_BC_D_Loop</span></pre></td></tr><tr><td class="ln">69</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">hl</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">69</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rla</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">69</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="instruction">d</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">69</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jp</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">$</span><span class="punctuation">+</span><span class="none">4</span><span class="whitespace"> </span><span class="seperator">\</span></pre></td></tr><tr><td class="ln">69</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">inc</span><span class="whitespace"> </span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">70</td><td><pre class="source"><span class="label">Div_Ret:</span></pre></td></tr><tr><td class="ln">71</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">72</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">$c9</span><span class="whitespace">		</span><span class="comment">; RET is restored</span></pre></td></tr><tr><td class="ln">73</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="punctuation">(</span><span class="none">Div_Ret</span><span class="punctuation">)</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">74</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span><span class="whitespace"> </span><span class="instruction">nc</span></pre></td></tr><tr><td class="ln">75</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">xor</span><span class="whitespace"> </span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">76</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sub</span><span class="whitespace"> </span><span class="instruction">l</span></pre></td></tr><tr><td class="ln">77</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">l</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">78</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">79</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">sbc</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">h</span></pre></td></tr><tr><td class="ln">80</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">h</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">81</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">83</td><td><pre class="source"><span class="label">ArcTan2_BC:</span><span class="whitespace">		</span><span class="comment">; Calculating the angle of the (B, C) vector, where B and C are</span></pre></td></tr><tr><td class="ln">84</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span><span class="whitespace">			</span><span class="comment">; 8-bit signed integers</span></pre></td></tr><tr><td class="ln">85</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">86</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="none">0</span><span class="whitespace">			</span><span class="comment">; E contains the angle to add to the result</span></pre></td></tr><tr><td class="ln">87</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rl</span><span class="whitespace"> </span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">88</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rra</span></pre></td></tr><tr><td class="ln">89</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">and</span><span class="whitespace"> </span><span class="none">$c0</span><span class="whitespace">		</span><span class="comment">; A7: sign of C; A6: sign of B</span></pre></td></tr><tr><td class="ln">90</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">AT2_LookUp</span><span class="whitespace">	</span><span class="comment">; Right bottom (+0)</span></pre></td></tr><tr><td class="ln">91</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">$80</span></pre></td></tr><tr><td class="ln">92</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">AT2_0</span><span class="whitespace">		</span><span class="comment">; Right top (+192)</span></pre></td></tr><tr><td class="ln">93</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">$40</span></pre></td></tr><tr><td class="ln">94</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">z</span><span class="punctuation">,</span><span class="none">AT2_180</span><span class="whitespace">		</span><span class="comment">; Left bottom (+64)</span></pre></td></tr><tr><td class="ln">95</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="none">128</span><span class="whitespace">		</span><span class="comment">; Left top (+128)</span></pre></td></tr><tr><td class="ln">96</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">97</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">neg</span></pre></td></tr><tr><td class="ln">98</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">99</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">100</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">neg</span></pre></td></tr><tr><td class="ln">101</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">102</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="none">AT2_LookUp</span></pre></td></tr><tr><td class="ln">103</td><td><pre class="source"><span class="label">AT2_0:</span></pre></td></tr><tr><td class="ln">104</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="none">192</span><span class="whitespace">		</span><span class="comment">; Rotating vector</span></pre></td></tr><tr><td class="ln">105</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">106</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">107</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">neg</span></pre></td></tr><tr><td class="ln">108</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">109</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">110</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="none">AT2_LookUp</span></pre></td></tr><tr><td class="ln">111</td><td><pre class="source"><span class="label">AT2_180:</span></pre></td></tr><tr><td class="ln">112</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">e</span><span class="punctuation">,</span><span class="none">64</span><span class="whitespace">		</span><span class="comment">; Rotating vector</span></pre></td></tr><tr><td class="ln">113</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">114</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">d</span><span class="punctuation">,</span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">115</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">neg</span></pre></td></tr><tr><td class="ln">116</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">117</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="instruction">d</span></pre></td></tr><tr><td class="ln">118</td><td><pre class="source"><span class="label">AT2_LookUp:</span></pre></td></tr><tr><td class="ln">119</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">b</span><span class="whitespace">			</span><span class="comment">; Shifting until both coordinates are within 4 bits</span></pre></td></tr><tr><td class="ln">120</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">16</span></pre></td></tr><tr><td class="ln">121</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">nc</span><span class="punctuation">,</span><span class="none">AT2_Shift</span></pre></td></tr><tr><td class="ln">122</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">123</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">cp</span><span class="whitespace"> </span><span class="none">16</span></pre></td></tr><tr><td class="ln">124</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="none">AT2_ShiftOK</span></pre></td></tr><tr><td class="ln">125</td><td><pre class="source"><span class="label">AT2_Shift:</span></pre></td></tr><tr><td class="ln">126</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">srl</span><span class="whitespace"> </span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">127</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">srl</span><span class="whitespace"> </span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">128</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">jr</span><span class="whitespace"> </span><span class="none">AT2_LookUp</span></pre></td></tr><tr><td class="ln">129</td><td><pre class="source"><span class="label">AT2_ShiftOK:</span></pre></td></tr><tr><td class="ln">130</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">c</span></pre></td></tr><tr><td class="ln">131</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rlca</span></pre></td></tr><tr><td class="ln">132</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rlca</span></pre></td></tr><tr><td class="ln">133</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rlca</span></pre></td></tr><tr><td class="ln">134</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">rlca</span></pre></td></tr><tr><td class="ln">135</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">or</span><span class="whitespace"> </span><span class="instruction">b</span></pre></td></tr><tr><td class="ln">136</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">c</span><span class="punctuation">,</span><span class="instruction">a</span></pre></td></tr><tr><td class="ln">137</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">b</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">138</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="none">Angle_Table</span></pre></td></tr><tr><td class="ln">139</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">hl</span><span class="punctuation">,</span><span class="instruction">bc</span></pre></td></tr><tr><td class="ln">140</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ld</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="punctuation">(</span><span class="instruction">hl</span><span class="punctuation">)</span></pre></td></tr><tr><td class="ln">141</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">add</span><span class="whitespace"> </span><span class="instruction">a</span><span class="punctuation">,</span><span class="instruction">e</span></pre></td></tr><tr><td class="ln">142</td><td><pre class="source"><span class="whitespace"> </span><span class="instruction">ret</span></pre></td></tr><tr><td class="ln">144</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="string">"Arithmetics: "</span></pre></td></tr><tr><td class="ln">145</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="none">$</span><span class="punctuation">-</span><span class="none">Mul_B_SinDE</span></pre></td></tr><tr><td class="ln">146</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="string">"\n"</span></pre></td></tr><tr><td class="ln">927</td><td><pre class="source"><span class="label">NonExecutable:</span></pre></td></tr><tr><td class="ln">929</td><td><pre class="source"><span class="directive">#include</span><span class="whitespace"> </span><span class="string">"miscdata.inc"</span><span class="whitespace">		</span><span class="comment">; Data needed by various libraries</span></pre></td></tr><tr><td class="ln">3</td><td><pre class="source"><span class="label">KeyPressed:</span><span class="whitespace">		</span><span class="comment">; bit:	7	6	5	4	3	2	1	0</span></pre></td></tr><tr><td class="ln">4</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">255</span><span class="whitespace">		</span><span class="comment">;					up	right	left	down</span></pre></td></tr><tr><td class="ln">5</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">255</span><span class="whitespace">		</span><span class="comment">;		clear	^	/	*	-	+	enter</span></pre></td></tr><tr><td class="ln">6</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">255</span><span class="whitespace">		</span><span class="comment">;		vars	tan	)	9	6	3	(-)</span></pre></td></tr><tr><td class="ln">7</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">255</span><span class="whitespace">		</span><span class="comment">;	stat	prgm	cos	(	8	5	2	.</span></pre></td></tr><tr><td class="ln">8</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">255</span><span class="whitespace">		</span><span class="comment">;	X	matrx	sin	,	7	4	1	0</span></pre></td></tr><tr><td class="ln">9</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">255</span><span class="whitespace">		</span><span class="comment">;	alpha	math	x^-1	x^2	log	ln	sto</span></pre></td></tr><tr><td class="ln">10</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">255</span><span class="whitespace">		</span><span class="comment">;	del	mode	2nd	y=	window	zoom	trace	graph</span></pre></td></tr><tr><td class="ln">12</td><td><pre class="source"><span class="label">KeyState:</span><span class="whitespace">		</span><span class="comment">; Auxiliary array to validate keys</span></pre></td></tr><tr><td class="ln">13</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">0</span><span class="punctuation">,</span><span class="none">0</span><span class="punctuation">,</span><span class="none">0</span><span class="punctuation">,</span><span class="none">0</span><span class="punctuation">,</span><span class="none">0</span><span class="punctuation">,</span><span class="none">0</span><span class="punctuation">,</span><span class="none">0</span></pre></td></tr><tr><td class="ln">15</td><td><pre class="source"><span class="label">ValidKey:</span><span class="whitespace">		</span><span class="comment">; Valid keys: keys pressed since the last check</span></pre></td></tr><tr><td class="ln">16</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">255</span><span class="punctuation">,</span><span class="none">255</span><span class="punctuation">,</span><span class="none">255</span><span class="punctuation">,</span><span class="none">255</span><span class="punctuation">,</span><span class="none">255</span><span class="punctuation">,</span><span class="none">255</span><span class="punctuation">,</span><span class="none">255</span></pre></td></tr><tr><td class="ln">20</td><td><pre class="source"><span class="label">Angle_Table:</span><span class="whitespace">		</span><span class="comment">; Angles used by ArcTan2</span></pre></td></tr><tr><td class="ln">21</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">96</span><span class="punctuation">,</span><span class="none">64</span><span class="punctuation">,</span><span class="none">64</span><span class="punctuation">,</span><span class="none">64</span><span class="punctuation">,</span><span class="none">64</span><span class="punctuation">,</span><span class="none">64</span><span class="punctuation">,</span><span class="none">64</span><span class="punctuation">,</span><span class="none">64</span><span class="punctuation">,</span><span class="none">64</span><span class="punctuation">,</span><span class="none">64</span><span class="punctuation">,</span><span class="none">64</span><span class="punctuation">,</span><span class="none">64</span><span class="punctuation">,</span><span class="none">64</span><span class="punctuation">,</span><span class="none">64</span><span class="punctuation">,</span><span class="none">64</span><span class="punctuation">,</span><span class="none">64</span></pre></td></tr><tr><td class="ln">22</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">128</span><span class="punctuation">,</span><span class="none">96</span><span class="punctuation">,</span><span class="none">83</span><span class="punctuation">,</span><span class="none">77</span><span class="punctuation">,</span><span class="none">74</span><span class="punctuation">,</span><span class="none">72</span><span class="punctuation">,</span><span class="none">71</span><span class="punctuation">,</span><span class="none">70</span><span class="punctuation">,</span><span class="none">69</span><span class="punctuation">,</span><span class="none">69</span><span class="punctuation">,</span><span class="none">68</span><span class="punctuation">,</span><span class="none">68</span><span class="punctuation">,</span><span class="none">67</span><span class="punctuation">,</span><span class="none">67</span><span class="punctuation">,</span><span class="none">67</span><span class="punctuation">,</span><span class="none">67</span></pre></td></tr><tr><td class="ln">23</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">128</span><span class="punctuation">,</span><span class="none">109</span><span class="punctuation">,</span><span class="none">96</span><span class="punctuation">,</span><span class="none">88</span><span class="punctuation">,</span><span class="none">83</span><span class="punctuation">,</span><span class="none">80</span><span class="punctuation">,</span><span class="none">77</span><span class="punctuation">,</span><span class="none">75</span><span class="punctuation">,</span><span class="none">74</span><span class="punctuation">,</span><span class="none">73</span><span class="punctuation">,</span><span class="none">72</span><span class="punctuation">,</span><span class="none">71</span><span class="punctuation">,</span><span class="none">71</span><span class="punctuation">,</span><span class="none">70</span><span class="punctuation">,</span><span class="none">70</span><span class="punctuation">,</span><span class="none">69</span></pre></td></tr><tr><td class="ln">24</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">128</span><span class="punctuation">,</span><span class="none">115</span><span class="punctuation">,</span><span class="none">104</span><span class="punctuation">,</span><span class="none">96</span><span class="punctuation">,</span><span class="none">90</span><span class="punctuation">,</span><span class="none">86</span><span class="punctuation">,</span><span class="none">83</span><span class="punctuation">,</span><span class="none">80</span><span class="punctuation">,</span><span class="none">79</span><span class="punctuation">,</span><span class="none">77</span><span class="punctuation">,</span><span class="none">76</span><span class="punctuation">,</span><span class="none">75</span><span class="punctuation">,</span><span class="none">74</span><span class="punctuation">,</span><span class="none">73</span><span class="punctuation">,</span><span class="none">73</span><span class="punctuation">,</span><span class="none">72</span></pre></td></tr><tr><td class="ln">25</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">128</span><span class="punctuation">,</span><span class="none">118</span><span class="punctuation">,</span><span class="none">109</span><span class="punctuation">,</span><span class="none">102</span><span class="punctuation">,</span><span class="none">96</span><span class="punctuation">,</span><span class="none">91</span><span class="punctuation">,</span><span class="none">88</span><span class="punctuation">,</span><span class="none">85</span><span class="punctuation">,</span><span class="none">83</span><span class="punctuation">,</span><span class="none">81</span><span class="punctuation">,</span><span class="none">80</span><span class="punctuation">,</span><span class="none">78</span><span class="punctuation">,</span><span class="none">77</span><span class="punctuation">,</span><span class="none">76</span><span class="punctuation">,</span><span class="none">75</span><span class="punctuation">,</span><span class="none">75</span></pre></td></tr><tr><td class="ln">26</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">128</span><span class="punctuation">,</span><span class="none">120</span><span class="punctuation">,</span><span class="none">112</span><span class="punctuation">,</span><span class="none">106</span><span class="punctuation">,</span><span class="none">101</span><span class="punctuation">,</span><span class="none">96</span><span class="punctuation">,</span><span class="none">92</span><span class="punctuation">,</span><span class="none">89</span><span class="punctuation">,</span><span class="none">87</span><span class="punctuation">,</span><span class="none">85</span><span class="punctuation">,</span><span class="none">83</span><span class="punctuation">,</span><span class="none">81</span><span class="punctuation">,</span><span class="none">80</span><span class="punctuation">,</span><span class="none">79</span><span class="punctuation">,</span><span class="none">78</span><span class="punctuation">,</span><span class="none">77</span></pre></td></tr><tr><td class="ln">27</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">128</span><span class="punctuation">,</span><span class="none">121</span><span class="punctuation">,</span><span class="none">115</span><span class="punctuation">,</span><span class="none">109</span><span class="punctuation">,</span><span class="none">104</span><span class="punctuation">,</span><span class="none">100</span><span class="punctuation">,</span><span class="none">96</span><span class="punctuation">,</span><span class="none">93</span><span class="punctuation">,</span><span class="none">90</span><span class="punctuation">,</span><span class="none">88</span><span class="punctuation">,</span><span class="none">86</span><span class="punctuation">,</span><span class="none">84</span><span class="punctuation">,</span><span class="none">83</span><span class="punctuation">,</span><span class="none">82</span><span class="punctuation">,</span><span class="none">80</span><span class="punctuation">,</span><span class="none">80</span></pre></td></tr><tr><td class="ln">28</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">128</span><span class="punctuation">,</span><span class="none">122</span><span class="punctuation">,</span><span class="none">117</span><span class="punctuation">,</span><span class="none">112</span><span class="punctuation">,</span><span class="none">107</span><span class="punctuation">,</span><span class="none">103</span><span class="punctuation">,</span><span class="none">99</span><span class="punctuation">,</span><span class="none">96</span><span class="punctuation">,</span><span class="none">93</span><span class="punctuation">,</span><span class="none">91</span><span class="punctuation">,</span><span class="none">89</span><span class="punctuation">,</span><span class="none">87</span><span class="punctuation">,</span><span class="none">86</span><span class="punctuation">,</span><span class="none">84</span><span class="punctuation">,</span><span class="none">83</span><span class="punctuation">,</span><span class="none">82</span></pre></td></tr><tr><td class="ln">29</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">128</span><span class="punctuation">,</span><span class="none">123</span><span class="punctuation">,</span><span class="none">118</span><span class="punctuation">,</span><span class="none">113</span><span class="punctuation">,</span><span class="none">109</span><span class="punctuation">,</span><span class="none">105</span><span class="punctuation">,</span><span class="none">102</span><span class="punctuation">,</span><span class="none">99</span><span class="punctuation">,</span><span class="none">96</span><span class="punctuation">,</span><span class="none">94</span><span class="punctuation">,</span><span class="none">91</span><span class="punctuation">,</span><span class="none">90</span><span class="punctuation">,</span><span class="none">88</span><span class="punctuation">,</span><span class="none">86</span><span class="punctuation">,</span><span class="none">85</span><span class="punctuation">,</span><span class="none">84</span></pre></td></tr><tr><td class="ln">30</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">128</span><span class="punctuation">,</span><span class="none">123</span><span class="punctuation">,</span><span class="none">119</span><span class="punctuation">,</span><span class="none">115</span><span class="punctuation">,</span><span class="none">111</span><span class="punctuation">,</span><span class="none">107</span><span class="punctuation">,</span><span class="none">104</span><span class="punctuation">,</span><span class="none">101</span><span class="punctuation">,</span><span class="none">98</span><span class="punctuation">,</span><span class="none">96</span><span class="punctuation">,</span><span class="none">94</span><span class="punctuation">,</span><span class="none">92</span><span class="punctuation">,</span><span class="none">90</span><span class="punctuation">,</span><span class="none">89</span><span class="punctuation">,</span><span class="none">87</span><span class="punctuation">,</span><span class="none">86</span></pre></td></tr><tr><td class="ln">31</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">128</span><span class="punctuation">,</span><span class="none">124</span><span class="punctuation">,</span><span class="none">120</span><span class="punctuation">,</span><span class="none">116</span><span class="punctuation">,</span><span class="none">112</span><span class="punctuation">,</span><span class="none">109</span><span class="punctuation">,</span><span class="none">106</span><span class="punctuation">,</span><span class="none">103</span><span class="punctuation">,</span><span class="none">101</span><span class="punctuation">,</span><span class="none">98</span><span class="punctuation">,</span><span class="none">96</span><span class="punctuation">,</span><span class="none">94</span><span class="punctuation">,</span><span class="none">92</span><span class="punctuation">,</span><span class="none">91</span><span class="punctuation">,</span><span class="none">89</span><span class="punctuation">,</span><span class="none">88</span></pre></td></tr><tr><td class="ln">32</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">128</span><span class="punctuation">,</span><span class="none">124</span><span class="punctuation">,</span><span class="none">121</span><span class="punctuation">,</span><span class="none">117</span><span class="punctuation">,</span><span class="none">114</span><span class="punctuation">,</span><span class="none">111</span><span class="punctuation">,</span><span class="none">108</span><span class="punctuation">,</span><span class="none">105</span><span class="punctuation">,</span><span class="none">102</span><span class="punctuation">,</span><span class="none">100</span><span class="punctuation">,</span><span class="none">98</span><span class="punctuation">,</span><span class="none">96</span><span class="punctuation">,</span><span class="none">94</span><span class="punctuation">,</span><span class="none">93</span><span class="punctuation">,</span><span class="none">91</span><span class="punctuation">,</span><span class="none">90</span></pre></td></tr><tr><td class="ln">33</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">128</span><span class="punctuation">,</span><span class="none">125</span><span class="punctuation">,</span><span class="none">121</span><span class="punctuation">,</span><span class="none">118</span><span class="punctuation">,</span><span class="none">115</span><span class="punctuation">,</span><span class="none">112</span><span class="punctuation">,</span><span class="none">109</span><span class="punctuation">,</span><span class="none">106</span><span class="punctuation">,</span><span class="none">104</span><span class="punctuation">,</span><span class="none">102</span><span class="punctuation">,</span><span class="none">100</span><span class="punctuation">,</span><span class="none">98</span><span class="punctuation">,</span><span class="none">96</span><span class="punctuation">,</span><span class="none">94</span><span class="punctuation">,</span><span class="none">93</span><span class="punctuation">,</span><span class="none">91</span></pre></td></tr><tr><td class="ln">34</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">128</span><span class="punctuation">,</span><span class="none">125</span><span class="punctuation">,</span><span class="none">122</span><span class="punctuation">,</span><span class="none">119</span><span class="punctuation">,</span><span class="none">116</span><span class="punctuation">,</span><span class="none">113</span><span class="punctuation">,</span><span class="none">110</span><span class="punctuation">,</span><span class="none">108</span><span class="punctuation">,</span><span class="none">106</span><span class="punctuation">,</span><span class="none">103</span><span class="punctuation">,</span><span class="none">101</span><span class="punctuation">,</span><span class="none">99</span><span class="punctuation">,</span><span class="none">98</span><span class="punctuation">,</span><span class="none">96</span><span class="punctuation">,</span><span class="none">94</span><span class="punctuation">,</span><span class="none">93</span></pre></td></tr><tr><td class="ln">35</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">128</span><span class="punctuation">,</span><span class="none">125</span><span class="punctuation">,</span><span class="none">122</span><span class="punctuation">,</span><span class="none">119</span><span class="punctuation">,</span><span class="none">117</span><span class="punctuation">,</span><span class="none">114</span><span class="punctuation">,</span><span class="none">112</span><span class="punctuation">,</span><span class="none">109</span><span class="punctuation">,</span><span class="none">107</span><span class="punctuation">,</span><span class="none">105</span><span class="punctuation">,</span><span class="none">103</span><span class="punctuation">,</span><span class="none">101</span><span class="punctuation">,</span><span class="none">99</span><span class="punctuation">,</span><span class="none">98</span><span class="punctuation">,</span><span class="none">96</span><span class="punctuation">,</span><span class="none">95</span></pre></td></tr><tr><td class="ln">36</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">128</span><span class="punctuation">,</span><span class="none">125</span><span class="punctuation">,</span><span class="none">123</span><span class="punctuation">,</span><span class="none">120</span><span class="punctuation">,</span><span class="none">117</span><span class="punctuation">,</span><span class="none">115</span><span class="punctuation">,</span><span class="none">112</span><span class="punctuation">,</span><span class="none">110</span><span class="punctuation">,</span><span class="none">108</span><span class="punctuation">,</span><span class="none">106</span><span class="punctuation">,</span><span class="none">104</span><span class="punctuation">,</span><span class="none">102</span><span class="punctuation">,</span><span class="none">101</span><span class="punctuation">,</span><span class="none">99</span><span class="punctuation">,</span><span class="none">97</span><span class="punctuation">,</span><span class="none">96</span></pre></td></tr><tr><td class="ln">38</td><td><pre class="source"><span class="label">Sin_Table_Source:</span><span class="whitespace">		</span><span class="comment">; The values of 127*sin(x*PI/128), x: 0-63</span></pre></td></tr><tr><td class="ln">39</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">0</span><span class="punctuation">,</span><span class="none">3</span><span class="punctuation">,</span><span class="none">6</span><span class="punctuation">,</span><span class="none">9</span><span class="punctuation">,</span><span class="none">12</span><span class="punctuation">,</span><span class="none">16</span><span class="punctuation">,</span><span class="none">19</span><span class="punctuation">,</span><span class="none">22</span><span class="punctuation">,</span><span class="none">25</span><span class="punctuation">,</span><span class="none">28</span><span class="punctuation">,</span><span class="none">31</span><span class="punctuation">,</span><span class="none">34</span><span class="punctuation">,</span><span class="none">37</span><span class="punctuation">,</span><span class="none">40</span><span class="punctuation">,</span><span class="none">43</span><span class="punctuation">,</span><span class="none">46</span></pre></td></tr><tr><td class="ln">40</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">49</span><span class="punctuation">,</span><span class="none">51</span><span class="punctuation">,</span><span class="none">54</span><span class="punctuation">,</span><span class="none">57</span><span class="punctuation">,</span><span class="none">60</span><span class="punctuation">,</span><span class="none">63</span><span class="punctuation">,</span><span class="none">65</span><span class="punctuation">,</span><span class="none">68</span><span class="punctuation">,</span><span class="none">71</span><span class="punctuation">,</span><span class="none">73</span><span class="punctuation">,</span><span class="none">76</span><span class="punctuation">,</span><span class="none">78</span><span class="punctuation">,</span><span class="none">81</span><span class="punctuation">,</span><span class="none">83</span><span class="punctuation">,</span><span class="none">85</span><span class="punctuation">,</span><span class="none">88</span></pre></td></tr><tr><td class="ln">41</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">90</span><span class="punctuation">,</span><span class="none">92</span><span class="punctuation">,</span><span class="none">94</span><span class="punctuation">,</span><span class="none">96</span><span class="punctuation">,</span><span class="none">98</span><span class="punctuation">,</span><span class="none">100</span><span class="punctuation">,</span><span class="none">102</span><span class="punctuation">,</span><span class="none">104</span><span class="punctuation">,</span><span class="none">106</span><span class="punctuation">,</span><span class="none">107</span><span class="punctuation">,</span><span class="none">109</span><span class="punctuation">,</span><span class="none">111</span><span class="punctuation">,</span><span class="none">112</span><span class="punctuation">,</span><span class="none">113</span><span class="punctuation">,</span><span class="none">115</span><span class="punctuation">,</span><span class="none">116</span></pre></td></tr><tr><td class="ln">42</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">117</span><span class="punctuation">,</span><span class="none">118</span><span class="punctuation">,</span><span class="none">120</span><span class="punctuation">,</span><span class="none">121</span><span class="punctuation">,</span><span class="none">122</span><span class="punctuation">,</span><span class="none">122</span><span class="punctuation">,</span><span class="none">123</span><span class="punctuation">,</span><span class="none">124</span><span class="punctuation">,</span><span class="none">125</span><span class="punctuation">,</span><span class="none">125</span><span class="punctuation">,</span><span class="none">126</span><span class="punctuation">,</span><span class="none">126</span><span class="punctuation">,</span><span class="none">126</span><span class="punctuation">,</span><span class="none">127</span><span class="punctuation">,</span><span class="none">127</span><span class="punctuation">,</span><span class="none">127</span></pre></td></tr><tr><td class="ln">44</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="string">"Misc data: "</span></pre></td></tr><tr><td class="ln">45</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="none">$</span><span class="punctuation">-</span><span class="none">KeyPressed</span></pre></td></tr><tr><td class="ln">46</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="string">"\n"</span></pre></td></tr><tr><td class="ln">930</td><td><pre class="source"><span class="directive">#include</span><span class="whitespace"> </span><span class="string">"sprites.inc"</span><span class="whitespace">		</span><span class="comment">; Sprites used in the program except for table elements</span></pre></td></tr><tr><td class="ln">1</td><td><pre class="source"><span class="label">Ball:</span></pre></td></tr><tr><td class="ln">2</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%01110000</span></pre></td></tr><tr><td class="ln">3</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11111000</span></pre></td></tr><tr><td class="ln">4</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11111000</span></pre></td></tr><tr><td class="ln">5</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11111000</span></pre></td></tr><tr><td class="ln">6</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%01110000</span></pre></td></tr><tr><td class="ln">7</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00000000</span></pre></td></tr><tr><td class="ln">8</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00000000</span></pre></td></tr><tr><td class="ln">9</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00000000</span></pre></td></tr><tr><td class="ln">11</td><td><pre class="source"><span class="label">BallWhite:</span></pre></td></tr><tr><td class="ln">12</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00000000</span></pre></td></tr><tr><td class="ln">13</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%01100000</span></pre></td></tr><tr><td class="ln">14</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%01000000</span></pre></td></tr><tr><td class="ln">15</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00000000</span></pre></td></tr><tr><td class="ln">16</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00000000</span></pre></td></tr><tr><td class="ln">17</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00000000</span></pre></td></tr><tr><td class="ln">18</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00000000</span></pre></td></tr><tr><td class="ln">19</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00000000</span></pre></td></tr><tr><td class="ln">21</td><td><pre class="source"><span class="label">Numbers:</span></pre></td></tr><tr><td class="ln">22</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11110000</span></pre></td></tr><tr><td class="ln">23</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%10010000</span></pre></td></tr><tr><td class="ln">24</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%10110000</span></pre></td></tr><tr><td class="ln">25</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%10110000</span></pre></td></tr><tr><td class="ln">26</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11110000</span></pre></td></tr><tr><td class="ln">28</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00010000</span></pre></td></tr><tr><td class="ln">29</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00010000</span></pre></td></tr><tr><td class="ln">30</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00110000</span></pre></td></tr><tr><td class="ln">31</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00110000</span></pre></td></tr><tr><td class="ln">32</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00110000</span></pre></td></tr><tr><td class="ln">34</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11110000</span></pre></td></tr><tr><td class="ln">35</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00010000</span></pre></td></tr><tr><td class="ln">36</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11110000</span></pre></td></tr><tr><td class="ln">37</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11000000</span></pre></td></tr><tr><td class="ln">38</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11110000</span></pre></td></tr><tr><td class="ln">40</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11110000</span></pre></td></tr><tr><td class="ln">41</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00010000</span></pre></td></tr><tr><td class="ln">42</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11110000</span></pre></td></tr><tr><td class="ln">43</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00110000</span></pre></td></tr><tr><td class="ln">44</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11110000</span></pre></td></tr><tr><td class="ln">46</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%10010000</span></pre></td></tr><tr><td class="ln">47</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%10010000</span></pre></td></tr><tr><td class="ln">48</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11110000</span></pre></td></tr><tr><td class="ln">49</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00110000</span></pre></td></tr><tr><td class="ln">50</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00110000</span></pre></td></tr><tr><td class="ln">52</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11110000</span></pre></td></tr><tr><td class="ln">53</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%10000000</span></pre></td></tr><tr><td class="ln">54</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11110000</span></pre></td></tr><tr><td class="ln">55</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00110000</span></pre></td></tr><tr><td class="ln">56</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11110000</span></pre></td></tr><tr><td class="ln">58</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11110000</span></pre></td></tr><tr><td class="ln">59</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%10000000</span></pre></td></tr><tr><td class="ln">60</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11110000</span></pre></td></tr><tr><td class="ln">61</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11010000</span></pre></td></tr><tr><td class="ln">62</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11110000</span></pre></td></tr><tr><td class="ln">64</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11110000</span></pre></td></tr><tr><td class="ln">65</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00010000</span></pre></td></tr><tr><td class="ln">66</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00110000</span></pre></td></tr><tr><td class="ln">67</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00110000</span></pre></td></tr><tr><td class="ln">68</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00110000</span></pre></td></tr><tr><td class="ln">70</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11110000</span></pre></td></tr><tr><td class="ln">71</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%10010000</span></pre></td></tr><tr><td class="ln">72</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11110000</span></pre></td></tr><tr><td class="ln">73</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%10110000</span></pre></td></tr><tr><td class="ln">74</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11110000</span></pre></td></tr><tr><td class="ln">76</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11110000</span></pre></td></tr><tr><td class="ln">77</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%10010000</span></pre></td></tr><tr><td class="ln">78</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11110000</span></pre></td></tr><tr><td class="ln">79</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00110000</span></pre></td></tr><tr><td class="ln">80</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11110000</span></pre></td></tr><tr><td class="ln">82</td><td><pre class="source"><span class="label">LeftFlipperSprites:</span><span class="whitespace">		</span><span class="comment">; Left flipper frames</span></pre></td></tr><tr><td class="ln">83</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span><span class="whitespace">			</span><span class="comment">; Flipper frame 0 (down)</span></pre></td></tr><tr><td class="ln">84</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span></pre></td></tr><tr><td class="ln">85</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$E0</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span></pre></td></tr><tr><td class="ln">86</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$9C</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span></pre></td></tr><tr><td class="ln">87</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$87</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span></pre></td></tr><tr><td class="ln">88</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$63</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$C0</span></pre></td></tr><tr><td class="ln">89</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$1F</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$C0</span></pre></td></tr><tr><td class="ln">90</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$01</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$80</span></pre></td></tr><tr><td class="ln">91</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span><span class="whitespace">			</span><span class="comment">; Flipper frame 1</span></pre></td></tr><tr><td class="ln">92</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span></pre></td></tr><tr><td class="ln">93</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$F0</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span></pre></td></tr><tr><td class="ln">94</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$8E</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span></pre></td></tr><tr><td class="ln">95</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$87</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$C0</span></pre></td></tr><tr><td class="ln">96</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$7B</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$C0</span></pre></td></tr><tr><td class="ln">97</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$07</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$80</span></pre></td></tr><tr><td class="ln">98</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span></pre></td></tr><tr><td class="ln">99</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span><span class="whitespace">			</span><span class="comment">; Flipper frame 2</span></pre></td></tr><tr><td class="ln">100</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span></pre></td></tr><tr><td class="ln">101</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$FF</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$E0</span></pre></td></tr><tr><td class="ln">102</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$83</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$E0</span></pre></td></tr><tr><td class="ln">103</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$87</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$E0</span></pre></td></tr><tr><td class="ln">104</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$78</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span></pre></td></tr><tr><td class="ln">105</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span></pre></td></tr><tr><td class="ln">106</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span></pre></td></tr><tr><td class="ln">107</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span><span class="whitespace">			</span><span class="comment">; Flipper frame 3</span></pre></td></tr><tr><td class="ln">108</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$07</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$80</span></pre></td></tr><tr><td class="ln">109</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$FB</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$C0</span></pre></td></tr><tr><td class="ln">110</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$87</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$C0</span></pre></td></tr><tr><td class="ln">111</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$9E</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span></pre></td></tr><tr><td class="ln">112</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$60</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span></pre></td></tr><tr><td class="ln">113</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span></pre></td></tr><tr><td class="ln">114</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span></pre></td></tr><tr><td class="ln">115</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$01</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$80</span><span class="whitespace">			</span><span class="comment">; Flipper frame 4 (up)</span></pre></td></tr><tr><td class="ln">116</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$1F</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$C0</span></pre></td></tr><tr><td class="ln">117</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$E3</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$C0</span></pre></td></tr><tr><td class="ln">118</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$87</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span></pre></td></tr><tr><td class="ln">119</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$9C</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span></pre></td></tr><tr><td class="ln">120</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$60</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span></pre></td></tr><tr><td class="ln">121</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span></pre></td></tr><tr><td class="ln">122</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span></pre></td></tr><tr><td class="ln">124</td><td><pre class="source"><span class="label">Spring:</span></pre></td></tr><tr><td class="ln">125</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11111111</span></pre></td></tr><tr><td class="ln">126</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%10001111</span></pre></td></tr><tr><td class="ln">127</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%01011101</span></pre></td></tr><tr><td class="ln">128</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%01011101</span></pre></td></tr><tr><td class="ln">129</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%01011101</span></pre></td></tr><tr><td class="ln">130</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%01011101</span></pre></td></tr><tr><td class="ln">131</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11011111</span></pre></td></tr><tr><td class="ln">133</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="string">"Sprites: "</span></pre></td></tr><tr><td class="ln">134</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="none">$</span><span class="punctuation">-</span><span class="none">Ball</span></pre></td></tr><tr><td class="ln">135</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="string">"\n"</span></pre></td></tr><tr><td class="ln">932</td><td><pre class="source"><span class="label">MainMenu:</span></pre></td></tr><tr><td class="ln">933</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">3</span></pre></td></tr><tr><td class="ln">934</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.word</span><span class="whitespace"> </span><span class="none">Game</span></pre></td></tr><tr><td class="ln">935</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.word</span><span class="whitespace"> </span><span class="none">DisplayHighScores</span></pre></td></tr><tr><td class="ln">936</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.word</span><span class="whitespace"> </span><span class="none">Exit</span></pre></td></tr><tr><td class="ln">937</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">4</span></pre></td></tr><tr><td class="ln">938</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11111011</span><span class="punctuation">,</span><span class="none">%11101111</span><span class="punctuation">,</span><span class="none">%10111110</span><span class="punctuation">,</span><span class="none">%11111000</span></pre></td></tr><tr><td class="ln">939</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11000000</span><span class="punctuation">,</span><span class="none">%11001100</span><span class="punctuation">,</span><span class="none">%10110010</span><span class="punctuation">,</span><span class="none">%00110000</span></pre></td></tr><tr><td class="ln">940</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11111000</span><span class="punctuation">,</span><span class="none">%11001111</span><span class="punctuation">,</span><span class="none">%10111100</span><span class="punctuation">,</span><span class="none">%00110000</span></pre></td></tr><tr><td class="ln">941</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00011000</span><span class="punctuation">,</span><span class="none">%11001100</span><span class="punctuation">,</span><span class="none">%10110010</span><span class="punctuation">,</span><span class="none">%00110000</span></pre></td></tr><tr><td class="ln">942</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11111000</span><span class="punctuation">,</span><span class="none">%11001100</span><span class="punctuation">,</span><span class="none">%10110010</span><span class="punctuation">,</span><span class="none">%00110000</span></pre></td></tr><tr><td class="ln">943</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">8</span></pre></td></tr><tr><td class="ln">944</td><td><pre class="source"><span class="label">HighScoreLabel:</span></pre></td></tr><tr><td class="ln">945</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11001011</span><span class="punctuation">,</span><span class="none">%01111101</span><span class="punctuation">,</span><span class="none">%10010000</span><span class="punctuation">,</span><span class="none">%11111011</span><span class="punctuation">,</span><span class="none">%11101111</span><span class="punctuation">,</span><span class="none">%10111110</span><span class="punctuation">,</span><span class="none">%11111011</span><span class="punctuation">,</span><span class="none">%11100000</span></pre></td></tr><tr><td class="ln">946</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11001011</span><span class="punctuation">,</span><span class="none">%01100001</span><span class="punctuation">,</span><span class="none">%10010000</span><span class="punctuation">,</span><span class="none">%11000011</span><span class="punctuation">,</span><span class="none">%00001100</span><span class="punctuation">,</span><span class="none">%10110010</span><span class="punctuation">,</span><span class="none">%11000011</span><span class="punctuation">,</span><span class="none">%00000000</span></pre></td></tr><tr><td class="ln">947</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11111011</span><span class="punctuation">,</span><span class="none">%01101101</span><span class="punctuation">,</span><span class="none">%11110000</span><span class="punctuation">,</span><span class="none">%11111011</span><span class="punctuation">,</span><span class="none">%00001100</span><span class="punctuation">,</span><span class="none">%10111100</span><span class="punctuation">,</span><span class="none">%11110011</span><span class="punctuation">,</span><span class="none">%11100000</span></pre></td></tr><tr><td class="ln">948</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11001011</span><span class="punctuation">,</span><span class="none">%01100101</span><span class="punctuation">,</span><span class="none">%10010000</span><span class="punctuation">,</span><span class="none">%00011011</span><span class="punctuation">,</span><span class="none">%00001100</span><span class="punctuation">,</span><span class="none">%10110010</span><span class="punctuation">,</span><span class="none">%11000000</span><span class="punctuation">,</span><span class="none">%01100000</span></pre></td></tr><tr><td class="ln">949</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11001011</span><span class="punctuation">,</span><span class="none">%01111101</span><span class="punctuation">,</span><span class="none">%10010000</span><span class="punctuation">,</span><span class="none">%11111011</span><span class="punctuation">,</span><span class="none">%11101111</span><span class="punctuation">,</span><span class="none">%10110010</span><span class="punctuation">,</span><span class="none">%11111011</span><span class="punctuation">,</span><span class="none">%11100000</span></pre></td></tr><tr><td class="ln">950</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">3</span></pre></td></tr><tr><td class="ln">951</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11111011</span><span class="punctuation">,</span><span class="none">%00101101</span><span class="punctuation">,</span><span class="none">%11110000</span></pre></td></tr><tr><td class="ln">952</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11001011</span><span class="punctuation">,</span><span class="none">%00101100</span><span class="punctuation">,</span><span class="none">%01100000</span></pre></td></tr><tr><td class="ln">953</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11001011</span><span class="punctuation">,</span><span class="none">%00101100</span><span class="punctuation">,</span><span class="none">%01100000</span></pre></td></tr><tr><td class="ln">954</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11011011</span><span class="punctuation">,</span><span class="none">%00101100</span><span class="punctuation">,</span><span class="none">%01100000</span></pre></td></tr><tr><td class="ln">955</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%11111011</span><span class="punctuation">,</span><span class="none">%11101100</span><span class="punctuation">,</span><span class="none">%01100000</span></pre></td></tr><tr><td class="ln">957</td><td><pre class="source"><span class="label">FlipperAngles:</span><span class="whitespace">					</span><span class="comment">; Surface angles for the left flipper frames</span></pre></td></tr><tr><td class="ln">958</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">17</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">13</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">1</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="punctuation">-</span><span class="none">12</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="punctuation">-</span><span class="none">16</span><span class="whitespace">		</span><span class="comment">; Right flipper angles: these*(-1)</span></pre></td></tr><tr><td class="ln">960</td><td><pre class="source"><span class="label">EventLengths:</span><span class="whitespace">					</span><span class="comment">; The length in bytes of the parametres of each type of event</span></pre></td></tr><tr><td class="ln">961</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">4</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">0</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">2</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">2</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">1</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">1</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">2</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">1</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">2</span></pre></td></tr><tr><td class="ln">963</td><td><pre class="source"><span class="label">PausedPicture:</span></pre></td></tr><tr><td class="ln">964</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00000000</span><span class="punctuation">,</span><span class="none">%00000000</span><span class="punctuation">,</span><span class="none">%00000000</span><span class="punctuation">,</span><span class="none">%00000000</span></pre></td></tr><tr><td class="ln">965</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%01111101</span><span class="punctuation">,</span><span class="none">%11110110</span><span class="punctuation">,</span><span class="none">%01011111</span><span class="punctuation">,</span><span class="none">%01111100</span></pre></td></tr><tr><td class="ln">966</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%01100101</span><span class="punctuation">,</span><span class="none">%10010110</span><span class="punctuation">,</span><span class="none">%01011000</span><span class="punctuation">,</span><span class="none">%01100000</span></pre></td></tr><tr><td class="ln">967</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%01111101</span><span class="punctuation">,</span><span class="none">%11110110</span><span class="punctuation">,</span><span class="none">%01011111</span><span class="punctuation">,</span><span class="none">%01111000</span></pre></td></tr><tr><td class="ln">968</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%01100001</span><span class="punctuation">,</span><span class="none">%10010110</span><span class="punctuation">,</span><span class="none">%01000011</span><span class="punctuation">,</span><span class="none">%01100000</span></pre></td></tr><tr><td class="ln">969</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%01100001</span><span class="punctuation">,</span><span class="none">%10010111</span><span class="punctuation">,</span><span class="none">%11011111</span><span class="punctuation">,</span><span class="none">%01111100</span></pre></td></tr><tr><td class="ln">970</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">%00000000</span><span class="punctuation">,</span><span class="none">%00000000</span><span class="punctuation">,</span><span class="none">%00000000</span><span class="punctuation">,</span><span class="none">%00000000</span></pre></td></tr><tr><td class="ln">972</td><td><pre class="source"><span class="label">LogoData:</span></pre></td></tr><tr><td class="ln">973</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$10</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$10</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$08</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$04</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$09</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$10</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$20</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$11</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$08</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$20</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$10</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$82</span></pre></td></tr><tr><td class="ln">974</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$44</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$44</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$41</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$10</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$44</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$41</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$08</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$44</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$11</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$08</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$44</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$20</span></pre></td></tr><tr><td class="ln">975</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$39</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$69</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$3C</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$9D</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$93</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$27</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$3D</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$3A</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$6C</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$F2</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$B1</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$8A</span></pre></td></tr><tr><td class="ln">976</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$FF</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FF</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FF</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FF</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FF</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FF</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FF</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FF</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FF</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FF</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FF</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FF</span></pre></td></tr><tr><td class="ln">977</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$F0</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$78</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$1C</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$08</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FF</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$03</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$81</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$18</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$E0</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$60</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$27</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$03</span></pre></td></tr><tr><td class="ln">978</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$E0</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$38</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$98</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$88</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FE</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$23</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$11</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$18</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$C0</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$41</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$26</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$13</span></pre></td></tr><tr><td class="ln">979</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$E6</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$AB</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$F3</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FA</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FC</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FE</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$B9</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$98</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$AC</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$C6</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$AC</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FF</span></pre></td></tr><tr><td class="ln">980</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$D7</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$77</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$F5</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FD</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FD</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$7F</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$75</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$5D</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$DD</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$57</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$75</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$7F</span></pre></td></tr><tr><td class="ln">981</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$EA</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$AB</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FA</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$AA</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FE</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$D6</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$BB</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$AA</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$AE</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$EA</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$EE</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$AB</span></pre></td></tr><tr><td class="ln">982</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$D1</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$33</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$F4</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$49</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FC</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$4B</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$35</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$95</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$8D</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$50</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$35</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$03</span></pre></td></tr><tr><td class="ln">983</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$C6</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$23</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$F1</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$F8</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FC</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$62</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$31</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$F8</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$8C</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$46</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$27</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$E3</span></pre></td></tr><tr><td class="ln">984</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$C6</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$23</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$F1</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$F8</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FC</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$62</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$31</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$F8</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$8C</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$46</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$27</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$E3</span></pre></td></tr><tr><td class="ln">985</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$C6</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$23</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$F1</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$F8</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FC</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$62</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$31</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$F8</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$8C</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$46</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$27</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$E3</span></pre></td></tr><tr><td class="ln">986</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$C6</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$23</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$F1</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$F8</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FC</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$62</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$31</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$F8</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$8C</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$46</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$27</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$E3</span></pre></td></tr><tr><td class="ln">987</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$C6</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$23</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$F1</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$F8</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FC</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$62</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$31</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$F8</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$8C</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$46</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$27</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$E3</span></pre></td></tr><tr><td class="ln">988</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$C6</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$20</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$10</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$0C</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$04</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$02</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$01</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$01</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$80</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$40</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$24</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$03</span></pre></td></tr><tr><td class="ln">989</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$C6</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$30</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$18</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$0E</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$04</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$06</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$03</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$03</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$80</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$C0</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$64</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$07</span></pre></td></tr><tr><td class="ln">990</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$FF</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FF</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FF</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FF</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FF</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FF</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FF</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FF</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FF</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FF</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FF</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$FF</span></pre></td></tr><tr><td class="ln">991</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$39</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$69</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$3C</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$9D</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$93</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$27</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$3D</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$3A</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$6C</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$F2</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$B1</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$8A</span></pre></td></tr><tr><td class="ln">992</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$44</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$44</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$41</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$10</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$44</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$41</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$08</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$44</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$11</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$08</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$44</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$20</span></pre></td></tr><tr><td class="ln">993</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$10</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$10</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$08</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$04</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$09</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$D4</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$77</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$77</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$47</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$77</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$77</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$4A</span></pre></td></tr><tr><td class="ln">994</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$01</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$DC</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$57</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$27</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$44</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$66</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$46</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$4E</span></pre></td></tr><tr><td class="ln">995</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$01</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$48</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$75</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$25</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$45</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$45</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$54</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$44</span></pre></td></tr><tr><td class="ln">996</td><td><pre class="source"><span class="whitespace"> </span><span class="directive">.byte</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$00</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$01</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$C8</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$45</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$25</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$47</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$75</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$77</span><span class="punctuation">,</span><span class="whitespace"> </span><span class="none">$74</span></pre></td></tr><tr><td class="ln">998</td><td><pre class="source"><span class="label">LastByte:</span></pre></td></tr><tr><td class="ln">1000</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="string">"Total executed code: "</span></pre></td></tr><tr><td class="ln">1001</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="none">NonExecutable</span><span class="punctuation">-</span><span class="none">Main</span></pre></td></tr><tr><td class="ln">1002</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="string">"\n"</span></pre></td></tr><tr><td class="ln">1003</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="string">"Total data: "</span></pre></td></tr><tr><td class="ln">1004</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="none">$</span><span class="punctuation">-</span><span class="none">NonExecutable</span></pre></td></tr><tr><td class="ln">1005</td><td><pre class="source"><span class="directive">.echo</span><span class="whitespace"> </span><span class="string">"\n"</span></pre></td></tr><tr><td class="ln">1007</td><td><pre class="source"><span class="directive">#ifdef</span><span class="whitespace"> </span><span class="none">TI82</span></pre></td></tr><tr><td class="ln">1009</td><td><pre class="source disabled"><span class="directive">#ifndef</span><span class="whitespace"> </span><span class="none">TI82S</span></pre></td></tr><tr><td class="ln">1011</td><td><pre class="source disabled"><span class="directive">.block</span><span class="whitespace"> </span><span class="none">MEMUSED</span></pre></td></tr><tr><td class="ln">1013</td><td><pre class="source disabled"><span class="directive">#endif</span></pre></td></tr><tr><td class="ln">1015</td><td><pre class="source"><span class="directive">#endif</span></pre></td></tr><tr><td class="ln">1017</td><td><pre class="source"><span class="directive">.end</span></pre></td></tr><tr><td class="ln">1018</td><td><pre class="source"><span class="none">END</span></pre></td></tr></table>
	</body>
</html>
